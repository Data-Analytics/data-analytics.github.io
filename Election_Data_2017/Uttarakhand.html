<!DOCTYPE html>
<!------------------------------------------------------------
 Name:        data-analytics.github.io
 Purpose:     Data visualisation and analytics examples 
 Author:      sushanth
 Created:     3-10-2017
 Modified:    3-11-2017
 Copyright:  (c) sushanth 2017
 Licence:     protected(not suppose to se it directly)
-------------------------------------------------------------->
<html>
  <head>
 <meta http-equiv="X-UA-COMPATIBLE" content="IE=EmulateIE9">
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Sushanth">
  <meta name="description" content="This Interactive Map Tells You Everything You Need to Know About the 2017 Uttarakhand Election,Uttarakhand Assembly Election Results 2017 'A visual guide to the check out the comparison of Uttarakhand Assembly elections, from 2012 to 2017', Which of the Dravidian duos might get the stronghold in Uttarakhand? What will be the pre-poll alliances? For the state January is a crucial month to predict next political face.">
  <meta name="news_keywords" content="Uttarakhand polls, Uttarakhand assembly polls, jayalalithaa, chennai floods, Uttarakhand elections, Uttarakhand assembly elections, chennai news, Uttarakhand news, india news">
  <meta name="keywords" content="Uttarakhand polls, Uttarakhand assembly polls, jayalalithaa, chennai floods, Uttarakhand elections, Uttarakhand assembly elections, chennai news, Uttarakhand news, india news">
  <link href="css/bootstrap.css" rel="stylesheet">    
  <link href="css/basic.css" rel="stylesheet">
  <link href="css/feature.css" rel="stylesheet">
  <link href="//cdn.datatables.net/1.10.9/css/jquery.dataTables.min.css" rel="stylesheet" />
  <link rel="stylesheet" type="text/css" media="screen" href="http://fortawesome.github.io/Font-Awesome/assets/font-awesome/css/font-awesome.css">
  <link rel="stylesheet" type="text/css" media="screen" href="http://netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css">
  <link href="css/custom-styles.css" rel="stylesheet">
  <link href="css/jquery-ui.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" media="screen" href="/./css/multiple-select.css">
  <link rel="shortcut icon" href="/./images/logo.png">
  <script type="text/javascript" src="js/jquery.min.js"></script>  
  <script type="text/javascript" src="js/d3.v4.min.js"></script>
  <script type="text/javascript" src="js/sankey.js"></script>
  <script type="text/javascript" src="/./javascripts/google-analyitcs.js"></script> 
  <script type="text/javascript" src="/./javascripts/angular.min.js"></script>  
  <script type="text/javascript" src="js/bootstrap.min.js"></script>  
  <script type="text/javascript" src="js/underscore-min.js"></script>
  <script type="text/javascript" src="/./javascripts/jquery.multiple.select.js"></script>  
  <script type="text/javascript" src="js/jquery-ui-1.10.3.min.js" ></script>
  <script type="text/javascript" src="https://cdn.datatables.net/1.10.10/js/jquery.dataTables.min.js"></script> 
  <meta property="og:title"  content="ASSEMBLY ELECTIONS 2012 - 2017 (Uttarakhand)" /> 
  <meta property="og:url"   content="http://data-analytics.github.io/Election_Data_2017/Uttar_Pradesh.html" /> 
  <meta property="og:description" content="Uttarakhand Assembly Election Results 2017 'A visual guide to the check out the comparison of Uttarakhand Assembly elections, from 2012 to 2017'" /> 
  <html itemscope itemtype="http://schema.org/Blog">
  <meta itemprop="description" content="Uttarakhand Assembly Election Results 2017 'A visual guide to the check out the comparison of Uttarakhand Assembly elections, from 2012 to 2017'">
  <meta itemprop="name" content="ASSEMBLY ELECTIONS 2012 - 2017 (Uttarakhand)">
  <meta property="og:image" content="http://data-analytics.github.io/images/uk.jpg" /> 
  <meta itemprop="image" content="http://data-analytics.github.io/images/uk.jpg">
  <script type="text/javascript" src="js/topojson.min.js"></script>
  <title>Assembly Elections 2012 - 2017 (Uttarakhand)</title>  
    <style>

      body {
        margin: 0;
        font-family: "Helvetica Neue", sans-serif;
      }

      .subunit {
        stroke: #333;
        stroke-width: 1px;
      }
      .subunit-boundary {
        fill: none;
        stroke: #3a403d;
      }

      .place-label {
        font-size: .7em;
        text-shadow: 0px 0px 2px #fff;
      }
    </style>
  </head>
  <body>
    <div class="container-fluid header-style">
        <div class="container">
            <div class="row">
                <div class="col-md-12 header-logo">
                    <p class="heading-part"><a class="fa fa-home fa-2" id="home" href="/./"></a>Uttarakhand Assembly Election Results 2017, 'A visual guide to the check out the comparison of Uttarakhand Assembly elections from 2012 to 2017</p>
                    <p class="synopsis">This interactive map will bring you minute-by-minute results, from the national standings down to individual candidates and constituencies.Our Analytics And Advanced Visualization helps to bring in-depth Analysis.</p>
                    <p class="synopsis">It aims to make the past 2 Assembly elections in Uttarakhand  more easily understandable for the lay audience, allowing them to explore and discover insights.</p>
                <p align="center"><span class='st_facebook_hcount' displayText='Facebook'></span>
                <span class='st_twitter_hcount' displayText='Tweet'></span>
                <span class='st_linkedin_hcount' displayText='LinkedIn'></span>
                <span class='st_googleplus_hcount' displayText='Google'></span>
                <span class='st_email_hcount' displayText='Email'></span></p>
                </div>
            </div>
        </div>
    </div>

    <div id="overall_view">
    <div class="container-fluid">
        <div class="container">
            <div class="row">
            <div class="col-md-12 panel panel-default">
            <div class="row">
                <div class="col-md-12 panel-heading1">
                    <h2>Assembly Election Results <i class="year_tag"></i> Party Standings</h2>
                </div>    
           </div>
           <div class="row">           
                <div class=" col-md-12 panel-body">
                    <div class="dropdown header_year">
                        <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Select Year</button>
                            <ul class="dropdown-menu" role="menu">
                                <li data-year="2017" class="2017_id"><a href="?year=2017#overall_view">2017 results</a></li>
                                <li data-year="2012" class="2012_id"><a href="?year=2012#overall_view">2012 results</a></li>
                            </ul>
                      </div><br/><br/>
                    <div class="row">
                       <svg data-height="0.54" viewBox="0 0 1200 30" style="width: 100%;" xmlns="http://www.w3.org/2000/svg" xlink:xlink="http://www.w3.org/1999/xlink" version="1.1">
                          <g class="headers" transform="translate(80,0)">
                              <rect class="party-legend" data-party="AAP" data-highlight="[data-party=AAP]" data-toggle="highlight" x="0.0" width="67.1428571429" height="20" fill="#61a220"></rect>
                              <text x="33.5714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">AAP</text>
                              <rect class="party-legend" data-party="SBSP" data-highlight="[data-party=SBSP]" data-toggle="highlight" x="67.1428571429" width="67.1428571429" height="20" fill="#dbabab"></rect>
                              <text x="100.714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#000">SBSP</text>
                              <rect class="party-legend" data-party="INC" data-highlight="[data-party=INC]" data-toggle="highlight" x="134.285714286" width="67.1428571429" height="20" fill="#3498DB"></rect>
                              <text x="167.857142857" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">INC</text>
                              <rect class="party-legend" data-party="CPM" data-highlight="[data-party=CPM]" data-toggle="highlight" x="201.428571429" width="67.1428571429" height="20" fill="#ff5757"></rect>
                              <text x="235.0" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">CPM</text>
                              <rect class="party-legend" data-party="RLD" data-highlight="[data-party=RLD]" data-toggle="highlight" x="268.571428571" width="67.1428571429" height="20" fill="#9DBF87"></rect>
                              <text x="302.142857143" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">RLD</text>
                              <rect class="party-legend" data-party="OTH" data-highlight="[data-party=OTH]" data-toggle="highlight" x="335.714285714" width="67.1428571429" height="20" fill="#222"></rect>
                              <text x="369.285714286" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">Others</text>
                              <rect class="party-legend" data-party="CPI" data-highlight="[data-party=CPI]" data-toggle="highlight" x="402.857142857" width="67.1428571429" height="20" fill="#ff5757"></rect>
                              <text x="436.428571429" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">CPI</text>
                              <rect class="party-legend" data-party="NISHAD" data-highlight="[data-party=NISHAD]" data-toggle="highlight" x="470.0" width="67.1428571429" height="20" fill="#d35400"></rect>
                              <text x="503.571428571" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">NISHAD</text>
                              <rect class="party-legend" data-party="ADS" data-highlight="[data-party=ADS]" data-toggle="highlight" x="537.142857143" width="67.1428571429" height="20" fill="#f1c40f"></rect>
                              <text x="570.714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#000">ADS</text>
                              <rect class="party-legend" data-party="NCO" data-highlight="[data-party=NCO]" data-toggle="highlight" x="604.285714286" width="67.1428571429" height="20" fill="#1f77b4"></rect>
                              <text x="637.857142857" y="10.0" text-anchor="middle" dy=".35em" fill="#000">NCO</text>
                              <rect class="party-legend" data-party="JNP" data-highlight="[data-party=JNP]" data-toggle="highlight" x="671.428571429" width="67.1428571429" height="20" fill="#9A9E56"></rect>
                              <text x="705.0" y="10.0" text-anchor="middle" dy=".35em" fill="#000">JNP</text>
                              <rect class="party-legend" data-party="BSP" data-highlight="[data-party=BSP]" data-toggle="highlight" x="738.571428571" width="67.1428571429" height="20" fill="#A99888"></rect>
                              <text x="772.142857143" y="10.0" text-anchor="middle" dy=".35em" fill="#000">BSP</text>
                              <rect class="party-legend" data-party="IND" data-highlight="[data-party=IND]" data-toggle="highlight" x="805.714285714" width="67.1428571429" height="20" fill="#bdc3c7"></rect>
                              <text x="839.285714286" y="10.0" text-anchor="middle" dy=".35em" fill="#000">IND</text>
                              <rect class="party-legend" data-party="BJP" data-highlight="[data-party=BJP]" data-toggle="highlight" x="872.857142857" width="67.1428571429" height="20" fill="#ff7f0e"></rect>
                              <text x="906.428571429" y="10.0" text-anchor="middle" dy=".35em" fill="#000">BJP</text>
                              </g>                      
                            </svg>
                    <div class="col-md-1"></div> 
                    <div class="col-md-10"> 
                     <div class="overall_view_report">                     
                     </div>
                    </div>
                    <div class="col-md-1"></div> 
                    </div>


                </div>
            </div>
            </div>
            </div>
    </div>
    </div>
    </div>
    
    <div id="individual_hold" class="map_hider">
    <div class="container-fluid">
    <div class="container">
            <div class="row">
            <div class="col-md-12 panel panel-default">
            <div class="row">
                <div class="col-md-12 panel-heading1">
                    <h2>Assembly Elections View By Individual Elections <i class="year_tag"></i></h2>
                </div>    
            </div>
            <div class="row">           
                <div class=" col-md-12 panel-body">
            
                    <div class="dropdown header_year">
                        <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Select Year</button>
                            <ul class="dropdown-menu" role="menu">
                                <li data-year="2017" class="2017_id"><a href="?year=2017#individual_hold">2017 results</a></li>
                                <li data-year="2012" class="2012_id"><a href="?year=2012#individual_hold">2012 results</a></li>
                            </ul>
                    </div>
                      
                    <p class="form-inline header_form" >
                        <label align="left" >Search:</label>
                        <input type="text" class="geo_search" placeholder="eg: ludhiana ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <label value="year">based on 2012 : </label>
                        <select multiple="multiple" id="year_2012" class="select_year"></select>&nbsp;&nbsp;
                        <label value="year">based on 2017 : </label>
                        <select multiple="multiple" id="year_2017" class="select_year"></select>
                        <input type="button" value="submit" class="party_filter"></input> 
                    </p>
                       
                     <div class="chart">  
                        <svg data-height="0.54" viewBox="0 0 1200 25" style="width: 100%;" xmlns="http://www.w3.org/2000/svg" xlink:xlink="http://www.w3.org/1999/xlink" version="1.1">
                            <g class="headers" transform="translate(80,0)">
                              <rect class="party-legend" data-party="AAP" data-highlight="[data-party=AAP]" data-toggle="highlight" x="0.0" width="67.1428571429" height="20" fill="#61a220"></rect>
                              <text class="party-legend" data-party="AAP" data-highlight="[data-party=AAP]" data-toggle="highlight" x="33.5714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">AAP</text>
                              <rect class="party-legend" data-party="SBSP" data-highlight="[data-party=SBSP]" data-toggle="highlight" x="67.1428571429" width="67.1428571429" height="20" fill="#dbabab"></rect>
                              <text class="party-legend" data-party="SBSP" data-highlight="[data-party=SBSP]" data-toggle="highlight" x="100.714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#000">SBSP</text>
                              <rect class="party-legend" data-party="INC" data-highlight="[data-party=INC]" data-toggle="highlight" x="134.285714286" width="67.1428571429" height="20" fill="#3498DB"></rect>
                              <text class="party-legend" data-party="INC" data-highlight="[data-party=INC]" data-toggle="highlight" x="167.857142857" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">INC</text>
                              <rect class="party-legend" data-party="CPM" data-highlight="[data-party=CPM]" data-toggle="highlight" x="201.428571429" width="67.1428571429" height="20" fill="#ff5757"></rect>
                              <text class="party-legend" data-party="CPM" data-highlight="[data-party=CPM]" data-toggle="highlight" x="235.0" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">CPM</text>
                              <rect class="party-legend" data-party="RLD" data-highlight="[data-party=RLD]" data-toggle="highlight" x="268.571428571" width="67.1428571429" height="20" fill="#9DBF87"></rect>
                              <text class="party-legend" data-party="RLD" data-highlight="[data-party=RLD]" data-toggle="highlight" x="302.142857143" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">RLD</text>
                              <rect class="party-legend" data-party="OTH" data-highlight="[data-party=OTH]" data-toggle="highlight" x="335.714285714" width="67.1428571429" height="20" fill="#222"></rect>
                              <text class="party-legend" data-party="OTH" data-highlight="[data-party=OTH]" data-toggle="highlight" x="369.285714286" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">Others</text>
                              <rect class="party-legend" data-party="CPI" data-highlight="[data-party=CPI]" data-toggle="highlight" x="402.857142857" width="67.1428571429" height="20" fill="#ff5757"></rect>
                              <text class="party-legend" data-party="CPI" data-highlight="[data-party=CPI]" data-toggle="highlight" x="436.428571429" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">CPI</text>
                              <rect class="party-legend" data-party="NISHAD" data-highlight="[data-party=NISHAD]" data-toggle="highlight" x="470.0" width="67.1428571429" height="20" fill="#d35400"></rect>
                              <text class="party-legend" data-party="NISHAD" data-highlight="[data-party=NISHAD]" data-toggle="highlight" x="503.571428571" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">NISHAD</text>
                              <rect class="party-legend" data-party="ADS" data-highlight="[data-party=ADS]" data-toggle="highlight" x="537.142857143" width="67.1428571429" height="20" fill="#f1c40f"></rect>
                              <text class="party-legend" data-party="ADS" data-highlight="[data-party=ADS]" data-toggle="highlight" x="570.714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#000">ADS</text>
                              <rect class="party-legend" data-party="NCO" data-highlight="[data-party=NCO]" data-toggle="highlight" x="604.285714286" width="67.1428571429" height="20" fill="#1f77b4"></rect>
                              <text class="party-legend" data-party="NCO" data-highlight="[data-party=NCO]" data-toggle="highlight" x="637.857142857" y="10.0" text-anchor="middle" dy=".35em" fill="#000">NCO</text>
                              <rect class="party-legend" data-party="JNP" data-highlight="[data-party=JNP]" data-toggle="highlight" x="671.428571429" width="67.1428571429" height="20" fill="#9A9E56"></rect>
                              <text class="party-legend" data-party="JNP" data-highlight="[data-party=JNP]" data-toggle="highlight" x="705.0" y="10.0" text-anchor="middle" dy=".35em" fill="#000">JNP</text>
                              <rect class="party-legend" data-party="BSP" data-highlight="[data-party=BSP]" data-toggle="highlight" x="738.571428571" width="67.1428571429" height="20" fill="#A99888"></rect>
                              <text class="party-legend" data-party="BSP" data-highlight="[data-party=BSP]" data-toggle="highlight" x="772.142857143" y="10.0" text-anchor="middle" dy=".35em" fill="#000">BSP</text>
                              <rect class="party-legend" data-party="IND" data-highlight="[data-party=IND]" data-toggle="highlight" x="805.714285714" width="67.1428571429" height="20" fill="#bdc3c7"></rect>
                              <text class="party-legend" data-party="IND" data-highlight="[data-party=IND]" data-toggle="highlight" x="839.285714286" y="10.0" text-anchor="middle" dy=".35em" fill="#000">IND</text>
                              <rect class="party-legend" data-party="BJP" data-highlight="[data-party=BJP]" data-toggle="highlight" x="872.857142857" width="67.1428571429" height="20" fill="#ff7f0e"></rect>
                              <text x="906.428571429" y="10.0" text-anchor="middle" dy=".35em" fill="#000">BJP</text>
                            </g>
                        </svg>
                        <div class="geo_map">
                        </div>
                        </div>
                     </div>
                </div>
            </div>
            </div>
            </div>
    </div>
    </div>

	<div id="perConstituency">
    <div class="container-fluid detail_display">
    <div class="container">
            <div class="row">
            <div class="col-md-12 panel panel-default">
            <div class="row">
                <div class="col-md-12 panel-heading1">
                    <h2 class="headers_constituency">Assembly Elections year <i class="year_tag"></i> for Constituency<i class="constituency_tag"></i></h2>
                </div>    
           </div>
           <div class="row">           
                <div class=" col-md-12 panel-body">
                     <div class="chart">  
         <svg data-height="0.54" viewBox="0 0 1200 30" style="width: 100%;" xmlns="http://www.w3.org/2000/svg" xlink:xlink="http://www.w3.org/1999/xlink" version="1.1">
                          <g class="headers" transform="translate(80,0)">
                              <rect class="party-legend" data-party="AAP" data-highlight="[data-party=AAP]" data-toggle="highlight" x="0.0" width="67.1428571429" height="20" fill="#61a220"></rect>
                              <text x="33.5714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">AAP</text>
                              <rect class="party-legend" data-party="SBSP" data-highlight="[data-party=SBSP]" data-toggle="highlight" x="67.1428571429" width="67.1428571429" height="20" fill="#dbabab"></rect>
                              <text x="100.714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#000">SBSP</text>
                              <rect class="party-legend" data-party="INC" data-highlight="[data-party=INC]" data-toggle="highlight" x="134.285714286" width="67.1428571429" height="20" fill="#3498DB"></rect>
                              <text x="167.857142857" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">INC</text>
                              <rect class="party-legend" data-party="CPM" data-highlight="[data-party=CPM]" data-toggle="highlight" x="201.428571429" width="67.1428571429" height="20" fill="#ff5757"></rect>
                              <text x="235.0" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">CPM</text>
                              <rect class="party-legend" data-party="RLD" data-highlight="[data-party=RLD]" data-toggle="highlight" x="268.571428571" width="67.1428571429" height="20" fill="#9DBF87"></rect>
                              <text x="302.142857143" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">RLD</text>
                              <rect class="party-legend" data-party="OTH" data-highlight="[data-party=OTH]" data-toggle="highlight" x="335.714285714" width="67.1428571429" height="20" fill="#222"></rect>
                              <text x="369.285714286" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">Others</text>
                              <rect class="party-legend" data-party="CPI" data-highlight="[data-party=CPI]" data-toggle="highlight" x="402.857142857" width="67.1428571429" height="20" fill="#ff5757"></rect>
                              <text x="436.428571429" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">CPI</text>
                              <rect class="party-legend" data-party="NISHAD" data-highlight="[data-party=NISHAD]" data-toggle="highlight" x="470.0" width="67.1428571429" height="20" fill="#d35400"></rect>
                              <text x="503.571428571" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">NISHAD</text>
                              <rect class="party-legend" data-party="ADS" data-highlight="[data-party=ADS]" data-toggle="highlight" x="537.142857143" width="67.1428571429" height="20" fill="#f1c40f"></rect>
                              <text x="570.714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#000">ADS</text>
                              <rect class="party-legend" data-party="NCO" data-highlight="[data-party=NCO]" data-toggle="highlight" x="604.285714286" width="67.1428571429" height="20" fill="#1f77b4"></rect>
                              <text x="637.857142857" y="10.0" text-anchor="middle" dy=".35em" fill="#000">NCO</text>
                              <rect class="party-legend" data-party="JNP" data-highlight="[data-party=JNP]" data-toggle="highlight" x="671.428571429" width="67.1428571429" height="20" fill="#9A9E56"></rect>
                              <text x="705.0" y="10.0" text-anchor="middle" dy=".35em" fill="#000">JNP</text>
                              <rect class="party-legend" data-party="BSP" data-highlight="[data-party=BSP]" data-toggle="highlight" x="738.571428571" width="67.1428571429" height="20" fill="#A99888"></rect>
                              <text x="772.142857143" y="10.0" text-anchor="middle" dy=".35em" fill="#000">BSP</text>
                              <rect class="party-legend" data-party="IND" data-highlight="[data-party=IND]" data-toggle="highlight" x="805.714285714" width="67.1428571429" height="20" fill="#bdc3c7"></rect>
                              <text x="839.285714286" y="10.0" text-anchor="middle" dy=".35em" fill="#000">IND</text>
                              <rect class="party-legend" data-party="BJP" data-highlight="[data-party=BJP]" data-toggle="highlight" x="872.857142857" width="67.1428571429" height="20" fill="#ff7f0e"></rect>
                              <text x="906.428571429" y="10.0" text-anchor="middle" dy=".35em" fill="#000">BJP</text>
                              </g>                      
                            </svg>
                        <div class="col-md-4 panel-body">
                        <div class="progress_bar"></div>
                        </div>
                          <div class="col-md-8 panel-body">
                        <div class="horizontal_bar"></div>
                        </div>
                        </div>
                     </div>
                </div>
            </div>
            </div>
            </div>
    </div>
    </div>

    <div id="overall_view">
    <div class="container-fluid">
        <div class="container">
          
            <div class="row">
            <div class="col-md-12 panel panel-default">   
            <div class="row">
                <div class="col-md-12 panel-heading1">
                    <h2>party wise performance trend <i class="year_tag"></i></h2>
                </div>    
           </div>    
<div class="row">           
                <div class=" col-md-12 panel-body">

                          <div class="dropdown header_year">
                        <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Select Year</button>
                            <ul class="dropdown-menu" role="menu">
                                    
                                    <li data-year="2016" class="2017_id"><a href="?year=2017#party_Trend">2017 results</a></li>
                                    <li data-year="2011" class="2012_id"><a href="?year=2012#party_Trend">2012 results</a></li>
                                    
                              </ul>
                      </div>
                      
                        <svg data-height="0.54" viewBox="0 0 1200 40" style="width: 100%;" xmlns="http://www.w3.org/2000/svg" xlink:xlink="http://www.w3.org/1999/xlink" version="1.1">
                            <g class="headers" transform="translate(80,15)">
                              <rect class="party-legend" data-party="AAP" data-highlight="[data-party=AAP]" data-toggle="highlight" x="0.0" width="67.1428571429" height="20" fill="#61a220"></rect>
                              <text class="party-legend" data-party="AAP" data-highlight="[data-party=AAP]" data-toggle="highlight" x="33.5714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">AAP</text>
                              <rect class="party-legend" data-party="SBSP" data-highlight="[data-party=SBSP]" data-toggle="highlight" x="67.1428571429" width="67.1428571429" height="20" fill="#dbabab"></rect>
                              <text class="party-legend" data-party="SBSP" data-highlight="[data-party=SBSP]" data-toggle="highlight" x="100.714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#000">SBSP</text>
                              <rect class="party-legend" data-party="INC" data-highlight="[data-party=INC]" data-toggle="highlight" x="134.285714286" width="67.1428571429" height="20" fill="#3498DB"></rect>
                              <text class="party-legend" data-party="INC" data-highlight="[data-party=INC]" data-toggle="highlight" x="167.857142857" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">INC</text>
                              <rect class="party-legend" data-party="CPM" data-highlight="[data-party=CPM]" data-toggle="highlight" x="201.428571429" width="67.1428571429" height="20" fill="#ff5757"></rect>
                              <text class="party-legend" data-party="CPM" data-highlight="[data-party=CPM]" data-toggle="highlight" x="235.0" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">CPM</text>
                              <rect class="party-legend" data-party="RLD" data-highlight="[data-party=RLD]" data-toggle="highlight" x="268.571428571" width="67.1428571429" height="20" fill="#9DBF87"></rect>
                              <text class="party-legend" data-party="RLD" data-highlight="[data-party=RLD]" data-toggle="highlight" x="302.142857143" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">RLD</text>
                              <rect class="party-legend" data-party="OTH" data-highlight="[data-party=OTH]" data-toggle="highlight" x="335.714285714" width="67.1428571429" height="20" fill="#222"></rect>
                              <text class="party-legend" data-party="OTH" data-highlight="[data-party=OTH]" data-toggle="highlight" x="369.285714286" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">Others</text>
                              <rect class="party-legend" data-party="CPI" data-highlight="[data-party=CPI]" data-toggle="highlight" x="402.857142857" width="67.1428571429" height="20" fill="#ff5757"></rect>
                              <text class="party-legend" data-party="CPI" data-highlight="[data-party=CPI]" data-toggle="highlight" x="436.428571429" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">CPI</text>
                              <rect class="party-legend" data-party="NISHAD" data-highlight="[data-party=NISHAD]" data-toggle="highlight" x="470.0" width="67.1428571429" height="20" fill="#d35400"></rect>
                              <text class="party-legend" data-party="NISHAD" data-highlight="[data-party=NISHAD]" data-toggle="highlight" x="503.571428571" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">NISHAD</text>
                              <rect class="party-legend" data-party="ADS" data-highlight="[data-party=ADS]" data-toggle="highlight" x="537.142857143" width="67.1428571429" height="20" fill="#f1c40f"></rect>
                              <text class="party-legend" data-party="ADS" data-highlight="[data-party=ADS]" data-toggle="highlight" x="570.714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#000">ADS</text>
                              <rect class="party-legend" data-party="NCO" data-highlight="[data-party=NCO]" data-toggle="highlight" x="604.285714286" width="67.1428571429" height="20" fill="#1f77b4"></rect>
                              <text class="party-legend" data-party="NCO" data-highlight="[data-party=NCO]" data-toggle="highlight" x="637.857142857" y="10.0" text-anchor="middle" dy=".35em" fill="#000">NCO</text>
                              <rect class="party-legend" data-party="JNP" data-highlight="[data-party=JNP]" data-toggle="highlight" x="671.428571429" width="67.1428571429" height="20" fill="#9A9E56"></rect>
                              <text class="party-legend" data-party="JNP" data-highlight="[data-party=JNP]" data-toggle="highlight" x="705.0" y="10.0" text-anchor="middle" dy=".35em" fill="#000">JNP</text>
                              <rect class="party-legend" data-party="BSP" data-highlight="[data-party=BSP]" data-toggle="highlight" x="738.571428571" width="67.1428571429" height="20" fill="#A99888"></rect>
                              <text class="party-legend" data-party="BSP" data-highlight="[data-party=BSP]" data-toggle="highlight" x="772.142857143" y="10.0" text-anchor="middle" dy=".35em" fill="#000">BSP</text>
                              <rect class="party-legend" data-party="IND" data-highlight="[data-party=IND]" data-toggle="highlight" x="805.714285714" width="67.1428571429" height="20" fill="#bdc3c7"></rect>
                              <text class="party-legend" data-party="IND" data-highlight="[data-party=IND]" data-toggle="highlight" x="839.285714286" y="10.0" text-anchor="middle" dy=".35em" fill="#000">IND</text>
                              <rect class="party-legend" data-party="BJP" data-highlight="[data-party=BJP]" data-toggle="highlight" x="872.857142857" width="67.1428571429" height="20" fill="#ff7f0e"></rect>
                              <text class="party-legend" data-party="BJP" data-highlight="[data-party=BJP]" data-toggle="highlight" x="906.428571429" y="10.0" text-anchor="middle" dy=".35em" fill="#000">BJP</text>
                            </g>
                        </svg>
                    
                          <div class="party_performance_trend_svg">
                         </div>

                </div>
          </div>
            
            </div>
            </div>
    </div>
    </div>
    </div> 

<div id="Constituency_partyTrend">
        <div class="container-fluid">
    <div class="container">
            <div class="row">
            <div class="col-md-12 panel panel-default">   
            <div class="row">
                <div class="col-md-12 panel-heading1">
                    <h2>Constituency wise Winner results detail view <i class="year_tag"></i></h2>
                </div>    
           </div>
           <div class="row">           
                <div class=" col-md-12 panel-body">
                         <svg data-height="0.54" viewBox="0 0 1200 40" style="width: 100%;" xmlns="http://www.w3.org/2000/svg" xlink:xlink="http://www.w3.org/1999/xlink" version="1.1">
                            <g class="headers" transform="translate(80,15)">
                              <rect class="party-legend" data-party="AAP" data-highlight="[data-party=AAP]" data-toggle="highlight" x="0.0" width="67.1428571429" height="20" fill="#61a220"></rect>
                              <text class="party-legend" data-party="AAP" data-highlight="[data-party=AAP]" data-toggle="highlight" x="33.5714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">AAP</text>
                              <rect class="party-legend" data-party="SBSP" data-highlight="[data-party=SBSP]" data-toggle="highlight" x="67.1428571429" width="67.1428571429" height="20" fill="#dbabab"></rect>
                              <text class="party-legend" data-party="SBSP" data-highlight="[data-party=SBSP]" data-toggle="highlight" x="100.714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#000">SBSP</text>
                              <rect class="party-legend" data-party="INC" data-highlight="[data-party=INC]" data-toggle="highlight" x="134.285714286" width="67.1428571429" height="20" fill="#3498DB"></rect>
                              <text class="party-legend" data-party="INC" data-highlight="[data-party=INC]" data-toggle="highlight" x="167.857142857" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">INC</text>
                              <rect class="party-legend" data-party="CPM" data-highlight="[data-party=CPM]" data-toggle="highlight" x="201.428571429" width="67.1428571429" height="20" fill="#ff5757"></rect>
                              <text class="party-legend" data-party="CPM" data-highlight="[data-party=CPM]" data-toggle="highlight" x="235.0" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">CPM</text>
                              <rect class="party-legend" data-party="RLD" data-highlight="[data-party=RLD]" data-toggle="highlight" x="268.571428571" width="67.1428571429" height="20" fill="#9DBF87"></rect>
                              <text class="party-legend" data-party="RLD" data-highlight="[data-party=RLD]" data-toggle="highlight" x="302.142857143" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">RLD</text>
                              <rect class="party-legend" data-party="OTH" data-highlight="[data-party=OTH]" data-toggle="highlight" x="335.714285714" width="67.1428571429" height="20" fill="#222"></rect>
                              <text class="party-legend" data-party="OTH" data-highlight="[data-party=OTH]" data-toggle="highlight" x="369.285714286" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">Others</text>
                              <rect class="party-legend" data-party="CPI" data-highlight="[data-party=CPI]" data-toggle="highlight" x="402.857142857" width="67.1428571429" height="20" fill="#ff5757"></rect>
                              <text class="party-legend" data-party="CPI" data-highlight="[data-party=CPI]" data-toggle="highlight" x="436.428571429" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">CPI</text>
                              <rect class="party-legend" data-party="NISHAD" data-highlight="[data-party=NISHAD]" data-toggle="highlight" x="470.0" width="67.1428571429" height="20" fill="#d35400"></rect>
                              <text class="party-legend" data-party="NISHAD" data-highlight="[data-party=NISHAD]" data-toggle="highlight" x="503.571428571" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">NISHAD</text>
                              <rect class="party-legend" data-party="ADS" data-highlight="[data-party=ADS]" data-toggle="highlight" x="537.142857143" width="67.1428571429" height="20" fill="#f1c40f"></rect>
                              <text class="party-legend" data-party="ADS" data-highlight="[data-party=ADS]" data-toggle="highlight" x="570.714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#000">ADS</text>
                              <rect class="party-legend" data-party="NCO" data-highlight="[data-party=NCO]" data-toggle="highlight" x="604.285714286" width="67.1428571429" height="20" fill="#1f77b4"></rect>
                              <text class="party-legend" data-party="NCO" data-highlight="[data-party=NCO]" data-toggle="highlight" x="637.857142857" y="10.0" text-anchor="middle" dy=".35em" fill="#000">NCO</text>
                              <rect class="party-legend" data-party="JNP" data-highlight="[data-party=JNP]" data-toggle="highlight" x="671.428571429" width="67.1428571429" height="20" fill="#9A9E56"></rect>
                              <text class="party-legend" data-party="JNP" data-highlight="[data-party=JNP]" data-toggle="highlight" x="705.0" y="10.0" text-anchor="middle" dy=".35em" fill="#000">JNP</text>
                              <rect class="party-legend" data-party="BSP" data-highlight="[data-party=BSP]" data-toggle="highlight" x="738.571428571" width="67.1428571429" height="20" fill="#A99888"></rect>
                              <text class="party-legend" data-party="BSP" data-highlight="[data-party=BSP]" data-toggle="highlight" x="772.142857143" y="10.0" text-anchor="middle" dy=".35em" fill="#000">BSP</text>
                              <rect class="party-legend" data-party="IND" data-highlight="[data-party=IND]" data-toggle="highlight" x="805.714285714" width="67.1428571429" height="20" fill="#bdc3c7"></rect>
                              <text class="party-legend" data-party="IND" data-highlight="[data-party=IND]" data-toggle="highlight" x="839.285714286" y="10.0" text-anchor="middle" dy=".35em" fill="#000">IND</text>
                              <rect class="party-legend" data-party="BJP" data-highlight="[data-party=BJP]" data-toggle="highlight" x="872.857142857" width="67.1428571429" height="20" fill="#ff7f0e"></rect>
                              <text class="party-legend" data-party="BJP" data-highlight="[data-party=BJP]" data-toggle="highlight" x="906.428571429" y="10.0" text-anchor="middle" dy=".35em" fill="#000">BJP</text>      
                            </g>
                        </svg>
                        <div class="party_trend"></div>
                </div>
          </div>
            
            </div>
            </div>

    </div>
    </div>
    </div>
 
<div id="sankeyFlow">
    <div class="container-fluid">
    <div class="container">
          
            <div class="row">
            <div class="col-md-12 panel panel-default">   
            <div class="row">
                <div class="col-md-12 panel-heading1">
                    <h2>Party Transitions Trend across successive elections<i class="successive_year_tag"></i></h2>
                </div>    
           </div>
           <div class="row">           
                <div class=" col-md-12 panel-body">
                    <div  class="sankey_chart">
                         <svg data-height="0.54" viewBox="0 0 1200 40" style="width: 100%;" xmlns="http://www.w3.org/2000/svg" xlink:xlink="http://www.w3.org/1999/xlink" version="1.1">
                            <g class="headers" transform="translate(80,15)">
                              <rect class="party-legend" data-party="AAP" data-highlight="[data-party=AAP]" data-toggle="highlight" x="0.0" width="67.1428571429" height="20" fill="#61a220"></rect>
                              <text class="party-legend" data-party="AAP" data-highlight="[data-party=AAP]" data-toggle="highlight" x="33.5714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">AAP</text>
                              <rect class="party-legend" data-party="SBSP" data-highlight="[data-party=SBSP]" data-toggle="highlight" x="67.1428571429" width="67.1428571429" height="20" fill="#dbabab"></rect>
                              <text class="party-legend" data-party="SBSP" data-highlight="[data-party=SBSP]" data-toggle="highlight" x="100.714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#000">SBSP</text>
                              <rect class="party-legend" data-party="INC" data-highlight="[data-party=INC]" data-toggle="highlight" x="134.285714286" width="67.1428571429" height="20" fill="#3498DB"></rect>
                              <text class="party-legend" data-party="INC" data-highlight="[data-party=INC]" data-toggle="highlight" x="167.857142857" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">INC</text>
                              <rect class="party-legend" data-party="CPM" data-highlight="[data-party=CPM]" data-toggle="highlight" x="201.428571429" width="67.1428571429" height="20" fill="#ff5757"></rect>
                              <text class="party-legend" data-party="CPM" data-highlight="[data-party=CPM]" data-toggle="highlight" x="235.0" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">CPM</text>
                              <rect class="party-legend" data-party="RLD" data-highlight="[data-party=RLD]" data-toggle="highlight" x="268.571428571" width="67.1428571429" height="20" fill="#9DBF87"></rect>
                              <text class="party-legend" data-party="RLD" data-highlight="[data-party=RLD]" data-toggle="highlight" x="302.142857143" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">RLD</text>
                              <rect class="party-legend" data-party="OTH" data-highlight="[data-party=OTH]" data-toggle="highlight" x="335.714285714" width="67.1428571429" height="20" fill="#222"></rect>
                              <text class="party-legend" data-party="OTH" data-highlight="[data-party=OTH]" data-toggle="highlight" x="369.285714286" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">Others</text>
                              <rect class="party-legend" data-party="CPI" data-highlight="[data-party=CPI]" data-toggle="highlight" x="402.857142857" width="67.1428571429" height="20" fill="#ff5757"></rect>
                              <text class="party-legend" data-party="CPI" data-highlight="[data-party=CPI]" data-toggle="highlight" x="436.428571429" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">CPI</text>
                              <rect class="party-legend" data-party="NISHAD" data-highlight="[data-party=NISHAD]" data-toggle="highlight" x="470.0" width="67.1428571429" height="20" fill="#d35400"></rect>
                              <text class="party-legend" data-party="NISHAD" data-highlight="[data-party=NISHAD]" data-toggle="highlight" x="503.571428571" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">NISHAD</text>
                              <rect class="party-legend" data-party="ADS" data-highlight="[data-party=ADS]" data-toggle="highlight" x="537.142857143" width="67.1428571429" height="20" fill="#f1c40f"></rect>
                              <text class="party-legend" data-party="ADS" data-highlight="[data-party=ADS]" data-toggle="highlight" x="570.714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#000">ADS</text>
                              <rect class="party-legend" data-party="NCO" data-highlight="[data-party=NCO]" data-toggle="highlight" x="604.285714286" width="67.1428571429" height="20" fill="#1f77b4"></rect>
                              <text class="party-legend" data-party="NCO" data-highlight="[data-party=NCO]" data-toggle="highlight" x="637.857142857" y="10.0" text-anchor="middle" dy=".35em" fill="#000">NCO</text>
                              <rect class="party-legend" data-party="JNP" data-highlight="[data-party=JNP]" data-toggle="highlight" x="671.428571429" width="67.1428571429" height="20" fill="#9A9E56"></rect>
                              <text class="party-legend" data-party="JNP" data-highlight="[data-party=JNP]" data-toggle="highlight" x="705.0" y="10.0" text-anchor="middle" dy=".35em" fill="#000">JNP</text>
                              <rect class="party-legend" data-party="BSP" data-highlight="[data-party=BSP]" data-toggle="highlight" x="738.571428571" width="67.1428571429" height="20" fill="#A99888"></rect>
                              <text class="party-legend" data-party="BSP" data-highlight="[data-party=BSP]" data-toggle="highlight" x="772.142857143" y="10.0" text-anchor="middle" dy=".35em" fill="#000">BSP</text>
                              <rect class="party-legend" data-party="IND" data-highlight="[data-party=IND]" data-toggle="highlight" x="805.714285714" width="67.1428571429" height="20" fill="#bdc3c7"></rect>
                              <text class="party-legend" data-party="IND" data-highlight="[data-party=IND]" data-toggle="highlight" x="839.285714286" y="10.0" text-anchor="middle" dy=".35em" fill="#000">IND</text>
                              <rect class="party-legend" data-party="BJP" data-highlight="[data-party=BJP]" data-toggle="highlight" x="872.857142857" width="67.1428571429" height="20" fill="#ff7f0e"></rect>
                              <text class="party-legend" data-party="BJP" data-highlight="[data-party=BJP]" data-toggle="highlight" x="906.428571429" y="10.0" text-anchor="middle" dy=".35em" fill="#000">BJP</text>      
                            </g>
                        </svg>
                    </div>
                </div>
          </div>
            
            </div>
            </div>
            
    
    </div>
    </div>
    </div>

    <script>
color_map = {"ADK(JL)":"#363636","ADK(JR)":"#363636","SBSP":"#dbabab","AIFB":"#FFAD01","AINRC":"#B78332","AITC":"#4A9F88","AKD":"#363636","BAC":"#A99888","BBC":"#363636","BJP":"#ff7f0e","BJS":"#363636","BLD":"#363636","C(S)":"#363636","CMPKSC":"#363636","CON":"#ff7f0e","CON(S)":"#363636","CPI":"#F27A67","CPI(M)":"#363636","CPM":"#ff5757","CPM(K)":"#363636","DIC":"#363636","ADS":"#f1c40f","AAP":"#61a220","DSP(P)":"#363636","DSP(PC)":"#363636","FB":"#363636","FB(S)":"#363636","FBL":"#014BC6","FBL(MG)":"#363636","FBL(RG)":"#363636","FBM":"#363636","GKC":"#363636","GL":"#363636","UKDP":"#363636","GOJAM":"#363636","HMS":"#363636","IC(S)":"#363636","ICS":"#363636","ICS(SCS)":"#363636","IGL":"#363636","IML":"#363636","INC":"#3498DB","INC(U)":"#4A9F88","IND":"#bdc3c7","INL":"#363636","ISP":"#363636","IUML":"#014BC6","JD":"#363636","JD(S)":"#363636","JKP":"#363636","JKP(N)":"#363636","JNP":"#9A9E56","JP":"#363636","JPSS":"#363636","KC":"#363636","KCJ":"#363636","KCM":"#363636","KCP":"#363636","KCS":"#363636","KEC":"#FFAD01","KEC(B)":"#363636","KEC(J)":"#363636","KEC(M)":"#FFAD01","KMPP":"#363636","KRSP":"#363636","KSP":"#363636","LKD":"#363636","LSS":"#363636","MAG":"#981D97","MFB":"#363636","ML":"#363636","MLO":"#363636","MNMK":"#363636","GVP":"#014BC6","NA":"#363636","NCO":"#1F77B4","NCP":"#363636","NDF":"#363636","NDP":"#363636","NSC":"#363637","Others":"#363636","PF":"#363636","PMC":"#363636","NISHAD":"#d35400","PML":"#363636","PSP":"#FFD380","PT":"#363636","RCI":"#363636","RCPI(RB)":"#363636","RJD":"#363636","RSP":"#F8F907","RSPK(B)":"#363636","SBP":"#363636","SJD":"#363636","SOP":"#363636","SP":"#ADB13E","SSP":"#1F77B4","SUC":"#363636","SUCI":"#363636","SWA":"#363636","RLD":"#9DBF87","RLD(M)":"#9DBF87","TMK":"#363636","VCK":"#363636","WBSP":"#363636","WPI":"#363636","FPM":"#363636","KNA":"#363636","MHU":"#363636","MPP":"#363636","MRP":"#FAEA75","MSCP":"#dbabab","NPP":"#363636","DRPP":"#363636","#N/A":"#363636","SAP":"#363636","LJP":"#363636","NPF":"#363636","JD(U)":"#363636","BSP":"#22409A","PECP":"#F4D032","RLD":"#9DBF87",'QED':"#363636","IEMC":"#363636","AD":"#363636"};

 $(window).scroll(function() {
        if ($(this).scrollTop() >= 50) {        
            $('#return-to-top').fadeIn(200);    
        }else {
            $('#return-to-top').fadeOut(200);   
        }
    });

    $('#return-to-top').click(function() {     
        $('body,html').animate({
            scrollTop : 0             
        }, 500);
    });


function getParameterByName(name, url) {
    if (!url) url = window.location.href;
    name = name.replace(/[\[\]]/g, "\\$&");
    var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
        results = regex.exec(url);
    if (!results) return null;
    if (!results[2]) return '';
    return decodeURIComponent(results[2].replace(/\+/g, " "));
}

function tabulate(data, columns) {
        
        $('.party_trend').empty()
        
        color_map = {"ADK(JL)":"#363636","ADK(JR)":"#363636","SBSP":"#dbabab","AIFB":"#FFAD01","AINRC":"#B78332","AITC":"#4A9F88","AKD":"#363636","BAC":"#A99888","BBC":"#363636","BJP":"#ff7f0e","BJS":"#363636","BLD":"#363636","C(S)":"#363636","CMPKSC":"#363636","CON":"#ff7f0e","CON(S)":"#363636","CPI":"#F27A67","CPI(M)":"#363636","CPM":"#ff5757","CPM(K)":"#363636","DIC":"#363636","ADS":"#f1c40f","AAP":"#61a220","DSP(P)":"#363636","DSP(PC)":"#363636","FB":"#363636","FB(S)":"#363636","FBL":"#014BC6","FBL(MG)":"#363636","FBL(RG)":"#363636","FBM":"#363636","GKC":"#363636","GL":"#363636","UKDP":"#363636","GOJAM":"#363636","HMS":"#363636","IC(S)":"#363636","ICS":"#363636","ICS(SCS)":"#363636","IGL":"#363636","IML":"#363636","INC":"#3498DB","INC(U)":"#4A9F88","IND":"#bdc3c7","INL":"#363636","ISP":"#363636","IUML":"#014BC6","JD":"#363636","JD(S)":"#363636","JKP":"#363636","JKP(N)":"#363636","JNP":"#9A9E56","JP":"#363636","JPSS":"#363636","KC":"#363636","KCJ":"#363636","KCM":"#363636","KCP":"#363636","KCS":"#363636","KEC":"#FFAD01","KEC(B)":"#363636","KEC(J)":"#363636","KEC(M)":"#FFAD01","KMPP":"#363636","KRSP":"#363636","KSP":"#363636","LKD":"#363636","LSS":"#363636","MAG":"#981D97","MFB":"#363636","ML":"#363636","MLO":"#363636","MNMK":"#363636","GVP":"#014BC6","NA":"#363636","NCO":"#1F77B4","NCP":"#363636","NDF":"#363636","NDP":"#363636","NSC":"#363637","Others":"#363636","PF":"#363636","PMC":"#363636","NISHAD":"#d35400","PML":"#363636","PSP":"#FFD380","PT":"#363636","RCI":"#363636","RCPI(RB)":"#363636","RJD":"#363636","RSP":"#F8F907","RSPK(B)":"#363636","SBP":"#363636","SJD":"#363636","SOP":"#363636","SP":"#ADB13E","SSP":"#1F77B4","SUC":"#363636","SUCI":"#363636","SWA":"#363636","RLD":"#9DBF87","RLD(M)":"#9DBF87","TMK":"#363636","VCK":"#363636","WBSP":"#363636","WPI":"#363636","FPM":"#363636","KNA":"#363636","MHU":"#363636","MPP":"#363636","MRP":"#FAEA75","MSCP":"#dbabab","NPP":"#363636","DRPP":"#363636","#N/A":"#363636","SAP":"#363636","LJP":"#363636","NPF":"#363636","JD(U)":"#363636","BSP":"#22409A","PECP":"#F4D032","RLD":"#9DBF87",'QED':"#363636","IEMC":"#363636","AD":"#363636"};
        
        var table = d3.select('.party_trend')
                        .append('table')                   
                        .attr("id","myTable")
                        .attr("class","table table-bordered");
    
        var thead = table.append('thead').attr("class","data_head")
        var tbody = table.append('tbody');

        // append the header row
        thead.append('tr')
          .selectAll('th')
          .data(columns).enter()
          .append('th')
            .attr("class","dynatable-head")
           
            .text(function (column) { return column.toUpperCase(); });

        // create a row for each object in the data
        var rows = tbody.selectAll('tr')
          .data(data)
          .enter()
          .append('tr');

        // create a cell in each row for each column
        var cells = rows.selectAll('td')
          .data(function (row) {
            return columns.map(function (column) {
              return {column: column, value: row[column]};
            });
          })
          .enter()
          .append('td')
          .attr("bgcolor",function(d) { return color_map[d.value] })            
          .append("font")
          .style("color",function(d) { return color_map[d.value] == undefined ? "#636363" : ((parseInt(color_map[d.value].replace('#', ''), 16) > 0xffffff / 2) ? '#000' : '#fff') })                          
          .text(function (d) { return d.value; });

      return table;
   
    }

function map_filter(year_2012,year_2017,other_data){
    var centered;

    color_map = {"NISHAD":"#dbabab","ADS":"#FFAD01","AINRC":"#B78332","AITC":"#4A9F88","AKD":"#363636","BSP":"#A99888","BBC":"#363636","BJP":"#ff7f0e","BJS":"#363636","BLD":"#363636","C(S)":"#363636","CMPKSC":"#363636","CON":"#ff7f0e","CON(S)":"#363636","CPI":"#F27A67","CPI(M)":"#363636","CPM":"#ff5757","CPM(K)":"#363636","DIC":"#363636","ADS":"#f1c40f","AAP":"#61a220","DSP(P)":"#363636","DSP(PC)":"#363636","FB":"#363636","FB(S)":"#363636","FBL":"#014BC6","FBL(MG)":"#363636","FBL(RG)":"#363636","FBM":"#363636","GKC":"#363636","GL":"#363636","UKDP":"#363636","GOJAM":"#363636","HMS":"#363636","IC(S)":"#363636","ICS":"#363636","ICS(SCS)":"#363636","IGL":"#363636","IML":"#363636","INC":"#3498DB","INC(U)":"#4A9F88","IND":"#bdc3c7","INL":"#363636","ISP":"#363636","IUML":"#014BC6","JD":"#363636","JD(S)":"#363636","JKP":"#363636","JKP(N)":"#363636","JNP":"#9A9E56","JP":"#363636","JPSS":"#363636","KC":"#363636","KCJ":"#363636","KCM":"#363636","KCP":"#363636","KCS":"#363636","KEC":"#FFAD01","KEC(B)":"#363636","KEC(J)":"#363636","KEC(M)":"#FFAD01","KMPP":"#363636","KRSP":"#363636","KSP":"#363636","LKD":"#363636","LSS":"#363636","MAG":"#981D97","MFB":"#363636","ML":"#363636","MLO":"#363636","MNMK":"#363636","GVP":"#014BC6","NA":"#363636","NCO":"#1F77B4","NCP":"#363636","NDF":"#363636","NDP":"#363636","NSC":"#363637","Others":"#363636","PF":"#363636","PMC":"#363636","NISHAD":"#d35400","PML":"#363636","PSP":"#FFD380","PT":"#363636","RCI":"#363636","RCPI(RB)":"#363636","RJD":"#363636","RSP":"#F8F907","RSPK(B)":"#363636","SBP":"#363636","SJD":"#363636","SOP":"#363636","SP":"#ADB13E","SSP":"#1F77B4","SUC":"#363636","SUCI":"#363636","SWA":"#363636","RLD":"#9DBF87","RLD(M)":"#9DBF87","TMK":"#363636","VCK":"#363636","WBSP":"#363636","WPI":"#363636","FPM":"#363636","KNA":"#363636","MHU":"#363636","MPP":"#363636","MRP":"#FAEA75","SBSP":"#dbabab","NPP":"#363636","DRPP":"#363636","#N/A":"#363636","SAP":"#363636","LJP":"#363636","NPF":"#363636","JD(U)":"#363636","PECP":"#F4D032","RLD":"#9DBF87",'QED':"#363636","IEMC":"#363636","AD":"#363636"};

    map_data = other_data.filter(function(d){return (d.YEAR==year_detail) & (d['#']==1) })

    map_data_12 = other_data.filter(function(d){return (d.YEAR==2012) & (d['#']==1) })
    map_data_17 = other_data.filter(function(d){return (d.YEAR==2017) & (d['#']==1) })
    
    map_data.forEach(function(o) {
        map_data_12.forEach(function(o_12) {
           if (o_12.ac == o.ac){
                o['12_PARTY'] = o_12['PARTY']
              }
        });
        map_data_17.forEach(function(o_17) {
           if (o_17.ac == o.ac){
                o['17_PARTY'] = o_17['PARTY']
              }
        });
    });
     
   var map_data_2012 = []
                    _.each(map_data, function(d) { if(_.contains(year_2012, d['12_PARTY'])) { map_data_2012.push(d);}});
   
    var map_data = []
                    _.each(map_data_2012, function(d) { if(_.contains(year_2017, d['17_PARTY'])) { map_data.push(d);}});
    
    var sub_width = parseInt(d3.select('.party_performance_trend_svg').style('width'), 10)
       
       var margin = {top: 20, right: 20, bottom: 20, left: 20},
        width = sub_width - margin.left - margin.right,
        height = 460 - margin.top - margin.bottom;

      var projection = d3.geoMercator();

      var path = d3.geoPath()
          .projection(projection)
          .pointRadius(2);

      var svg = d3.select(".geo_map").append("svg")
            .attr("width", "100%")
            .attr("data-height","0.54")
            .attr("viewBox","0 0 "+(width)+" "+(height))
            .attr("xmlns", 'http://www.w3.org/2000/svg')
            .attr("xlink", 'http://www.w3.org/1999/xlink')
            .attr("version", '1.1');

       svg.append("rect")
            .attr("class", "background")
            .attr("width", width)
            .attr("height", height)
            .attr("fill",'none')
            .attr("pointer-events",'all')
            .on("click", clicked);

 
      var g = svg.append("g");
    
      d3.json("uttarakhand_assembly.json", function(error, data) {
        if (error) throw error;
        var boundary = centerZoom(data);
        drawSubUnits(data);
        drawOuterBoundary(data, boundary);

      });

      // This function "centers" and "zooms" a map by setting its projection's scale and translate according to its outer boundary
      // It also returns the boundary itself in case you want to draw it to the map
      function centerZoom(data){
        var o = topojson.mesh(data, data.objects.polygons, function(a, b) { return a === b; });

        projection
            .scale(1)
            .translate([0, 0]);

        var b = path.bounds(o),
            s = 1 / Math.max((b[1][0] - b[0][0]) / width, (b[1][1] - b[0][1]) / height),
            t = [(width - s * (b[1][0] + b[0][0])) / 2, (height - s * (b[1][1] + b[0][1])) / 2];

        projection
            .scale(s)
            .translate(t);

        return o;
      }

      function addThousandsSeparator(t){
          var a=t;if(parseFloat(t)){t=new String(t);var e=t.split(".");e[0]=e[0].split("").reverse().join("").replace(/(\d{3})(?!$)/g,"$1,").split("").reverse().join(""),a=e.join(".")}return a}
    
      function drawOuterBoundary(data, boundary){
        g.append("path")
            .datum(boundary)
            .attr("d", path)
            .attr("class", "subunit-boundary");
      }

      function drawPlaces(data){
        g.append("path")
            .datum(topojson.feature(data, data.objects.places))
            .attr("d", path)
            .attr("class", "place");

        g.selectAll(".place-label")
            .data(topojson.feature(data, data.objects.places).features)
          .enter().append("text")
            .attr("class", "place-label")
            .attr("transform", function(d) { return "translate(" + projection(d.geometry.coordinates) + ")"; })
            .attr("dy", ".35em")
            .attr("x", 6)
            .style("text-anchor", "start")
            .text(function(d) { return d.properties.name; });
      }

function clicked(d) {
      
  var x, y, k;
  if (d && centered !== d) {
    var centroid = path.centroid(d);
    x = centroid[0];
    y = centroid[1];
    k = 4;
    centered = d;
  }else {
    x = width / 2;
    y = height / 2;
    k = 1;
    centered = null;
  }

  g.selectAll("path")
      .classed("active", centered && function(d) { return d === centered; });

  g.transition()
      .duration(750)
      .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")scale(" + Math.sqrt(k) + ")translate(" + -x + "," + -y + ")")
      .style("stroke-width", 1.5 / k + "px");

}
      
      constituency_list =[]
      function drawSubUnits(data){
        
       mapper_data_view = topojson.feature(data, data.objects.polygons).features
       mapper_data_view.forEach(function(o) {
            map_data.forEach(function(g){
              if (o.properties.ac == g.ac){
                constituency_list.push(o.properties.ac_name);
                o.result = g
              }
            });
          });

        g.selectAll(".subunit")
            .data(mapper_data_view)
          .enter().append("path")
            .attr("class", "subunit")
            .attr("data-title", function (d){ return d.result!=undefined? 'Constituency : '+d.properties.ac_name+'</br>  Candidate : '+d.result.NAME+'</br> Party : '+d.result.PARTY+'<br/> Votes : '+addThousandsSeparator(d.result.votes)+'<br/> Vote percent: '+d.result.vote_percent.toFixed(2)+'% <br/> Polled Votes: '+addThousandsSeparator(d.result.polled_votes)+' <br/> Year: '+d.result.YEAR : ''})
            .attr("sub_link", function (d){ return d.properties.ac_name })
            .attr("fill", function(d) { return d.result!=undefined? color_map[d.result.PARTY] : '#fff'  })
            .attr("d", path)
            .on("click", clicked)
            .on('dblclick',function(d){ return d.result!=undefined? window.open('?year='+d.result.YEAR+'&acct_no='+d.result.AC_NO+"#perConstituency","_self"):''  });

    g.selectAll(".geom-label")
      .data(mapper_data_view)
    .enter().append("text")
      .attr("class", "geom-label")
      .attr("transform", function(d) { return "translate(" + path.centroid(d) + ")"; })
      .attr("dy", ".35em")
      .attr("text-anchor", "middle")
      .style("text-transform", "uppercase")
      .text(function(d) { return d.properties.ac_name })
      .style("font-size", function(d) { return Math.min(16, path.measure(d) / this.getComputedTextLength()) + "px"; });
 
      $("path").tooltip({container: '.geo_map', html: true, placement:'top'});
      
var lastsearch = '';
    var $box = {};
    
    function add_search(search, chart) {
      var $chart = $(chart);
      $(search).on('keypress, change, keyup', function() {
        var search = $(this).val();
        if (lastsearch != search) {
          lastsearch = search;
          var re = new RegExp( "^" + search, "i" );
          $('path', $chart).each(function(){
              $(this).css('fill-opacity', re.test($(this).attr("sub_link")) ? '1.0': '0.1');
          });
        }
      });
    }

   add_search('.geo_search', '.geo_map');
   var Industry = constituency_list;
    
    $( ".geo_search" ).autocomplete({
    source: function(req, responseFn) {
        var re = $.ui.autocomplete.escapeRegex(req.term);
        var matcher = new RegExp( "^" + re, "i" );
        var a = $.grep( Industry, function(item,index){
            return matcher.test(item);
        });
        responseFn( a );
    }
    });
    
      }
      }

year_detail = getParameterByName('year');
if (year_detail == undefined){ year_detail= 2017; }
$(".year_tag").append("("+year_detail+")");
$(".successive_year_tag").append(" (2012 - 2017)");
$('.'+year_detail+'_id').addClass('active');
acct_no = getParameterByName('acct_no');
if (acct_no == undefined){ $(".detail_display").hide(); }

    d3.csv("Uttarakhand.csv", function(map_data) { 

    full_data = map_data

    year_data_set_all = map_data.filter(function(d){return (d.YEAR==year_detail & d['#']==1)  })
    year_data_set_all.forEach(function(o) {
       o.votes_gained = addThousandsSeparator(parseInt(o.VOTES))
    });

    // render the table(s)
    tabulate(year_data_set_all, ['AC_NO','AC_NAME','NAME','PARTY','votes_gained','vote_percent']); // 2 column table
    
    $('#myTable').DataTable({ "sScrollX": "100%", "sScrollXInner": "150%" });
    
    function addThousandsSeparator(t){var a=t;if(parseFloat(t)){t=new String(t);var e=t.split(".");e[0]=e[0].split("").reverse().join("").replace(/(\d{3})(?!$)/g,"$1,").split("").reverse().join(""),a=e.join(".")}return a}

    year_data_set_sum = map_data.filter(function(d){return (d.YEAR==year_detail)})

    year_data_set_sum_overall = d3.sum(year_data_set_sum, function(d){
        return parseInt(d.VOTES);
    });

    var year_data_set_sum_party = d3.nest()
              .key(function(d) { return d['PARTY']; })
              .rollup(function(v) { return d3.sum(v, function(d) {return parseInt(d.VOTES);})  })
              .entries(year_data_set_sum);
     
    year_data_set_2012 = map_data.filter(function(d){return (d.YEAR==2012 & d['#']==1)  })
    year_data_set_2017 = map_data.filter(function(d){return (d.YEAR==2017 & d['#']==1)  })
    
    year_data_set_2012.forEach(function(p) {
        year_data_set_2017.forEach(function(o) {
            if(p.AC_NO==o.AC_NO)
            {
            o['O_PARTY'] = p['PARTY']
            }
        });
    });

    party_2012 = _.uniq(year_data_set_2012, function(item, key, a) { return item['PARTY']; });
    party_2017 = _.uniq(year_data_set_2017, function(item, key, a) { return item['PARTY']; });
    
    var select_box = d3.select('#year_2012')
                .selectAll("option")
                    .data(party_2012.filter(function(d) { return d['PARTY']!='' })) 
                    .enter().append("option")
                    .attr("value", function (d) { return d['PARTY']; })
                    .attr("class","name")
                    .attr("selected","")
                    .text(function (d) { return d['PARTY']; });

      var select_box = d3.select('#year_2017')     
                .selectAll("option")
                    .data(party_2017.filter(function(d) { return d['PARTY']!='' }))
                    .enter().append("option")
                    .attr("value", function (d) { return d['PARTY']; })
                    .attr("class","name")
                    .attr("selected","")
                    .text(function (d) { return d['PARTY']; });

      $(".select_year").multipleSelect({ placeholder: "Here is the placeholder" });

      var year_2017 = [];
      $('#year_2017 :selected').each(function(i, selected){
          year_2017[i] = $(selected).val();
      });

      var year_2012 = [];
      $('#year_2012 :selected').each(function(i, selected){
            year_2012[i] = $(selected).val();
      });
      map_filter(year_2012,year_2017,map_data);

      var year_data_sets = d3.nest()
              .key(function(d) { return d['PARTY']; })
              .rollup(function(v) { return v.length;  })
              .entries(year_data_set_all);
   
      year_data_sets.sort(function(a, b) { return b.value - a.value; })
      
function addThousandsSeparator(t){var a=t;if(parseFloat(t)){t=new String(t);var e=t.split(".");e[0]=e[0].split("").reverse().join("").replace(/(\d{3})(?!$)/g,"$1,").split("").reverse().join(""),a=e.join(".")}return a}
  
      heading_colors = []
       year_data_sets.forEach(function(o) {
          heading_colors.push(color_map[o.key])
          year_data_set_sum_party.forEach(function(p) {
            if (p.key==o.key){
              o.party_vote_percent = parseFloat(100*p.value/year_data_set_sum_overall).toFixed(2);
              o.party_votes = addThousandsSeparator(p.value)
            }
        });
       })

  
        max_seats = d3.max(year_data_sets, function(d) { return d.value; });

        lowresult_data  = d3.select('.overall_view_report')
                             .selectAll('div')
                            .data([year_data_sets])
                            .enter()
                            .append("div")
                            .append("table")
                            .attr("class","table table-condensed party-summary")

lowresult_data.append('thead')
                            .selectAll("tr")
                            .data([['Party','Seats','Seat Share','Vote Percent','Total Votes']]).enter()
                            .append("tr")
                            .selectAll("th")
                                .data(function(d,l) { return d }).enter()
                                .append('th')
                                .style("max-width",'10px')
                                .style("font-size",'15px')
                                .append("font")
                                .attr("color","#636363")
                                .text(function(o,i) { return o });

              lowresult_data.append('tbody')
                                .selectAll("tr")
                                .data(function(o) { return o }).enter()
                                .append("tr")
                                .selectAll("td")
                                    .data(function(d,l) { return [d.key,d.value,l+':'+(d.value*100/max_seats).toFixed(2),d.party_vote_percent+'%',d.party_votes] }).enter()
                                    .append('td')
                                    .attr('class',function(d) { return d+'s'})
                                    .style("max-width",'10px')
                                    .style("font-size",'15px')
                                    .text(function(o,i) { return i!=2? o:'' })
                                    .append('div')
                                    .attr('class',function(d,i) { return i!=2? '':'progress'; })
                                    .append('div')
                                    .attr('class','progress-bar progress-bar-striped')
                                    .attr('role','progressbar')
                                    .attr('aria-valuenow','70')
                                    .attr('aria-valuemin','0')
                                    .attr('aria-valuemax','100')
                                    .style('background-color',function(d,i) { return i!=2? '':heading_colors[parseInt(d.split(':')[0])]; })
                                    .style('width',function(d,i) { return i!=2? '0%':d.split(':')[1]+'%'; });
                                                 
            d3.selectAll('.removed_data').remove();
    
         map_data.forEach(function(o) {
          o.polled_votes = parseInt(o.polled_votes);
          o.votes = parseInt(o.VOTES);
          o.YEAR = parseInt(o.YEAR);
          o.rank = parseInt(o['#']);
          o.ac = parseInt(o.AC_NO);
          o.vote_percent = parseFloat(o.vote_percent);
          });

if (acct_no != undefined){

    data_set = map_data.filter(function(d){return (d.YEAR==year_detail)& (d.AC_NO==acct_no)& (d.rank<12) })

    deposit_data_set = data_set.filter(function(d){return (d.VOTES>=d.polled_votes/6) })
            
    var margin = {top: 10, right: 30, bottom: 15, left: 60},
                horz_width = 960 - margin.left - margin.right,
                horz_height = 320 - margin.top - margin.bottom;
    
    var horizontal_bar_svg = d3.select(".horizontal_bar").append("svg")
                .attr("width", "100%")
                .attr("data-height","0.54")
                .attr("viewBox","0 0 "+(horz_width)+" "+(horz_height))
                .attr("xmlns", 'http://www.w3.org/2000/svg')
                .attr("xlink", 'http://www.w3.org/1999/xlink')
                .attr("version", '1.1')
                .append("g")
                .attr("transform", "translate(" + margin.left + "," + margin.top/4 + ")");
    
function addThousandsSeparator(t){var a=t;if(parseFloat(t)){t=new String(t);var e=t.split(".");e[0]=e[0].split("").reverse().join("").replace(/(\d{3})(?!$)/g,"$1,").split("").reverse().join(""),a=e.join(".")}return a}

    // set the ranges
   var y = d3.scaleBand()
           .range([horz_height - margin.top - margin.bottom, 0])
           .padding(0.2);

   var x = d3.scaleLinear()
           .range([0, horz_width-(margin.left*5/2)]);
           
    var constituency_name = '';    
    data_set.forEach(function(o) {    
        constituency_name = o.AC_NAME;
        o.PARTY_ID = o['#']+'. '+o.PARTY
      });
   
    data_set = data_set.sort(function(a, b){ return d3.descending(a.rank, b.rank); })
        
    var layer = horizontal_bar_svg.selectAll(".layer")
        .data(data_set)
        .enter().append("g")
        .attr("class", "layer");
        
        d3.selectAll(".tick > text")
            .style("font-size", "13px")    
     
        $(".constituency_tag").append("( "+constituency_name+" )");
    
        x.domain([0, d3.max(data_set, function(d){ return d.votes; })])
        y.domain(data_set.map(function(d) { return d.PARTY_ID; }));

    deposit_party_id = deposit_data_set[deposit_data_set.length-1]['PARTY_ID'];

    horizontal_bar_svg.append("g")
            .attr("class", "guide_deposit")
        .append("line")
            .attr('stroke-width',1)
            .style("stroke", "rgb(99, 99, 99)")
            .attr("x1", x(0))
            .attr("x2", x(d3.max(data_set, function(d){ return d.votes; })))
            .attr("y1", y(deposit_party_id) + (y.bandwidth()*1.1))
            .attr("y2", y(deposit_party_id) + (y.bandwidth()*1.1));
            
     horizontal_bar_svg.append("text")
        .attr("x",x(d3.max(data_set, function(d){ return d.votes; })))
        .attr("y", y(deposit_party_id) + (y.bandwidth()*1.1)+13)
        .style("fill", "rgb(99, 99, 99)")
        .style("font-size","13px")
        .style("text-anchor", "end")
        .attr("data-title","Guide line: 1/6 of polled votes<br/> (16.66 % approx)")
        .text("Deposit Threshold");

    // append the rectangles for the bar chart
     horizontal_bar_svg.selectAll("rect")
        .data(data_set)
      .enter().append("rect")
        //.attr("x", function(d) { return x(d.sales); })
        .style("fill", function(d,i) { return color_map[d.PARTY]; })
        .attr("width", function(d) {return x(d.votes); } )
        .attr("y", function(d) { return y(d.PARTY_ID); })
        .attr("data-title",function(d) { return 'Constituency : '+d.AC_NAME+' <br/> Candidate : '+d.NAME+' <br/> party : '+d.PARTY+' <br/> percentage : '+(parseFloat((d.votes/d.polled_votes))*100).toFixed(2)+'%  <br/> votes : '+addThousandsSeparator(d.votes)+'<br/> polled votes : '+addThousandsSeparator(d.polled_votes)+'' ;})
        .attr("height", y.bandwidth());

     horizontal_bar_svg.selectAll("text")
        .data(data_set)
      .enter().append("text")
        .attr("y", function(d) { return y(d.PARTY_ID)+(y.bandwidth()*4/5); })
        .style("text-anchor", "start")
        .attr("fill", "#444")
        .style("font-size","13px")
        .text(function(d) { return addThousandsSeparator(d.votes)+' votes'; })
        .attr("x", function(d) { return  x(d.votes)+3; });

        // add the x Axis
        horizontal_bar_svg.append("g")
           .attr("transform", "translate(0," + (horz_height- margin.top - margin.bottom) + ")")
           .call(d3.axisBottom(x));

        // add the y Axis
        horizontal_bar_svg.append("g")
           .call(d3.axisLeft(y));

        var twoPi = 2 * Math.PI;
        
        var sub_width = parseInt(d3.select('.progress_bar').style('width'), 10);
    
        var margin = {top: 20, right: 20, bottom: 20, left: 20},
                progress_width = sub_width - margin.left - margin.right,
                progress_height = 250 - margin.top - margin.bottom;
    
        var progress_bar_svg = d3.select(".progress_bar").append("svg")
                .attr("width", "100%")
                .attr("data-height","0.54")
                .attr("viewBox","0 0 "+(progress_width)+" "+(progress_height))
                .attr("xmlns", 'http://www.w3.org/2000/svg')
                .attr("xlink", 'http://www.w3.org/1999/xlink')
                .attr("version", '1.1')
                .append("g")
                .attr("transform", "translate(" + progress_width/2 + "," + progress_height*7/12+ ")");
    
        value_data = data_set.filter(function(d){return (d.rank==1) })
        
        value = value_data[0]['votes']/parseFloat(value_data[0]['polled_votes']);
        fontSize = 16;
        
        var arcs_val = d3.arc()
                    .innerRadius(d3.min([progress_width,progress_height])*.27)
                    .outerRadius(d3.min([progress_width,progress_height])*.4)
                    .startAngle(0);

        var background = progress_bar_svg
                        .append("path")
                        .datum({ endAngle : twoPi})
                        .style("fill", "#ddd")
                        .attr("d", arcs_val);

        var foreground = progress_bar_svg
                            .append("path")
                            .datum({ endAngle : 0})
                            .style("fill", color_map[value_data[0]['PARTY']])
                            .attr("class", "foreground")
                            .attr("d", arcs_val);

        var text = progress_bar_svg.append("text")
                    .attr("text-anchor", "middle")
                    .attr("dy", ".35em")
                    .style("fill", "rgb(99, 99, 99)")
                    .attr("font-size", fontSize)
                    .text((value*100).toFixed(2) + "%");
                    
        var text = progress_bar_svg.append("text")
                    .attr("text-anchor", "middle")
                    .attr("y", -100)
                    .attr("dy", ".35em")
                    .style("fill", "rgb(99, 99, 99)")
                    .attr("font-size", fontSize)
                    .text('Winning Party ('+value_data[0]['PARTY']+')');

            function arcTween(newAngle) {
              return function(d) {
               var interpolate = d3.interpolate(d.endAngle, newAngle);
               return function(t) {
                 d.endAngle = interpolate(t);
                 return arcs_val(d);
               };
              };
            }

            d3.interval(function() {
              foreground.transition()
                 .duration(750)
                 .attrTween("d", arcTween(twoPi * value));
            }, 1500);

        }

var sub_width = parseInt(d3.select('.party_performance_trend_svg').style('width'), 10)

var margin = {top: 20, right: 20, bottom: 20, left: 20},
        width = sub_width - margin.left - margin.right,
        height = 460 - margin.top - margin.bottom;
    
    var party_performance_trend_svg = d3.select(".party_performance_trend_svg").append("svg")
            .attr("width", "100%")
            .attr("data-height","0.54")
            .attr("viewBox","0 0 "+(width + margin.left + margin.right)+" "+(height + margin.top + margin.bottom))
            .attr("xmlns", 'http://www.w3.org/2000/svg')
            .attr("xlink", 'http://www.w3.org/1999/xlink')
            .attr("version", '1.1')
            .append("g")
            .attr("transform", "translate(" + (margin.left+(width/2))+ "," + (margin.top+(height/2)) + ")");
        
    contest_data_csv = full_data.filter(function(d){return (d.YEAR==year_detail)});
    
    var contest_data_count = d3.nest()
              .key(function(d) { return d.PARTY; })
              .rollup(function(v) { return v.length; })
              .entries(contest_data_csv);

     winning_data_csv = contest_data_csv.filter(function(d){return (d.rank==1)});
    
        var winning_data_count = d3.nest()
              .key(function(d) { return d.PARTY; })
              .rollup(function(v) { return v.length; })
              .entries(winning_data_csv);

        winning_data_count.forEach(function(o) {
            o.weight = o.value
            o.width  = +o.weight;
            contest_data_count.forEach(function(d) {
                if(d.key==o.key){
                    o.contest = d.value
                }

            });
            o.score  = (o.value*100/o.contest).toFixed(2);            
        });
        
        radius = Math.min(width, height) / 2,
        innerRadius = 0.3 * radius;

    var pie = d3.pie()
        .sort(null)
        .value(function(d) { return d.width; });

        var arc = d3.arc()
          .innerRadius(innerRadius)
          .outerRadius(function (d) { 
            return (radius - innerRadius) * (d.data.score / 100.0) + innerRadius; 
          });

        var outlineArc = d3.arc()
                .innerRadius(innerRadius)
                .outerRadius(radius);

  var winning_data_count = winning_data_count.sort(function(a, b) { return b.value - a.value; })

  var paths = party_performance_trend_svg.selectAll(".solidArc")
      .data(pie(winning_data_count))
    .enter().append("path")
      .attr("fill", function(d) { return color_map[d.data.key]!=undefined? color_map[d.data.key] : '#363636'; })
      .attr("class", "solidArc")
      .attr("stroke", function(d) { return color_map[d.data.key]!=undefined? d3.rgb(color_map[d.data.key]).darker() : d3.rgb('#363636').darker() })
      .attr("d", arc)
      .attr('class',function (d) { return 'party_filters '+d.data.key+'s' })
      .attr("data-title",function(d) { return  'party : '+d.data.key+' <br/> contested seats : '+d.data.contest+' <br/> seats won : '+d.data.value+' <br/> convertion percentage : '+d.data.score ;});

  var outerPath = party_performance_trend_svg.selectAll(".outlineArc")
      .data(pie(winning_data_count))
    .enter().append("path")
      .attr("fill", "none")
      .attr("stroke", "gray")
      .attr("class", "outlineArc")
      .attr("d", outlineArc);  
    
  var max_value = d3.max(winning_data_count, function(d) { return d.values; });
  winning_party = winning_data_count.filter(function(d){return (d.values==max_value)});
  winning_party = winning_party.sort(function(a, b) { return b.value - a.value; })
   
  party_performance_trend_svg.append("text")
    .attr("class", "aster-score")
    .attr("dy", ".35em")
    .attr("text-anchor", "middle")
    .style("fill", "rgb(99, 99, 99)")
    .attr("font-size", 22)    // text-align: right
    .text(winning_party[0]['key']);
    
    $("path").tooltip({container: '.party_performance_trend_svg', html: true, placement:'top'});

var margin = {top: 50, right: 20, bottom: 20, left: 20},
    sankey_width = 1200 - margin.left - margin.right,
    sankey_height = 600 - margin.top - margin.bottom;

var formatNumber = d3.format(",.0f"), 
    format = function(d) { return formatNumber(d); };
    //color = d3.scale.category20b();
    
// append the svg canvas to the page
var svg = d3.select(".sankey_chart").append("svg")
    .attr("width", '100%')
    .attr("data-height", '0.5678')
    .attr("viewBox",'0 0 1200 600')
  .append("g")
    .attr("transform", 
          "translate(" + margin.left + "," + margin.top + ")");

// Set the sankey diagram properties
var sankey = d3.sankey()
    .nodeWidth(100)
    .nodePadding(3)
    .size([sankey_width, sankey_height]);

var paths = sankey.link();

year_data_set_2017.forEach(function (d) {
        d.source_year =d['O_PARTY']
        d.target_year =d['PARTY'] 
        d.combined_year =d.source_year+'_'+d.target_year 
        });

        year_data_set_2017 = year_data_set_2017.filter(function(d){return (d.source_year!='') & (d.target_year!='') })
        
        var data_Count = d3.nest()
              .key(function(d) { return d.combined_year; })
              .rollup(function(v) { return v.length; })
              .entries(year_data_set_2017);
        
  graph = {"nodes" : [], "links" : []};
    
    name_list = []
   data_Count.forEach(function (d) {
      graph.nodes.push({ "name": d.key.split("_")[0], "color": color_map[d.key.split("_")[0]] });
      graph.nodes.push({ "name": '_'+d.key.split("_")[1], "color": color_map[d.key.split("_")[1]] });

      graph.links.push({ "source": d.key.split("_")[0],
                         "target": '_'+d.key.split("_")[1],
                         "source_color": color_map[d.key.split("_")[0]],
                         "target_color": color_map[d.key.split("_")[1]],
                         "value": d.value });
     });
     
    // return only the distinct / unique nodes
    graph.nodes_all = _.uniq(graph.nodes, function(item, key, a) { return item['name']; });
    graph.nodes =[]
   
    graph.nodes_all.forEach(function (d, i) {       
       graph.nodes.push(d.name)
    });
     
     // loop through each link replacing the text with its index from node
     graph.links.forEach(function (d, i) {
       graph.links[i].source = graph.nodes.indexOf(graph.links[i].source);
       graph.links[i].target = graph.nodes.indexOf(graph.links[i].target);
     });

     //now loop through each nodes to make nodes an array of objects
     // rather than an array of strings
     graph.nodes.forEach(function (d, i) {       
       graph.nodes[i] = { "name": d };
     });

  sankey
    .nodes(graph.nodes)
    .links(graph.links)
    .layout(32);

 svg.selectAll(".head")
      .data(['2012','2017'])
    .enter().append("text")
      .attr("y", -4)
      .attr("font-size",21)
      .attr("x", function(d,p) { return p < 1 ?  50 : 1110 ; })
      .attr("fill", function(d,p) { return p > 0 ? "rgb(99, 99, 99)" : "rgb(99, 99, 99)"; })
      .attr("text-anchor", function(d,p) { return p <  1 ? 'middle' : 'middle'; })
      .text(function(d) { return 'year('+d+')'; });

// add in the links
  var link = svg.append("g").selectAll(".link")
      .data(graph.links)
    .enter().append("path")
      .attr("class", "link")
      .attr("d", paths)
      .style("stroke-width", function(d) { return Math.max(1, d.dy); })
      .style("fill", function(d) { return d.target_color; })
      .style("stroke", function(d) { return d.target_color; })      
      .sort(function(a, b) { return b.dy - a.dy; })
      .attr("data-title",function(d) { return d.source.name == d.target.name.replace('_','') ?  d.source.name+' has retained '+format(d.value)+' seats'  : d.target.name.replace('_','') + " has got "+ format(d.value)+" seats from "+ d.source.name; });

// add in the nodes
  var node = svg.append("g").selectAll(".node")
      .data(graph.nodes)
    .enter().append("g")
      .attr("class", "node")
      .attr("transform", function(d) { 
          return "translate(" + d.x + "," + d.y + ")"; })
    .call(d3.drag()
      .subject(function(d) {
            return d;
          })
          .on("start", function() {
            this.parentNode.appendChild(this);
          })
      .on("drag", dragmove));
  
// add the rectangles for the nodes
  node.append("rect")
      .attr("height", function(d) { return d.dy; })
      .attr("width", sankey.nodeWidth())
     .style("fill", function(d) { return color_map[d.name.replace('_','')]; })
      .style("stroke", function(d) { return d3.rgb(color_map[d.name.replace('_','')]).darker(2); })
       .attr('data-title',function(d) { return d.name.replace('_','') + "\n" + format(d.value)+' Seats'; });
    
  node
    .append("text")
    .attr("y", function(d) { return (d.dy/2)-1; })
    .attr("x", sankey.nodeWidth()/2)
    .attr("text-anchor", "middle")
    .style("font-size", "15px")
    .attr("data-title", function(d) { return d.name.replace('_','')+' : '+format(d.value)+' seats'; })
    .style("fill", function(d) { return (parseInt(color_map[d.name.replace('_','')].replace('#', ''), 16) > 0xffffff / 2) ? '#000' : '#fff';})
    .text(function(d) { return d.dy>29 ?d.value:' '; });

  node
    .append("text")
    .attr("y", function(d) { return (d.dy/2)+12; })
    .attr("x", sankey.nodeWidth()/2)
    .attr("text-anchor", "middle")
    .style("font-size", "12px")
    .attr("data-title", function(d) { return d.name.replace('_','')+' : '+format(d.value)+' seats'; })
    .style("fill", function(d) { return (parseInt(color_map[d.name.replace('_','')].replace('#', ''), 16) > 0xffffff / 2) ? '#000' : '#fff';})
    .text(function(d) { return d.dy>29 ?d.name.replace('_',''):' '; });

  $("text").tooltip({container: '.sankey_chart', html: true, placement:'top'});
  $("rect").tooltip({container: '.sankey_chart', html: true, placement:'top'});
  $("path").tooltip({container: '.sankey_chart', html: true, placement:'top'});

// add in the title for the nodes
  node.append("text")
      .attr("x", -6)
      .attr("y", function(d) { return d.dy / 2; })
      .attr("dy", ".35em")
      .attr("text-anchor", "end")
      .attr("transform", null)
      .text(function(d) { return d.name.replace('_',''); })
    .filter(function(d) { return d.x < width / 2; })
      .attr("x", 6 + sankey.nodeWidth())
      .attr("text-anchor", "start");

// the function for moving the nodes
  function dragmove(d) {
    d3.select(this).attr("transform", 
        "translate(" + d.x + "," + (
                d.y = Math.max(0, Math.min(height - d.dy, d3.event.y))
            ) + ")");
    sankey.relayout();
    link.attr("d", paths);
  }
      });

$('.party_filter').click( function(n) {

 var year_2017 = [];
      $('#year_2017 :selected').each(function(i, selected){
          year_2017[i] = $(selected).val();
      });

 var year_2012 = [];
        $('#year_2012 :selected').each(function(i, selected){
            year_2012[i] = $(selected).val();
        });
   d3.csv("Uttarakhand.csv", function(map_data) { 
  
    map_data.forEach(function(o) {
          o.polled_votes = parseInt(o.polled_votes);
          o.votes = parseInt(o.VOTES);
          o.YEAR = parseInt(o.YEAR);
          o.rank = parseInt(o['#']);
          o.ac = parseInt(o.AC_NO);
          o.vote_percent = parseFloat(o.vote_percent);
          });
  d3.select('.geo_map').select('svg').remove();
  map_filter(year_2012,year_2017,map_data);
  
  });
});

    </script>
<script>var sharebutton_is_horizontal = false; document.write('<script src="//cdn.front.to/libs/share7.js"></scr' + 'ipt>'); document.write("<div style='display: none'>");</script><a href="http://sharebutton.org/">share this button</a><script>document.write("</div>");</script>
<div class="container footer_details">
The data was compiled by <a target="_blank" href="https://in.linkedin.com/in/sushanthece"> Sushanth </a> using data from <a target="_blank" href="http://eci.nic.in/eci_main1/ElectionStatistics.aspx"> eci.nic.in </a> and  <a target="_blank" href="http://eciresults.nic.in/"> eciresults</a>. The visualisation was designed and built by <a target="_blank" href="https://in.linkedin.com/in/sushanthece"> Sushanth</a>.</div>

  </body>
</html>

