<html><head>
  <meta http-equiv="X-UA-COMPATIBLE" content="IE=EmulateIE9">
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
  <meta name="author" content="Sushanth">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Undecided voters hold key in 2016 West Bengal Assembly elections 'A visual guide to the check out the history of West Bengal Assembly elections, from 1951 until 2011', Which of the Dravidian duos might get the stronghold in West Bengal? What will be the pre-poll alliances? For the state march is a crucial month to predict next political face.">
  <meta name="news_keywords" content="West Bengal polls, West Bengal assembly polls, jayalalithaa, chennai floods, West Bengal elections, West Bengal assembly elections, chennai news, West Bengal news, india news">
  <meta name="keywords" content="West Bengal polls, West Bengal assembly polls, jayalalithaa, chennai floods, West Bengal elections, West Bengal assembly elections, chennai news, West Bengal news, india news">
  <link href="css/bootstrap.css" rel="stylesheet">    
  <link href="css/basic.css" rel="stylesheet">
  <link href="css/feature.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" media="screen" href="http://fortawesome.github.io/Font-Awesome/assets/font-awesome/css/font-awesome.css">
  <link rel="stylesheet" type="text/css" media="screen" href="http://netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css">
  <link href="css/custom-styles.css" rel="stylesheet">
  <link href="css/jquery-ui.css" rel="stylesheet">
  <link href="//cdn.datatables.net/1.10.9/css/jquery.dataTables.min.css" rel="stylesheet" />
  <script type="text/javascript" src="js/jquery.min.js"></script>  
  <script type="text/javascript" src="js/d3.js"></script>
  <script type="text/javascript" src="js/sankey.js"></script>
  <script type="text/javascript" src="/./javascripts/google-analyitcs.js"></script>  
  <script type="text/javascript" src="js/bootstrap.min.js"></script>    
  <script type="text/javascript" src="js/jquery-ui-1.10.3.min.js" ></script>
  <script type="text/javascript" src="https://cdn.datatables.net/1.10.10/js/jquery.dataTables.min.js"></script>  
  <meta property="og:title"  content="ASSEMBLY ELECTIONS 1951 - 2011 (West Bengal)" /> 
  <meta property="og:url"   content="http://data-analytics.github.io/Election_Data/west_bengal.html" /> 
  <meta property="og:description" content="Undecided voters hold key in 2016 West Bengal Assembly elections 'A visual guide to the check out the history of West Bengal Assembly elections, from 1951 until 2011'" /> 
  <meta property="og:image" content="/./images/West-Bangal-Elections-2016.jpg" /> 
  <html itemscope itemtype="http://schema.org/Blog">
  <meta itemprop="description" content="Undecided voters hold key in 2016 West Bengal Assembly elections 'A visual guide to the check out the history of West Bengal Assembly elections, from 1951 until 2011'">
  <meta itemprop="name" content="ASSEMBLY ELECTIONS 1951 - 2011 (West Bengal)">
  <meta itemprop="image" content="/./images/West-Bangal-Elections-2016.jpg">
  <title>Assembly Elections 1951 - 2011 (West Bengal)</title>
</head>
<body>
  	<div class="container-fluid header-style">
		<div class="container">
			<div class="row">
				<div class="col-md-12 header-logo">
					
					<p class="heading-part"><a class="fa fa-home fa-2" id="home" href="/./"></a>Undecided voters hold key in 2016 West Bengal Assembly elections 'A visual guide to the check out the history of West Bengal Assembly elections from 1951 until 2011</p>
					<p class="synopsis">Who will get the stronghold in West Bengal? What will be the pre-poll alliances? For the state march is a crucial month to predict next political face.</p>
				
				<p align="center"><span class='st_facebook_hcount' displayText='Facebook'></span>
				<span class='st_twitter_hcount' displayText='Tweet'></span>
				<span class='st_linkedin_hcount' displayText='LinkedIn'></span>
				<span class='st_googleplus_hcount' displayText='Google'></span>
				<span class='st_email_hcount' displayText='Email'></span></p>
				
				</div>
				
			</div>
		</div>
	</div>
		
    <div class="container-fluid">
	<div class="container">
			<div class="row">
			<div class="col-md-12 panel panel-default">
			<div class="row">
				<div class="col-md-12 panel-heading1">
					<h2>Assembly Elections 1951 - 2011 (West Bengal)</h2>
				</div>	
           </div>
           <div class="row">		   
				<div class=" col-md-12 panel-body">
					 <div class="stacked_bar">  
					   <svg data-height="0.54" viewBox="0 0 1200 25" style="width: 100%;" xmlns="http://www.w3.org/2000/svg" xlink:xlink="http://www.w3.org/1999/xlink" version="1.1">
						  <g class="headers" transform="translate(80,0)">
							  <rect class="party-legend" data-party="BAC" data-highlight="[data-party=BAC]" data-toggle="highlight" x="0.0" width="67.1428571429" height="20" fill="#A99888"></rect>
							  <text x="33.5714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">BAC</text>
							
							  <rect class="party-legend" data-party="AITC" data-highlight="[data-party=AITC]" data-toggle="highlight" x="67.1428571429" width="67.1428571429" height="20" fill="#4A9F88"></rect>
							  <text x="100.714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#000">AITC</text>
							
							  <rect class="party-legend" data-party="INC" data-highlight="[data-party=INC]" data-toggle="highlight" x="134.285714286" width="67.1428571429" height="20" fill="#2ecc71"></rect>
							  <text x="167.857142857" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">INC</text>
							
							  <rect class="party-legend" data-party="CPM" data-highlight="[data-party=CPM]" data-toggle="highlight" x="201.428571429" width="67.1428571429" height="20" fill="#ff5757"></rect>
							  <text x="235.0" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">CPM</text>
							
							  <rect class="party-legend" data-party="FBL" data-highlight="[data-party=FBL]" data-toggle="highlight" x="268.571428571" width="67.1428571429" height="20" fill="#014BC6"></rect>
							  <text x="302.142857143" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">FBL</text>

							  <rect class="party-legend" data-party="OTH" data-highlight="[data-party=OTH]" data-toggle="highlight" x="335.714285714" width="67.1428571429" height="20" fill="#222"></rect>
							  <text x="369.285714286" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">Others</text>
							
							  <rect class="party-legend" data-party="CPI" data-highlight="[data-party=CPI]" data-toggle="highlight" x="402.857142857" width="67.1428571429" height="20" fill="#ff5757"></rect>
							  <text x="436.428571429" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">CPI</text>
							
							  <rect class="party-legend" data-party="RSP" data-highlight="[data-party=RSP]" data-toggle="highlight" x="470.0" width="67.1428571429" height="20" fill="#F8F907"></rect>
							  <text x="503.571428571" y="10.0" text-anchor="middle" dy=".35em" fill="#000">RSP</text>
							
							  <rect class="party-legend" data-party="AIFB" data-highlight="[data-party=AIFB]" data-toggle="highlight" x="537.142857143" width="67.1428571429" height="20" fill="#FFAD01"></rect>
							  <text x="570.714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#000">AIFB</text>
							
							  <rect class="party-legend" data-party="NCO" data-highlight="[data-party=NCO]" data-toggle="highlight" x="604.285714286" width="67.1428571429" height="20" fill="#1f77b4"></rect>
							  <text x="637.857142857" y="10.0" text-anchor="middle" dy=".35em" fill="#000">NCO</text>
							
							  <rect class="party-legend" data-party="JNP" data-highlight="[data-party=JNP]" data-toggle="highlight" x="671.428571429" width="67.1428571429" height="20" fill="#9A9E56"></rect>
							  <text x="705.0" y="10.0" text-anchor="middle" dy=".35em" fill="#000">JNP</text>
							
							  <rect class="party-legend" data-party="PSP" data-highlight="[data-party=PSP]" data-toggle="highlight" x="738.571428571" width="67.1428571429" height="20" fill="#FFD380"></rect>
							  <text x="772.142857143" y="10.0" text-anchor="middle" dy=".35em" fill="#000">PSP</text>
							
							  <rect class="party-legend" data-party="IND" data-highlight="[data-party=IND]" data-toggle="highlight" x="805.714285714" width="67.1428571429" height="20" fill="#bdc3c7"></rect>
							  <text x="839.285714286" y="10.0" text-anchor="middle" dy=".35em" fill="#000">IND</text>
							
							  <rect class="party-legend" data-party="BJP" data-highlight="[data-party=BJP]" data-toggle="highlight" x="872.857142857" width="67.1428571429" height="20" fill="#ff7f0e"></rect>
							  <text x="906.428571429" y="10.0" text-anchor="middle" dy=".35em" fill="#000">BJP</text>
							  
							</svg>
						  </g>	
						  </div>
				</div>
			</div>
			</div>
			</div>
	</div>
	</div>
	
    <div id="individual">
    <div class="container-fluid">
	<div class="container">
			<div class="row">
			<div class="col-md-12 panel panel-default">
			<div class="row">
				<div class="col-md-12 panel-heading1">
					<h2>Assembly Elections View By Individual Elections for <i class="year_tag"></i></h2>
				</div>	
           </div>
		   
           <div class="row">		   
				<div class=" col-md-12 panel-body">
			
					  <div class="dropdown header_year">
						<button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Select Year</button>
							<ul class="dropdown-menu" role="menu">

									<li data-year="2011" id="2011"><a href="?year=2011#individual">2011 results</a></li>
									<li data-year="2006" id="2006"><a href="?year=2006#individual">2006 results</a></li>
									<li data-year="2001" id="2001"><a href="?year=2001#individual">2001 results</a></li>
									<li data-year="1996" id="1996"><a href="?year=1996#individual">1996 results</a></li>							
									<li data-year="1991" id="1991"><a href="?year=1991#individual">1991 results</a></li>
									<li data-year="1987" id="1987"><a href="?year=1987#individual">1987 results</a></li>
									<li data-year="1982" id="1982"><a href="?year=1982#individual">1982 results</a></li>
									<li data-year="1977" id="1977"><a href="?year=1977#individual">1977 results</a></li>
									<li data-year="1972" id="1972"><a href="?year=1972#individual">1972 results</a></li>
									<li data-year="1971" id="1971"><a href="?year=1971#individual">1971 results</a></li>
									<li data-year="1969" id="1969"><a href="?year=1969#individual">1969 results</a></li>	
									<li data-year="1967" id="1967"><a href="?year=1967#individual">1967 results</a></li>
									<li data-year="1962" id="1962"><a href="?year=1962#individual">1962 results</a></li>
									<li data-year="1957" id="1957"><a href="?year=1957#individual">1957 results</a></li>
									<li data-year="1951" id="1951"><a href="?year=1951#individual">1951 results</a></li>	
									
							  </ul>
					  </div>
				      	<p class="form-inline header_form" >
						<label align="left" >Search:</label>
						<input type="text" class="search" placeholder="eg: silugiri">
					   </p>
						
					   
					 <div class="chart">  
					 
					 
					   
					     <svg data-height="0.54" viewBox="0 0 1200 25" style="width: 100%;" xmlns="http://www.w3.org/2000/svg" xlink:xlink="http://www.w3.org/1999/xlink" version="1.1">
						  <g class="headers" transform="translate(80,0)">
							  <rect class="party-legend" data-party="BAC" data-highlight="[data-party=BAC]" data-toggle="highlight" x="0.0" width="67.1428571429" height="20" fill="#A99888"></rect>
							  <text x="33.5714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">BAC</text>
							
							  <rect class="party-legend" data-party="AITC" data-highlight="[data-party=AITC]" data-toggle="highlight" x="67.1428571429" width="67.1428571429" height="20" fill="#4A9F88"></rect>
							  <text x="100.714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#000">AITC</text>
							
							  <rect class="party-legend" data-party="INC" data-highlight="[data-party=INC]" data-toggle="highlight" x="134.285714286" width="67.1428571429" height="20" fill="#2ecc71"></rect>
							  <text x="167.857142857" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">INC</text>
							
							  <rect class="party-legend" data-party="CPM" data-highlight="[data-party=CPM]" data-toggle="highlight" x="201.428571429" width="67.1428571429" height="20" fill="#ff5757"></rect>
							  <text x="235.0" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">CPM</text>
							
							  <rect class="party-legend" data-party="FBL" data-highlight="[data-party=FBL]" data-toggle="highlight" x="268.571428571" width="67.1428571429" height="20" fill="#014BC6"></rect>
							  <text x="302.142857143" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">FBL</text>

							  <rect class="party-legend" data-party="OTH" data-highlight="[data-party=OTH]" data-toggle="highlight" x="335.714285714" width="67.1428571429" height="20" fill="#222"></rect>
							  <text x="369.285714286" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">Others</text>
							
							  <rect class="party-legend" data-party="CPI" data-highlight="[data-party=CPI]" data-toggle="highlight" x="402.857142857" width="67.1428571429" height="20" fill="#ff5757"></rect>
							  <text x="436.428571429" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">CPI</text>
							
							  <rect class="party-legend" data-party="RSP" data-highlight="[data-party=RSP]" data-toggle="highlight" x="470.0" width="67.1428571429" height="20" fill="#F8F907"></rect>
							  <text x="503.571428571" y="10.0" text-anchor="middle" dy=".35em" fill="#000">RSP</text>
							
							  <rect class="party-legend" data-party="AIFB" data-highlight="[data-party=AIFB]" data-toggle="highlight" x="537.142857143" width="67.1428571429" height="20" fill="#FFAD01"></rect>
							  <text x="570.714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#000">AIFB</text>
							
							  <rect class="party-legend" data-party="NCO" data-highlight="[data-party=NCO]" data-toggle="highlight" x="604.285714286" width="67.1428571429" height="20" fill="#1f77b4"></rect>
							  <text x="637.857142857" y="10.0" text-anchor="middle" dy=".35em" fill="#000">NCO</text>
							
							  <rect class="party-legend" data-party="JNP" data-highlight="[data-party=JNP]" data-toggle="highlight" x="671.428571429" width="67.1428571429" height="20" fill="#9A9E56"></rect>
							  <text x="705.0" y="10.0" text-anchor="middle" dy=".35em" fill="#000">JNP</text>
							
							  <rect class="party-legend" data-party="PSP" data-highlight="[data-party=PSP]" data-toggle="highlight" x="738.571428571" width="67.1428571429" height="20" fill="#FFD380"></rect>
							  <text x="772.142857143" y="10.0" text-anchor="middle" dy=".35em" fill="#000">PSP</text>
							
							  <rect class="party-legend" data-party="IND" data-highlight="[data-party=IND]" data-toggle="highlight" x="805.714285714" width="67.1428571429" height="20" fill="#bdc3c7"></rect>
							  <text x="839.285714286" y="10.0" text-anchor="middle" dy=".35em" fill="#000">IND</text>
							
							  <rect class="party-legend" data-party="BJP" data-highlight="[data-party=BJP]" data-toggle="highlight" x="872.857142857" width="67.1428571429" height="20" fill="#ff7f0e"></rect>
							  <text x="906.428571429" y="10.0" text-anchor="middle" dy=".35em" fill="#000">BJP</text>
							  						  
							</svg>
						  </g>
						<div class="tree_map"></div>
					    </div>
				     </div>
				</div>
			</div>
			</div>
			</div>
	</div>
	</div>
	
	<div id="perConstituency">
	
	<div class="container-fluid detail_display">
	<div class="container">
			<div class="row">
			<div class="col-md-12 panel panel-default">
			<div class="row">
				<div class="col-md-12 panel-heading1">
					<h2 class="headers_constituency">Assembly Elections year <i class="year_tag"></i> for Constituency<i class="constituency_tag"></i></h2>
				</div>	
           </div>
           <div class="row">		   
				<div class=" col-md-12 panel-body">
					 <div class="chart">  
					     <svg data-height="0.54" viewBox="0 0 1200 25" style="width: 100%;" xmlns="http://www.w3.org/2000/svg" xlink:xlink="http://www.w3.org/1999/xlink" version="1.1">
						  <g class="headers" transform="translate(80,0)">
							  <rect class="party-legend" data-party="BAC" data-highlight="[data-party=BAC]" data-toggle="highlight" x="0.0" width="67.1428571429" height="20" fill="#A99888"></rect>
							  <text x="33.5714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">BAC</text>
							
							  <rect class="party-legend" data-party="AITC" data-highlight="[data-party=AITC]" data-toggle="highlight" x="67.1428571429" width="67.1428571429" height="20" fill="#4A9F88"></rect>
							  <text x="100.714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#000">AITC</text>
							
							  <rect class="party-legend" data-party="INC" data-highlight="[data-party=INC]" data-toggle="highlight" x="134.285714286" width="67.1428571429" height="20" fill="#2ecc71"></rect>
							  <text x="167.857142857" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">INC</text>
							
							  <rect class="party-legend" data-party="CPM" data-highlight="[data-party=CPM]" data-toggle="highlight" x="201.428571429" width="67.1428571429" height="20" fill="#ff5757"></rect>
							  <text x="235.0" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">CPM</text>
							
							  <rect class="party-legend" data-party="FBL" data-highlight="[data-party=FBL]" data-toggle="highlight" x="268.571428571" width="67.1428571429" height="20" fill="#014BC6"></rect>
							  <text x="302.142857143" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">FBL</text>

							  <rect class="party-legend" data-party="OTH" data-highlight="[data-party=OTH]" data-toggle="highlight" x="335.714285714" width="67.1428571429" height="20" fill="#222"></rect>
							  <text x="369.285714286" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">Others</text>
							
							  <rect class="party-legend" data-party="CPI" data-highlight="[data-party=CPI]" data-toggle="highlight" x="402.857142857" width="67.1428571429" height="20" fill="#ff5757"></rect>
							  <text x="436.428571429" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">CPI</text>
							
							  <rect class="party-legend" data-party="RSP" data-highlight="[data-party=RSP]" data-toggle="highlight" x="470.0" width="67.1428571429" height="20" fill="#F8F907"></rect>
							  <text x="503.571428571" y="10.0" text-anchor="middle" dy=".35em" fill="#000">RSP</text>
							
							  <rect class="party-legend" data-party="AIFB" data-highlight="[data-party=AIFB]" data-toggle="highlight" x="537.142857143" width="67.1428571429" height="20" fill="#FFAD01"></rect>
							  <text x="570.714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#000">AIFB</text>
							
							  <rect class="party-legend" data-party="NCO" data-highlight="[data-party=NCO]" data-toggle="highlight" x="604.285714286" width="67.1428571429" height="20" fill="#1f77b4"></rect>
							  <text x="637.857142857" y="10.0" text-anchor="middle" dy=".35em" fill="#000">NCO</text>
							
							  <rect class="party-legend" data-party="JNP" data-highlight="[data-party=JNP]" data-toggle="highlight" x="671.428571429" width="67.1428571429" height="20" fill="#9A9E56"></rect>
							  <text x="705.0" y="10.0" text-anchor="middle" dy=".35em" fill="#000">JNP</text>
							
							  <rect class="party-legend" data-party="PSP" data-highlight="[data-party=PSP]" data-toggle="highlight" x="738.571428571" width="67.1428571429" height="20" fill="#FFD380"></rect>
							  <text x="772.142857143" y="10.0" text-anchor="middle" dy=".35em" fill="#000">PSP</text>
							
							  <rect class="party-legend" data-party="IND" data-highlight="[data-party=IND]" data-toggle="highlight" x="805.714285714" width="67.1428571429" height="20" fill="#bdc3c7"></rect>
							  <text x="839.285714286" y="10.0" text-anchor="middle" dy=".35em" fill="#000">IND</text>
							
							  <rect class="party-legend" data-party="BJP" data-highlight="[data-party=BJP]" data-toggle="highlight" x="872.857142857" width="67.1428571429" height="20" fill="#ff7f0e"></rect>
							  <text x="906.428571429" y="10.0" text-anchor="middle" dy=".35em" fill="#000">BJP</text>
							  					  
							</svg>
						  </g>
						<div class="col-md-4 panel-body">
						<div class="progress_bar"></div>
						</div>
						  <div class="col-md-8 panel-body">
						<div class="horizontal_bar"></div>
						</div>
					    </div>
				     </div>
				</div>
			</div>
			</div>
			</div>
	</div>
	</div>
	
	
	<div id="sankeyFlow">
	<div class="container-fluid">
	<div class="container">
  		
			<div class="row">
			<div class="col-md-12 panel panel-default">   
			<div class="row">
				<div class="col-md-12 panel-heading1">
					<h2>Party Transitions Trend across successive elections<i class="successive_year_tag"></i></h2>
				</div>	
           </div>
           <div class="row">		   
				<div class=" col-md-12 panel-body">
					<div class="dropdown header_year">
						<button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Select Year</button>
						<ul class="dropdown-menu" role="menu">
							
						<li data-year="2001_2006" id="2001_2006"><a href="?flowyear=2001_2006#sankeyFlow">2006 results</a></li>
						<li data-year="1996_2001" id="1996_2001"><a href="?flowyear=1996_2001#sankeyFlow">2001 results</a></li>
						<li data-year="1991_1996" id="1991_1996"><a href="?flowyear=1991_1996#sankeyFlow">1996 results</a></li>							
						<li data-year="1987_1991" id="1987_1991"><a href="?flowyear=1987_1991#sankeyFlow">1991 results</a></li>
						<li data-year="1982_1987" id="1982_1987"><a href="?flowyear=1982_1987#sankeyFlow">1987 results</a></li>
						<li data-year="1977_1982" id="1977_1982"><a href="?flowyear=1977_1982#sankeyFlow">1982 results</a></li>
						<li data-year="1971_1972" id="1971_1972"><a href="?flowyear=1971_1972#sankeyFlow">1972 results</a></li>
						<li data-year="1969_1971" id="1969_1971"><a href="?flowyear=1969_1971#sankeyFlow">1971 results</a></li>
						<li data-year="1967_1969" id="1967_1969"><a href="?flowyear=1967_1969#sankeyFlow">1969 results</a></li>
							
						</ul>
					</div>
					
					<div  class="sankey_chart">
						 <svg data-height="0.54" viewBox="0 0 1200 40" style="width: 100%;" xmlns="http://www.w3.org/2000/svg" xlink:xlink="http://www.w3.org/1999/xlink" version="1.1">
						  <g class="headers" transform="translate(80,15)">
							  <rect class="party-legend" data-party="BAC" data-highlight="[data-party=BAC]" data-toggle="highlight" x="0.0" width="67.1428571429" height="20" fill="#A99888"></rect>
							  <text x="33.5714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">BAC</text>
							
							  <rect class="party-legend" data-party="AITC" data-highlight="[data-party=AITC]" data-toggle="highlight" x="67.1428571429" width="67.1428571429" height="20" fill="#4A9F88"></rect>
							  <text x="100.714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#000">AITC</text>
							
							  <rect class="party-legend" data-party="INC" data-highlight="[data-party=INC]" data-toggle="highlight" x="134.285714286" width="67.1428571429" height="20" fill="#2ecc71"></rect>
							  <text x="167.857142857" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">INC</text>
							
							  <rect class="party-legend" data-party="CPM" data-highlight="[data-party=CPM]" data-toggle="highlight" x="201.428571429" width="67.1428571429" height="20" fill="#ff5757"></rect>
							  <text x="235.0" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">CPM</text>
							
							  <rect class="party-legend" data-party="FBL" data-highlight="[data-party=FBL]" data-toggle="highlight" x="268.571428571" width="67.1428571429" height="20" fill="#014BC6"></rect>
							  <text x="302.142857143" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">FBL</text>

							  <rect class="party-legend" data-party="OTH" data-highlight="[data-party=OTH]" data-toggle="highlight" x="335.714285714" width="67.1428571429" height="20" fill="#222"></rect>
							  <text x="369.285714286" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">Others</text>
							
							  <rect class="party-legend" data-party="CPI" data-highlight="[data-party=CPI]" data-toggle="highlight" x="402.857142857" width="67.1428571429" height="20" fill="#ff5757"></rect>
							  <text x="436.428571429" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">CPI</text>
							
							  <rect class="party-legend" data-party="RSP" data-highlight="[data-party=RSP]" data-toggle="highlight" x="470.0" width="67.1428571429" height="20" fill="#F8F907"></rect>
							  <text x="503.571428571" y="10.0" text-anchor="middle" dy=".35em" fill="#000">RSP</text>
							
							  <rect class="party-legend" data-party="AIFB" data-highlight="[data-party=AIFB]" data-toggle="highlight" x="537.142857143" width="67.1428571429" height="20" fill="#FFAD01"></rect>
							  <text x="570.714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#000">AIFB</text>
							
							  <rect class="party-legend" data-party="NCO" data-highlight="[data-party=NCO]" data-toggle="highlight" x="604.285714286" width="67.1428571429" height="20" fill="#1f77b4"></rect>
							  <text x="637.857142857" y="10.0" text-anchor="middle" dy=".35em" fill="#000">NCO</text>
							
							  <rect class="party-legend" data-party="JNP" data-highlight="[data-party=JNP]" data-toggle="highlight" x="671.428571429" width="67.1428571429" height="20" fill="#9A9E56"></rect>
							  <text x="705.0" y="10.0" text-anchor="middle" dy=".35em" fill="#000">JNP</text>
							
							  <rect class="party-legend" data-party="PSP" data-highlight="[data-party=PSP]" data-toggle="highlight" x="738.571428571" width="67.1428571429" height="20" fill="#FFD380"></rect>
							  <text x="772.142857143" y="10.0" text-anchor="middle" dy=".35em" fill="#000">PSP</text>
							
							  <rect class="party-legend" data-party="IND" data-highlight="[data-party=IND]" data-toggle="highlight" x="805.714285714" width="67.1428571429" height="20" fill="#bdc3c7"></rect>
							  <text x="839.285714286" y="10.0" text-anchor="middle" dy=".35em" fill="#000">IND</text>
							
							  <rect class="party-legend" data-party="BJP" data-highlight="[data-party=BJP]" data-toggle="highlight" x="872.857142857" width="67.1428571429" height="20" fill="#ff7f0e"></rect>
							  <text x="906.428571429" y="10.0" text-anchor="middle" dy=".35em" fill="#000">BJP</text>	  
						  </g>
						</svg>
					</div>
				</div>
		  </div>
			
			</div>
			</div>
			
	
	</div>
	</div>
	</div>
	
		<div id="party_Trend">
		<div class="container-fluid">
		<div class="container">
  		
			<div class="row">
			<div class="col-md-12 panel panel-default">   
			<div class="row">
				<div class="col-md-12 panel-heading1">
					<h2>party wise performance trend <i class="year_tag"></i></h2>
				</div>	
           </div>
           <div class="row">		   
				<div class=" col-md-12 panel-body">

						  <div class="dropdown header_year">
						<button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Select Year</button>
							<ul class="dropdown-menu" role="menu">
							
									<li data-year="2011" id="2011_flow"><a href="?year=2011#party_Trend">2011 results</a></li>
									<li data-year="2006" id="2006_flow"><a href="?year=2006#party_Trend">2006 results</a></li>
									<li data-year="2001" id="2001_flow"><a href="?year=2001#party_Trend">2001 results</a></li>
									<li data-year="1996" id="1996_flow"><a href="?year=1996#party_Trend">1996 results</a></li>							
									<li data-year="1991" id="1991_flow"><a href="?year=1991#party_Trend">1991 results</a></li>
									<li data-year="1987" id="1987_flow"><a href="?year=1987#party_Trend">1987 results</a></li>
									<li data-year="1982" id="1982_flow"><a href="?year=1982#party_Trend">1982 results</a></li>
									<li data-year="1977" id="1977_flow"><a href="?year=1977#party_Trend">1977 results</a></li>
									<li data-year="1972" id="1972_flow"><a href="?year=1972#party_Trend">1972 results</a></li>
									<li data-year="1971" id="1971_flow"><a href="?year=1971#party_Trend">1971 results</a></li>
									<li data-year="1969" id="1969_flow"><a href="?year=1969#party_Trend">1969 results</a></li>	
									<li data-year="1967" id="1967_flow"><a href="?year=1967#party_Trend">1967 results</a></li>
									<li data-year="1962" id="1962_flow"><a href="?year=1962#party_Trend">1962 results</a></li>
									<li data-year="1957" id="1957_flow"><a href="?year=1957#party_Trend">1957 results</a></li>
									<li data-year="1951" id="1951_flow"><a href="?year=1951#party_Trend">1951 results</a></li>
									
							  </ul>
					  </div>
					  
						 <svg data-height="0.54" viewBox="0 0 1200 40" style="width: 100%;" xmlns="http://www.w3.org/2000/svg" xlink:xlink="http://www.w3.org/1999/xlink" version="1.1">
						  <g class="headers" transform="translate(80,15)">
							  <rect class="party-legend" data-party="BAC" data-highlight="[data-party=BAC]" data-toggle="highlight" x="0.0" width="67.1428571429" height="20" fill="#A99888"></rect>
							  <text x="33.5714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">BAC</text>
							
							  <rect class="party-legend" data-party="AITC" data-highlight="[data-party=AITC]" data-toggle="highlight" x="67.1428571429" width="67.1428571429" height="20" fill="#4A9F88"></rect>
							  <text x="100.714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#000">AITC</text>
							
							  <rect class="party-legend" data-party="INC" data-highlight="[data-party=INC]" data-toggle="highlight" x="134.285714286" width="67.1428571429" height="20" fill="#2ecc71"></rect>
							  <text x="167.857142857" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">INC</text>
							
							  <rect class="party-legend" data-party="CPM" data-highlight="[data-party=CPM]" data-toggle="highlight" x="201.428571429" width="67.1428571429" height="20" fill="#ff5757"></rect>
							  <text x="235.0" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">CPM</text>
							
							  <rect class="party-legend" data-party="FBL" data-highlight="[data-party=FBL]" data-toggle="highlight" x="268.571428571" width="67.1428571429" height="20" fill="#014BC6"></rect>
							  <text x="302.142857143" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">FBL</text>

							  <rect class="party-legend" data-party="OTH" data-highlight="[data-party=OTH]" data-toggle="highlight" x="335.714285714" width="67.1428571429" height="20" fill="#222"></rect>
							  <text x="369.285714286" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">Others</text>
							
							  <rect class="party-legend" data-party="CPI" data-highlight="[data-party=CPI]" data-toggle="highlight" x="402.857142857" width="67.1428571429" height="20" fill="#ff5757"></rect>
							  <text x="436.428571429" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">CPI</text>
							
							  <rect class="party-legend" data-party="RSP" data-highlight="[data-party=RSP]" data-toggle="highlight" x="470.0" width="67.1428571429" height="20" fill="#F8F907"></rect>
							  <text x="503.571428571" y="10.0" text-anchor="middle" dy=".35em" fill="#000">RSP</text>
							
							  <rect class="party-legend" data-party="AIFB" data-highlight="[data-party=AIFB]" data-toggle="highlight" x="537.142857143" width="67.1428571429" height="20" fill="#FFAD01"></rect>
							  <text x="570.714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#000">AIFB</text>
							
							  <rect class="party-legend" data-party="NCO" data-highlight="[data-party=NCO]" data-toggle="highlight" x="604.285714286" width="67.1428571429" height="20" fill="#1f77b4"></rect>
							  <text x="637.857142857" y="10.0" text-anchor="middle" dy=".35em" fill="#000">NCO</text>
							
							  <rect class="party-legend" data-party="JNP" data-highlight="[data-party=JNP]" data-toggle="highlight" x="671.428571429" width="67.1428571429" height="20" fill="#9A9E56"></rect>
							  <text x="705.0" y="10.0" text-anchor="middle" dy=".35em" fill="#000">JNP</text>
							
							  <rect class="party-legend" data-party="PSP" data-highlight="[data-party=PSP]" data-toggle="highlight" x="738.571428571" width="67.1428571429" height="20" fill="#FFD380"></rect>
							  <text x="772.142857143" y="10.0" text-anchor="middle" dy=".35em" fill="#000">PSP</text>
							
							  <rect class="party-legend" data-party="IND" data-highlight="[data-party=IND]" data-toggle="highlight" x="805.714285714" width="67.1428571429" height="20" fill="#bdc3c7"></rect>
							  <text x="839.285714286" y="10.0" text-anchor="middle" dy=".35em" fill="#000">IND</text>
							
							  <rect class="party-legend" data-party="BJP" data-highlight="[data-party=BJP]" data-toggle="highlight" x="872.857142857" width="67.1428571429" height="20" fill="#ff7f0e"></rect>
							  <text x="906.428571429" y="10.0" text-anchor="middle" dy=".35em" fill="#000">BJP</text>
							  
							</svg>
						  </g>

						  <div class="party_performance_trend_svg">
						 </div>

				</div>
		  </div>
			
			</div>
			</div>
			
	
	</div>
	</div>
	</div>	
	
	
	<div class="Constituency_partyTrend">
		<div class="container-fluid">
	<div class="container">
  		
			<div class="row">
			<div class="col-md-12 panel panel-default">   
			<div class="row">
				<div class="col-md-12 panel-heading1">
					<h2>Constituency wise party trend</h2>
				</div>	
           </div>
           <div class="row">		   
				<div class=" col-md-12 panel-body">

						 <svg data-height="0.54" viewBox="0 0 1200 40" style="width: 100%;" xmlns="http://www.w3.org/2000/svg" xlink:xlink="http://www.w3.org/1999/xlink" version="1.1">
						  <g class="headers" transform="translate(80,5)">
							  <rect class="party-legend" data-party="BAC" data-highlight="[data-party=BAC]" data-toggle="highlight" x="0.0" width="67.1428571429" height="20" fill="#A99888"></rect>
							  <text x="33.5714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">BAC</text>
							
							  <rect class="party-legend" data-party="AITC" data-highlight="[data-party=AITC]" data-toggle="highlight" x="67.1428571429" width="67.1428571429" height="20" fill="#4A9F88"></rect>
							  <text x="100.714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#000">AITC</text>
							
							  <rect class="party-legend" data-party="INC" data-highlight="[data-party=INC]" data-toggle="highlight" x="134.285714286" width="67.1428571429" height="20" fill="#2ecc71"></rect>
							  <text x="167.857142857" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">INC</text>
							
							  <rect class="party-legend" data-party="CPM" data-highlight="[data-party=CPM]" data-toggle="highlight" x="201.428571429" width="67.1428571429" height="20" fill="#ff5757"></rect>
							  <text x="235.0" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">CPM</text>
							
							  <rect class="party-legend" data-party="FBL" data-highlight="[data-party=FBL]" data-toggle="highlight" x="268.571428571" width="67.1428571429" height="20" fill="#014BC6"></rect>
							  <text x="302.142857143" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">FBL</text>

							  <rect class="party-legend" data-party="OTH" data-highlight="[data-party=OTH]" data-toggle="highlight" x="335.714285714" width="67.1428571429" height="20" fill="#222"></rect>
							  <text x="369.285714286" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">Others</text>
							
							  <rect class="party-legend" data-party="CPI" data-highlight="[data-party=CPI]" data-toggle="highlight" x="402.857142857" width="67.1428571429" height="20" fill="#ff5757"></rect>
							  <text x="436.428571429" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">CPI</text>
							
							  <rect class="party-legend" data-party="RSP" data-highlight="[data-party=RSP]" data-toggle="highlight" x="470.0" width="67.1428571429" height="20" fill="#F8F907"></rect>
							  <text x="503.571428571" y="10.0" text-anchor="middle" dy=".35em" fill="#000">RSP</text>
							
							  <rect class="party-legend" data-party="AIFB" data-highlight="[data-party=AIFB]" data-toggle="highlight" x="537.142857143" width="67.1428571429" height="20" fill="#FFAD01"></rect>
							  <text x="570.714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#000">AIFB</text>
							
							  <rect class="party-legend" data-party="NCO" data-highlight="[data-party=NCO]" data-toggle="highlight" x="604.285714286" width="67.1428571429" height="20" fill="#1f77b4"></rect>
							  <text x="637.857142857" y="10.0" text-anchor="middle" dy=".35em" fill="#000">NCO</text>
							
							  <rect class="party-legend" data-party="JNP" data-highlight="[data-party=JNP]" data-toggle="highlight" x="671.428571429" width="67.1428571429" height="20" fill="#9A9E56"></rect>
							  <text x="705.0" y="10.0" text-anchor="middle" dy=".35em" fill="#000">JNP</text>
							
							  <rect class="party-legend" data-party="PSP" data-highlight="[data-party=PSP]" data-toggle="highlight" x="738.571428571" width="67.1428571429" height="20" fill="#FFD380"></rect>
							  <text x="772.142857143" y="10.0" text-anchor="middle" dy=".35em" fill="#000">PSP</text>
							
							  <rect class="party-legend" data-party="IND" data-highlight="[data-party=IND]" data-toggle="highlight" x="805.714285714" width="67.1428571429" height="20" fill="#bdc3c7"></rect>
							  <text x="839.285714286" y="10.0" text-anchor="middle" dy=".35em" fill="#000">IND</text>
							
							  <rect class="party-legend" data-party="BJP" data-highlight="[data-party=BJP]" data-toggle="highlight" x="872.857142857" width="67.1428571429" height="20" fill="#ff7f0e"></rect>
							  <text x="906.428571429" y="10.0" text-anchor="middle" dy=".35em" fill="#000">BJP</text>
							  
							</svg>
						  </g>

						  <div class="party_trend">
						 </div>

				</div>
		  </div>
			
			</div>
			</div>
			
	
	</div>
	</div>
	</div>
	
 <script>	
function getParameterByName(name, url) {
    if (!url) url = window.location.href;
    name = name.replace(/[\[\]]/g, "\\$&");
    var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
        results = regex.exec(url);
    if (!results) return null;
    if (!results[2]) return '';
    return decodeURIComponent(results[2].replace(/\+/g, " "));
}

flowyear_detail = getParameterByName('flowyear');
year_detail = getParameterByName('year');

acct_no = getParameterByName('acct_no');

  if (acct_no == undefined){ $(".detail_display").hide(); }
  else{ $(".detail_display").show();}

  if (year_detail == undefined){ year_detail= 2011; }
  if (flowyear_detail == undefined){ flowyear_detail= '2001_2006'; }
  
$('#'+year_detail+'').addClass('active');
$(".year_tag").append("("+year_detail+")");

$('#'+year_detail+'_flow').addClass('active');


$('#'+flowyear_detail+'').addClass('active');
$(".successive_year_tag").append(" ("+flowyear_detail.replace('_', ' to ')+") ");


d3.csv("color_mapper.csv", function(error_color, color_data) {

color_map = {}

color_data.forEach(function (d) {
	
	color_map[d.party] = d.color;
	
});

d3.csv("sample_wb.csv", function(data) { 
	
var margin = {top: 20, right: 20, bottom: 35, left: 20},
    width = 1200 - margin.left - margin.right,
    height = 400 - margin.top - margin.bottom;

var x = d3.scale.ordinal()
    .rangeRoundBands([0, width], .2);

var y = d3.scale.linear()
    .range([height, 0]);

var xAxis = d3.svg.axis()
    .scale(x)
    .orient("bottom");

var yAxis = d3.svg.axis()
    .scale(y)
    .orient("left");

var svg = d3.select(".stacked_bar").append("svg")
            .style("width", "100%")
            .attr("data-height","0.54")
            .attr("viewBox","0 0 "+(width + margin.left + margin.right)+" "+(height + margin.top + margin.bottom))
			.append("g")
			.attr("transform", "translate(" + margin.left + "," + margin.top + ")");

    var party_names = ['CPM','INC','AITC','CPI','FBL','RSP','BAC','PSP','AIFB','JNP','IND','Others'];
  
 data.forEach(function(d) {
        var y0 = 0;
        d.party = party_names.map(function(name) { return {name: name, y0: y0, y1: y0 += +d[name],value: +d[name],YEAR:d['YEAR']}; });
        d.party.forEach(function(d) { d.y0 /= y0; d.y1 /= y0; d.y0= d.y0*100,d.y1=d.y1*100 });
        d.total = d.party[d.party.length - 1].y1;
  });
	
  x.domain(data.map(function(d) { return d['YEAR']; }));
  y.domain([0, d3.max(data, function(d) { return d.total; })]);

  svg.append("g")
        .attr("class", "x axis")
        .attr("transform", "translate(0," + height + ")")
        .call(xAxis);

  var party = svg.selectAll(".party")
      .data(data)
      .enter().append("g")
      .attr("class", "party")
      .attr("transform", function(d) { return "translate(" + x(d['YEAR']) + ",0)"; });

  party.selectAll("rect")
      .data(function(d) { return d.party; })
      .enter().append("rect")
      .attr("width", x.rangeBand())
      .attr("y", function(d) { return y(d.y1); })
      .attr("height", function(d) { return y(d.y0) - y(d.y1); })
      .style("fill", function(d) { return color_map[d.name] })
	  .style("stroke", function(d) { return d3.rgb(color_map[d.name]).darker(); })
	  .attr("data-title", function(d) { return d['YEAR']+', '+d.name+' : '+d.value+' seats'; })
	  .on("mouseover", function() { d3.select(this).attr("stroke-width", 5);})
	  .on("mouseout", function() { d3.select(this).attr("stroke-width", 1);});
	  
  party.selectAll(".value")
    .data(function(d) { return d.party; })
    .enter().append("text")
    .attr("class", "value")
	.attr("y", function(d) { return ((y(d.y1)+y(d.y0))/2)-1; })
    .attr("x", x.rangeBand()/2)
	.attr("text-anchor", "middle")
	.style("font-size", "15px")
	.attr("data-title", function(d) { return d['YEAR']+', '+d.name+' : '+d.value+' seats'; })
	.style("fill", function(d) { return (parseInt(color_map[d.name].replace('#', ''), 16) > 0xffffff / 2) ? '#000' : '#fff';})
	.text(function(d) { return (y(d.y0) - y(d.y1))>29 ?d.value:' '; });

  party.selectAll(".name")
    .data(function(d) { return d.party; })
    .enter().append("text")
    .attr("class", "name")
	.attr("y", function(d) { return ((y(d.y1)+y(d.y0))/2)+12; })
    .attr("x", x.rangeBand()/2)
	.attr("text-anchor", "middle")
	.style("font-size", "12px")
	.attr("data-title", function(d) { return d['YEAR']+', '+d.name+' : '+d.value+' seats'; })
	.style("fill", function(d) { return (parseInt(color_map[d.name].replace('#', ''), 16) > 0xffffff / 2) ? '#000' : '#fff';})
	.text(function(d) { return (y(d.y0) - y(d.y1))>29 ?d.name:' '; });

      $("rect").tooltip({container: '.stacked_bar', html: true, placement:'top'});
      $("text").tooltip({container: '.stacked_bar', html: true, placement:'top'});
	  
  });

});

	
function addThousandsSeparator(t){var a=t;if(parseFloat(t)){t=new String(t);var e=t.split(".");e[0]=e[0].split("").reverse().join("").replace(/(\d{3})(?!$)/g,"$1,").split("").reverse().join(""),a=e.join(".")}return a}
    
d3.csv("assembly_wb_detail.csv", function(data_csv) {
 
var margin = {top: 20, right: 20, bottom: 35, left: 20},
    width = 1200 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom;
	
    var svg = d3.select(".tree_map").append("svg")
		    .attr("width", "100%")
            .attr("data-height","0.54")
            .attr("viewBox","0 0 "+(width + margin.left + margin.right)+" "+(height + margin.top + margin.bottom))
			.attr("xmlns", 'http://www.w3.org/2000/svg')
			.attr("xlink", 'http://www.w3.org/1999/xlink')
			.attr("version", '1.1')
			.append("g")
			.attr("transform", "translate(" + margin.left + "," + margin.top + ")");
        
    var treemap = d3.layout.treemap()
        .padding(0.5)
        .size([width, height])
        .sticky(true)
        .value(function(d) {return d.polled_votes;})
        .children(function(d) {return d.values;});
		
        data_root = {"key":"treemap"};
        
		 data_csv.forEach(function(o) {
          o.votes = parseInt(o.VOTES);
          o.rank = parseInt(o.rank);
          o.year = parseInt(o.YEAR);
		  o.polled_votes = parseInt(o.polled_votes);
          });
         
		 
		filter_data_csv = data_csv.filter(function(d){return (d.year==year_detail) & (d.rank==1) });
		 
		constituency_list = []
        filter_data_csv.forEach(function (d) {
			d.constituency = d.AC_NAME
			constituency_list.push(d.constituency);
		});
   	
        var nest = d3.nest()
        .key(function(d) { return  d.PARTY; })
        .entries(filter_data_csv);
		
    data_root["values"] = nest

	
  var cell = svg.data([data_root]).selectAll("g")
      .data(treemap.nodes)
    .enter().append("a")
      .attr("xlink:href",function(d) { return '?year='+d.year+'&acct_no='+d.AC_NO+"#perConstituency" })
	  .append("rect")
      .attr("x", function(d) { return d.x; })
      .attr("y", function(d) { return d.y; })
      .attr("width", function(d) { return d.dx; })
      .attr("height", function(d) { return d.dy; })
      .attr("data-title",function(d) { return 'Constituency : '+d.constituency+' <br/> Candidate : '+d.NAME+' <br/> party : '+d.PARTY+' <br/> percentage : '+(parseFloat((d.votes/d.polled_votes))*100).toFixed(2)+'%  <br/> votes : '+addThousandsSeparator(d.votes)+'<br/> polled votes : '+addThousandsSeparator(d.polled_votes)+'' ;})
      .attr("sub_link",function(d) { return d.constituency+' '+d.PARTY+' '+d.NAME ;})
      .style("fill", function(d) { return color_map[d.PARTY];})
	  .style("stroke", '#fff' )
      .style("stroke-width", 0.5);        

      $("rect").tooltip({container: '.tree_map', html: true, placement:'top'});
      
    var lastsearch = '';
    var $box = {};
    
    function add_search(search, chart) {
      var $chart = $(chart);
      $(search).on('keypress, change, keyup', function() {
        var search = $(this).val();
        if (lastsearch != search) {
          lastsearch = search;
          var re = new RegExp(search, "i");
          $('rect', $chart).each(function(){
              $(this).css('opacity', re.test($(this).attr("sub_link")) ? '1.0': '0.1');
          });
        }
      });
    }

    add_search('.search', '.tree_map');
    

 var Industry = constituency_list;
	
    $( ".search" ).autocomplete({
    source: function(req, responseFn) {
        var re = $.ui.autocomplete.escapeRegex(req.term);
        var matcher = new RegExp( "^" + re, "i" );
        var a = $.grep( Industry, function(item,index){
            return matcher.test(item);
        });
        responseFn( a );
    }
    
	});
	
		if (acct_no != undefined){
			data_set = data_csv.filter(function(d){return (d.year==year_detail)& (d.AC_NO==acct_no)& (d.rank<12) })
	

	var margin = {top: 10, right: 30, bottom: 15, left: 60},
				width = 960 - margin.left - margin.right,
				height = 320 - margin.top - margin.bottom;
	
		var horizontal_bar_svg = d3.select(".horizontal_bar").append("svg")
				.attr("width", "100%")
				.attr("data-height","0.54")
				.attr("viewBox","0 0 "+(width)+" "+(height))
				.attr("xmlns", 'http://www.w3.org/2000/svg')
				.attr("xlink", 'http://www.w3.org/1999/xlink')
				.attr("version", '1.1')
				.append("g")
				.attr("transform", "translate(" + margin.left + "," + margin.top/4 + ")");
	
	var constituency_name = '';
	
    data_set.forEach(function(o) {
		constituency_name = o.AC_NAME;
	  });
    	  
	var layers = d3.layout.stack()(['VOTES'].map(function(period) {
	    return data_set.map(function(d) {
		  return {x: d['rank']+': '+d.PARTY, y: parseFloat(d[period]), votes: parseFloat(d[period]), color : d.color, party:d.PARTY,constituency:d.AC_NAME,name:d.NAME,polled_votes:d.polled_votes };
		});
    }));

   var yGroupMax = d3.max(layers, function(layer) { return d3.max(layer, function(d) { return d.y; }); });

    var yScale = d3.scale.ordinal()
        .domain(layers[0].map(function(d) { return d.x; }))
        .rangeRoundBands([0, height- margin.top - margin.bottom], .2);

    var x = d3.scale.linear()
        .domain([0, yGroupMax])
        .range([0, width-(margin.left*5/2)]);

	var color = d3.scale.ordinal()
		.range(["#7aa1c2","#72d8f2","#f3daa4","#66ca9b","#f7f7f7","#f7f7f7"]);
	
    var xAxis = d3.svg.axis()
        .scale(x)
        .orient("bottom")		
        .tickPadding(12)
		.ticks(4);
		
    var yAxis = d3.svg.axis()
        .scale(yScale)
        .tickSize(0)
        .tickPadding(9)
        .orient("left");

    var layer = horizontal_bar_svg.selectAll(".layer")
        .data(layers)
        .enter().append("g")
        .attr("class", "layer");
		
		d3.selectAll(".tick > text")
			.style("font-size", "13px")	
  
  
    var rect = layer.selectAll("rect")
        .data(function(d) { return  d; })
        .enter().append("rect")
        .attr("y", function(d) { return yScale(d.x); })
        .attr("height", yScale.rangeBand())
        .attr("x", function(d) { return  x(d.y0); })
        .attr("width", function(d) { return x(d.y); })
		.style("fill", function(d,i) { return color_map[d.party]; })
		.style("stroke", function(d,i) { return d3.rgb(color_map[d.party]).darker(); })
		.attr("data-title",function(d) { return 'Constituency : '+d.constituency+' <br/> Candidate : '+d.name+' <br/> party : '+d.party+' <br/> percentage : '+(parseFloat((d.votes/d.polled_votes))*100).toFixed(2)+'%  <br/> votes : '+addThousandsSeparator(d.votes)+'<br/> polled votes : '+addThousandsSeparator(d.polled_votes)+'' ;})
      
	var rect = layer.selectAll("text")
        .data(function(d) { return  d; })
        .enter().append("text")
        .attr("y", function(d) { return yScale(d.x)+(yScale.rangeBand()*4/5); })
        .attr("x", function(d) { return  x(d.y)+3; })
        .style("text-anchor", "start")
		.attr("fill", "#444")
		.style("font-size","13px")
		.text(function(d) { return addThousandsSeparator(d.votes)+' votes'; })
		
		$(".constituency_tag").append("("+constituency_name+")");

    horizontal_bar_svg.append("g")
        .attr("class", "x axis")
        .attr("transform", "translate(0," + (height -margin.bottom - margin.top) + ")")
        .call(xAxis)
		.selectAll("text").style("text-anchor", "middle")
            .attr("dx", "-.18em")
            .attr("dy", ".15em")
			.style("fill", "rgb(99, 99, 99)")
			.style("font-size","13px")

	horizontal_bar_svg.append("text")
		.attr("x", width-margin.left-margin.left-margin.right)
		.attr("y", height-(margin.top/2)-35)
		.style("fill", "rgb(99, 99, 99)")
		.style("font-size","13px")
		.style("text-anchor", "end")
		.text("Votes");
			  
    horizontal_bar_svg.append("g")
        .attr("class", "y axis")
        .attr("transform", "translate(0,0)")
        .call(yAxis)
		.selectAll("text")
			.style("fill", "rgb(99, 99, 99)")
			.style("font-size","13px");
		
		
      $("rect").tooltip({container: '.horizontal_bar', html: true, placement:'top'});
	
		var twoPi = 2 * Math.PI;
		
		var sub_width = parseInt(d3.select('.progress_bar').style('width'), 10);
	
		var margin = {top: 20, right: 20, bottom: 20, left: 20},
				width = sub_width - margin.left - margin.right,
				height = 250 - margin.top - margin.bottom;
	
		var progress_bar_svg = d3.select(".progress_bar").append("svg")
				.attr("width", "100%")
				.attr("data-height","0.54")
				.attr("viewBox","0 0 "+(width)+" "+(height))
				.attr("xmlns", 'http://www.w3.org/2000/svg')
				.attr("xlink", 'http://www.w3.org/1999/xlink')
				.attr("version", '1.1')
				.append("g")
				.attr("transform", "translate(" + width/2 + "," + height*7/12+ ")");
	
		value_data = data_set.filter(function(d){return (d.rank==1) })
		
		value = value_data[0]['VOTES']/parseFloat(value_data[0]['polled_votes']);
		
		fontSize = 16;

		console.log(d3.min([width,height]));
		
		var arc = d3.svg.arc()
					.innerRadius(d3.min([width,height])*.27)
					.outerRadius(d3.min([width,height])*.4)
					.startAngle(0);

		var background = progress_bar_svg
						.append("path")
						.datum({ endAngle : twoPi})
						.style("fill", "#ddd")
						.attr("d", arc);

		var foreground = progress_bar_svg
							.append("path")
							.datum({ endAngle : 0})
							.style("fill", color_map[value_data[0]['PARTY']])
							.attr("class", "foreground")
							.attr("d", arc);

			foreground
				.transition()
				.duration(1000)
				.ease("linear")
				.attrTween("d", function(d) {
				var interpolate = d3.interpolate(d.endAngle, twoPi * value)
				return function(t) {
				d.endAngle = interpolate(t);
				return arc(d);
			}
			});

		var text = progress_bar_svg.append("text")
					.attr("text-anchor", "middle")
					.attr("dy", ".35em")
					.style("fill", "rgb(99, 99, 99)")
					.attr("font-size", fontSize)
					.text((value*100).toFixed(2) + "%");
					
		var text = progress_bar_svg.append("text")
					.attr("text-anchor", "middle")
					.attr("y", -100)
					.attr("dy", ".35em")
					.style("fill", "rgb(99, 99, 99)")
					.attr("font-size", fontSize)
					.text('Winning Party ('+value_data[0]['PARTY']+')');

		}

	d3.csv("color_mapper.csv", function(error_color, color_data) {

	color_map = {}

	color_data.forEach(function (d) {
		
		color_map[d.party] = d.color;
        
	});
	
	
	var sub_width = parseInt(d3.select('.party_performance_trend_svg').style('width'), 10)
		
	var margin = {top: 20, right: 20, bottom: 20, left: 20},
		width = sub_width - margin.left - margin.right,
		height = 460 - margin.top - margin.bottom;
	
    var party_performance_trend_svg = d3.select(".party_performance_trend_svg").append("svg")
		    .attr("width", "100%")
            .attr("data-height","0.54")
            .attr("viewBox","0 0 "+(width + margin.left + margin.right)+" "+(height + margin.top + margin.bottom))
			.attr("xmlns", 'http://www.w3.org/2000/svg')
			.attr("xlink", 'http://www.w3.org/1999/xlink')
			.attr("version", '1.1')
			.append("g")
			.attr("transform", "translate(" + (margin.left+(width/2))+ "," + (margin.top+(height/2)) + ")");
        
	contest_data_csv = data_csv.filter(function(d){return (d.year==year_detail)});
		
		var contest_data_count = d3.nest()
			  .key(function(d) { return d.PARTY; })
			  .rollup(function(v) { return v.length; })
			  .entries(contest_data_csv);
			  
	winning_data_csv = contest_data_csv.filter(function(d){return (d.rank==1)});  
	
		var winning_data_count = d3.nest()
			  .key(function(d) { return d.PARTY; })
			  .rollup(function(v) { return v.length; })
			  .entries(winning_data_csv);
			  
		 
		winning_data_count.forEach(function(o) {
		    o.weight = o.values
			o.width  = +o.weight;
			contest_data_count.forEach(function(d) {
				if(d.key==o.key){
					o.contest = d.values
				}
			});
			o.score  = (o.values*100/o.contest).toFixed(2);			
		});
		
		console.log(winning_data_count);
		
		radius = Math.min(width, height) / 2,
		innerRadius = 0.3 * radius;

	var pie = d3.layout.pie()
		.sort(null)
		.value(function(d) { return d.width; });


		var arc = d3.svg.arc()
		  .innerRadius(innerRadius)
		  .outerRadius(function (d) { 
			return (radius - innerRadius) * (d.data.score / 100.0) + innerRadius; 
		  });

		var outlineArc = d3.svg.arc()
				.innerRadius(innerRadius)
				.outerRadius(radius);


  var path = party_performance_trend_svg.selectAll(".solidArc")
      .data(pie(winning_data_count))
    .enter().append("path")
      .attr("fill", function(d) { return color_map[d.data.key]; })
      .attr("class", "solidArc")
      .attr("stroke", function(d) { return d3.rgb(color_map[d.data.key]).darker(); })
      .attr("d", arc)
	  .attr("data-title",function(d) { return  'party : '+d.data.key+' <br/> contested seats : '+d.data.contest+' <br/> seats won : '+d.data.values+' <br/> convertion percentage : '+d.data.score ;});

  var outerPath = party_performance_trend_svg.selectAll(".outlineArc")
      .data(pie(winning_data_count))
    .enter().append("path")
      .attr("fill", "none")
      .attr("stroke", "gray")
      .attr("class", "outlineArc")
      .attr("d", outlineArc);  
	
  var max_value = d3.max(winning_data_count, function(d) { return d.values; });
  winning_party = winning_data_count.filter(function(d){return (d.values==max_value)});  
  
  party_performance_trend_svg.append("text")
    .attr("class", "aster-score")
    .attr("dy", ".35em")
    .attr("text-anchor", "middle")
	.style("fill", "rgb(99, 99, 99)")
	.attr("font-size", 22)	// text-align: right
    .text(winning_party[0]['key']);
	
      $("path").tooltip({container: '.party_performance_trend_svg', html: true, placement:'top'});
	  
        });
  
	});


 var margin = {top: 20, right: 20, bottom: 20, left: 20},
    width = 1200 - margin.left - margin.right,
    height = 600 - margin.top - margin.bottom;

var formatNumber = d3.format(",.0f"), 
    format = function(d) { return formatNumber(d); },
    color = d3.scale.category20b();
	
// append the svg canvas to the page
var svg = d3.select(".sankey_chart").append("svg")
	.attr("width", '100%')
    .attr("data-height", '0.5678')
    .attr("viewBox",'0 0 1200 600')
  .append("g")
    .attr("transform", 
          "translate(" + margin.left + "," + margin.top + ")");

// Set the sankey diagram properties
var sankey = d3.sankey()
    .nodeWidth(100)
    .nodePadding(3)
    .size([width, height]);

var path = sankey.link();


d3.csv("color_mapper.csv", function(error_color, color_data) {

color_map = {}

color_data.forEach(function (d) {
	
	color_map[d.party] = d.color;
	
});


// load the data (using the timelyportfolio csv method)
d3.csv("wb_data.csv", function(error, data) {


	data.forEach(function (d) {
		d.source_year =d[flowyear_detail.substring(0, 4)]
		d.target_year =d[flowyear_detail.substring(5, 9)] 
		d.combined_year =d[flowyear_detail.substring(0, 4)]+'_'+d[flowyear_detail.substring(5, 9)] 
		});

		data = data.filter(function(d){return (d.source_year!='') & (d.target_year!='') })
		
		var data_Count = d3.nest()
			  .key(function(d) { return d.combined_year; })
			  .rollup(function(v) { return v.length; })
			  .entries(data);
  	
  graph = {"nodes" : [], "links" : []};
    
	name_list = []
	data_Count.forEach(function (d) {

	  graph.nodes.push({ "name": d.key.split("_")[0], "color": color_map[d.key.split("_")[0]] });
	  graph.nodes.push({ "name": '_'+d.key.split("_")[1], "color": color_map[d.key.split("_")[1]] });

	  graph.links.push({ "source": d.key.split("_")[0],
						 "target": '_'+d.key.split("_")[1],
						 "source_color": color_map[d.key.split("_")[0]],
						 "target_color": color_map[d.key.split("_")[1]],
						 "value": d.values });
	 });
	 
     // return only the distinct / unique nodes
     graph.nodes = d3.keys(d3.nest()
       .key(function (d) { return d.name; })
       .map(graph.nodes));
	 
     // loop through each link replacing the text with its index from node
     graph.links.forEach(function (d, i) {
       graph.links[i].source = graph.nodes.indexOf(graph.links[i].source);
       graph.links[i].target = graph.nodes.indexOf(graph.links[i].target);
     });

     //now loop through each nodes to make nodes an array of objects
     // rather than an array of strings
     graph.nodes.forEach(function (d, i) {	   
       graph.nodes[i] = { "name": d };
     });

  sankey
    .nodes(graph.nodes)
    .links(graph.links)
    .layout(32);

	//var party_colors = {'AITC':'#4A9F88','BJP':'#ff7f0e','CPI':'#ff5757','CPM':'#ff5757','BAC':'#A99888','Others':'#222','INC':'#2ecc71','IND':'#bdc3c7','PSP':'#FFD380','RSP':'#F8F907','FBL':'#014BC6','CPI(M)':'#ff5757','AIFB':'#FFAD01'}

 svg.selectAll(".head")
      .data([flowyear_detail.substring(0, 4),flowyear_detail.substring(5, 9)])
    .enter().append("text")
      .attr("y", -4)
	  .attr("font-size",21)
      .attr("x", function(d,p) { return p < 1 ?  50 : 1110 ; })
	  .attr("fill", function(d,p) { return p > 0 ? "rgb(99, 99, 99)" : "rgb(99, 99, 99)"; })
	  .attr("text-anchor", function(d,p) { return p <  1 ? 'middle' : 'middle'; })
	  .text(function(d) { return 'year('+d+')'; });


	  			
	  
// add in the links
  var link = svg.append("g").selectAll(".link")
      .data(graph.links)
    .enter().append("path")
      .attr("class", "link")
      .attr("d", path)
      .style("stroke-width", function(d) { return Math.max(1, d.dy); })
      .style("fill", function(d) { return d.target_color; })
      .style("stroke", function(d) { return d.target_color; })	  
	  .sort(function(a, b) { return b.dy - a.dy; })
	  .attr("data-title",function(d) { return d.source.name == d.target.name.replace('_','') ?  d.source.name+' has retained '+format(d.value)+' seats'  : d.target.name.replace('_','') + " has got "+ format(d.value)+" seats from "+ d.source.name; });
		
// add in the nodes
  var node = svg.append("g").selectAll(".node")
      .data(graph.nodes)
    .enter().append("g")
      .attr("class", "node")
      .attr("transform", function(d) { 
		  return "translate(" + d.x + "," + d.y + ")"; })
    .call(d3.behavior.drag()
      .origin(function(d) { return d; })
      .on("dragstart", function() { 
		  this.parentNode.appendChild(this); })
      .on("drag", dragmove));
      
// add the rectangles for the nodes
  node.append("rect")
      .attr("height", function(d) { return d.dy; })
      .attr("width", sankey.nodeWidth())
     .style("fill", function(d) { return color_map[d.name.replace('_','')]; })
      .style("stroke", function(d) { return d3.rgb(color_map[d.name.replace('_','')]).darker(2); })
	   .attr('data-title',function(d) { return d.name.replace('_','') + "\n" + format(d.value)+' Seats'; });

  node
	.append("text")
	.attr("y", function(d) { return (d.dy/2)-1; })
    .attr("x", sankey.nodeWidth()/2)
	.attr("text-anchor", "middle")
	.style("font-size", "15px")
	.attr("data-title", function(d) { return d.name.replace('_','')+' : '+format(d.value)+' seats'; })
	.style("fill", function(d) { return (parseInt(color_map[d.name.replace('_','')].replace('#', ''), 16) > 0xffffff / 2) ? '#000' : '#fff';})
	.text(function(d) { return d.dy>29 ?d.value:' '; });

  node
	.append("text")
	.attr("y", function(d) { return (d.dy/2)+12; })
    .attr("x", sankey.nodeWidth()/2)
	.attr("text-anchor", "middle")
	.style("font-size", "12px")
	.attr("data-title", function(d) { return d.name.replace('_','')+' : '+format(d.value)+' seats'; })
	.style("fill", function(d) { return (parseInt(color_map[d.name.replace('_','')].replace('#', ''), 16) > 0xffffff / 2) ? '#000' : '#fff';})
	.text(function(d) { return d.dy>29 ?d.name.replace('_',''):' '; });
	
  $("text").tooltip({container: '.sankey_chart', html: true, placement:'top'});
  $("rect").tooltip({container: '.sankey_chart', html: true, placement:'top'});  
  $("path").tooltip({container: '.sankey_chart', html: true, placement:'top'}); 	 

// add in the title for the nodes
  node.append("text")
      .attr("x", -6)
      .attr("y", function(d) { return d.dy / 2; })
      .attr("dy", ".35em")
      .attr("text-anchor", "end")
      .attr("transform", null)
      .text(function(d) { return d.name.replace('_',''); })
    .filter(function(d) { return d.x < width / 2; })
      .attr("x", 6 + sankey.nodeWidth())
      .attr("text-anchor", "start");

// the function for moving the nodes
  function dragmove(d) {
    d3.select(this).attr("transform", 
        "translate(" + d.x + "," + (
                d.y = Math.max(0, Math.min(height - d.dy, d3.event.y))
            ) + ")");
    sankey.relayout();
    link.attr("d", path);
  }

});	

});	

 
// load the data (using the timelyportfolio csv method)
d3.text("wb_data.csv", function(error, data) {

d3.csv("color_mapper.csv", function(error_color, color_data) {

color_map = {}

color_data.forEach(function (d) {
	
	color_map[d.party] = d.color;
	
});
   var parsedCSV = d3.csv.parseRows(data);
   
   var container = d3.select(".party_trend")
					  .append("table")
					   .attr("id","myTable")
					   .attr("class","table table-bordered");
					   
			container.selectAll("thead")
				.data([parsedCSV[0]]).enter()
				.append("thead")
			    .attr("class","data_head")
				.append("tr")
			.selectAll("th")
				.data(function(d) { return d; }).enter()
				.append("th")
				 .attr("class","dynatable-head")
				 .append("font")
					.attr("color","#636363")
				.text(function(d) { return d; })

			if (0 > -1) { parsedCSV.splice(0, 1);}
					
				container
					.append("tbody")
					 .selectAll("tr")
						.data(parsedCSV).enter()
						.append("tr")
                    .selectAll("td")
                        .data(function(d) { return d; }).enter()
                        .append("td")
						.attr("bgcolor",function(d) { return color_map[d] })
						.append("font")
						.attr("color",function(d) { return color_map[d] == undefined ? "#636363" : ((parseInt(color_map[d].replace('#', ''), 16) > 0xffffff / 2) ? '#000' : '#fff') })
						.text(function(d) { return d; })		


	$('#myTable').DataTable({
        "sScrollX": "100%",
        "sScrollXInner": "150%"
  });
	
   	
	});					
});



</script>
</body>
</html>