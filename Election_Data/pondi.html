<!DOCTYPE html>
<!--------------------------------------------------------------
 Name:        data-analytics.github.io
 Purpose:     Data visualisation and analytics examples 
 Author:      sushanth
 Created:     28-01-2016
 Modified:    21-09-2016
 Copyright:  (c) sushanth 2016
 Licence:     protected(not suppose to se it directly)
---------------------------------------------------------------->
<html manifest="election.appcache" >
<head>
  <meta http-equiv="X-UA-COMPATIBLE" content="IE=EmulateIE9">
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Sushanth">
  <meta name="description" content="Pondicherry Assembly Election Results 2016 'A visual guide to the check out the history of Pondicherry Assembly elections, from 1967 until 2011', Which of the Dravidian duos might get the stronghold in Pondicherry? What will be the pre-poll alliances? For the state march is a crucial month to predict next political face.">
  <meta name="news_keywords" content="Pondicherry polls, Pondicherry assembly polls, jayalalithaa, chennai floods, Pondicherry elections, Pondicherry assembly elections, chennai news, Pondicherry news, india news">
  <meta name="keywords" content="Pondicherry polls, Pondicherry assembly polls, jayalalithaa, chennai floods, Pondicherry elections, Pondicherry assembly elections, chennai news, Pondicherry news, india news">
  <link href="css/bootstrap.css" rel="stylesheet">    
  <link href="css/basic.css" rel="stylesheet">
  <link href="css/feature.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" media="screen" href="http://fortawesome.github.io/Font-Awesome/assets/font-awesome/css/font-awesome.css">
  <link rel="stylesheet" type="text/css" media="screen" href="http://netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css">
  <link href="css/custom-styles.css" rel="stylesheet">
  <link href="css/jquery-ui.css" rel="stylesheet">
  <link rel="shortcut icon" href="/./images/logo.png">
  <link href="//cdn.datatables.net/1.10.9/css/jquery.dataTables.min.css" rel="stylesheet" />
  <script type="text/javascript" src="js/jquery.min.js"></script>  
  <script type="text/javascript" src="js/d3.js"></script>
  <script type="text/javascript" src="js/sankey.js"></script>
  <script type="text/javascript" src="/./javascripts/google-analyitcs.js"></script>  
  <script type="text/javascript" src="js/bootstrap.min.js"></script>    
  <script type="text/javascript" src="js/underscore-min.js" ></script>
  <script type="text/javascript" src="js/jquery-ui-1.10.3.min.js" ></script>
  <script type="text/javascript" src="js/jquery.dataTables.min.js"></script>  
  <meta property="og:title"  content="ASSEMBLY ELECTIONS 1964 - 2016(Pondicherry)" /> 
  <meta property="og:url"   content="http://data-analytics.github.io/Election_Data/pondi.html" /> 
  <meta property="og:description" content="Pondicherry Assembly Election Results 2016 'A visual guide to the check out the history of Pondicherry Assembly elections, from 1964 until 2016'" /> 
  <meta property="og:image" content="images/images.png" /> 
  <html itemscope itemtype="http://schema.org/Blog">
  <meta itemprop="description" content="Pondicherry Assembly Election Results 2016 'A visual guide to the check out the history of Pondicherry Assembly elections, from 1964 until 2016'">
  <meta itemprop="name" content="ASSEMBLY ELECTIONS 1964 - 2016 (Pondicherry)">
  <meta itemprop="image" content="images/images.png">
  <title>Assembly Elections 1964 - 2016 (Pondicherry)</title>
</head>
<body>
      <div class="container-fluid header-style">
        <div class="container">
            <div class="row">
                <div class="col-md-12 header-logo">
                    
                <p class="heading-part"><a class="fa fa-home fa-2" id="home" href="/./"></a>Pondicherry Assembly Election Results 2016 'A visual guide to the check out the history of Pondicherry Assembly elections from 1964 until 2016</p>
                <p class="synopsis">This interactive map will bring you minute-by-minute results, from the national standings down to individual candidates and constituencies.Our Analytics And Advanced Visualization helps to bring in-depth Analysis.</p>
                <p class="synopsis">It aims to make the past 15  Assembly elections in Pondicherry  more easily understandable for the lay audience, allowing them to explore and discover insights.</p>

                <p align="center"><span class='st_facebook_hcount' displayText='Facebook'></span>
                <span class='st_twitter_hcount' displayText='Tweet'></span>
                <span class='st_linkedin_hcount' displayText='LinkedIn'></span>
                <span class='st_googleplus_hcount' displayText='Google'></span>
                <span class='st_email_hcount' displayText='Email'></span></p>
                
                </div>
                
            </div>
        </div>
    </div>
        

    <div id="overall_view">
    <div class="container-fluid">
    <div class="container">
            <div class="row">
            <div class="col-md-12 panel panel-default">
            <div class="row">
                <div class="col-md-12 panel-heading1">
                    <h2>Assembly Election Results <i class="year_tag"></i> Party Standings</h2>
                </div>    
           </div>
           <div class="row">           
                <div class=" col-md-12 panel-body">
                    
                      <div class="dropdown header_year">
                        <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Select Year</button>
                            <ul class="dropdown-menu" role="menu">
                                
                                    <li data-year="2016" id="2016"><a href="?year=2016#overall_view">2016 results</a></li>
                                    <li data-year="2011" id="2011"><a href="?year=2011#overall_view">2011 results</a></li>
                                    <li data-year="2006" id="2006"><a href="?year=2006#overall_view">2006 results</a></li>
                                    <li data-year="2001" id="2001"><a href="?year=2001#overall_view">2001 results</a></li>
                                    <li data-year="1996" id="1996"><a href="?year=1996#overall_view">1996 results</a></li>                            
                                    <li data-year="1991" id="1991"><a href="?year=1991#overall_view">1991 results</a></li>
                                    <li data-year="1990" id="1990"><a href="?year=1990#overall_view">1990 results</a></li>
                                    <li data-year="1985" id="1985"><a href="?year=1985#overall_view">1985 results</a></li>
                                    <li data-year="1980" id="1980"><a href="?year=1980#overall_view">1980 results</a></li>
                                    <li data-year="1977" id="1977"><a href="?year=1977#overall_view">1977 results</a></li>
                                    <li data-year="1974" id="1974"><a href="?year=1974#overall_view">1974 results</a></li>
                                    <li data-year="1969" id="1969"><a href="?year=1969#overall_view">1969 results</a></li>
                                    <li data-year="1964" id="1964"><a href="?year=1964#overall_view">1964 results</a></li>        
                                    
                                    
                              </ul>
                      </div>
                    <br/><br/>
                    <div class="row">
                    <div class="col-md-2"></div> 
                    <div class="col-md-8"> 
                     <div class="overall_view_report">  
                     </div>
                    </div>
                    <div class="col-md-2"></div> 
                    </div>
                </div>
            </div>
            </div>
            </div>
    </div>
    </div>
    </div>


    <div class="container-fluid">
    <div class="container">
            <div class="row">
            <div class="col-md-12 panel panel-default">
            <div class="row">
                <div class="col-md-12 panel-heading1">
                    <h2>Assembly Elections 1964 - 2016(Pondicherry)</h2>
                </div>    
           </div>
           <div class="row">           
                <div class=" col-md-12 panel-body">
                     <div class="stacked_bar">  
                       <svg data-height="0.54" viewBox="0 0 1200 25" style="width: 100%;" xmlns="http://www.w3.org/2000/svg" xlink:xlink="http://www.w3.org/1999/xlink" version="1.1">
                          <g class="headers" transform="translate(80,0)">
                              <rect class="party-legend" data-party="DMK" data-highlight="[data-party=DMK]" data-toggle="highlight" x="0.0" width="67.1428571429" height="20" fill="#c0392b"></rect>
                              <text x="33.5714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">DMK</text>
                            
                              <rect class="party-legend" data-party="ADMK" data-highlight="[data-party=ADMK]" data-toggle="highlight" x="67.1428571429" width="67.1428571429" height="20" fill="#b2d33c"></rect>
                              <text x="100.714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#000">ADMK</text>
                            
                              <rect class="party-legend" data-party="INC" data-highlight="[data-party=INC]" data-toggle="highlight" x="134.285714286" width="67.1428571429" height="20" fill="#3498DB"></rect>
                              <text x="167.857142857" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">INC</text>
                            
                              <rect class="party-legend" data-party="CPM" data-highlight="[data-party=CPM]" data-toggle="highlight" x="201.428571429" width="67.1428571429" height="20" fill="#ff5757"></rect>
                              <text x="235.0" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">CPM</text>
                            
                              <rect class="party-legend" data-party="TMC(M)" data-highlight="[data-party=TMC(M)]" data-toggle="highlight" x="268.571428571" width="67.1428571429" height="20" fill="#4747ff"></rect>
                              <text x="302.142857143" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">TMC(M)</text>

                              <rect class="party-legend" data-party="OTH" data-highlight="[data-party=OTH]" data-toggle="highlight" x="335.714285714" width="67.1428571429" height="20" fill="#222"></rect>
                              <text x="369.285714286" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">Others</text>
                            
                              <rect class="party-legend" data-party="CPI" data-highlight="[data-party=CPI]" data-toggle="highlight" x="402.857142857" width="67.1428571429" height="20" fill="#ff5757"></rect>
                              <text x="436.428571429" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">CPI</text>
                            
                              <rect class="party-legend" data-party="PMK" data-highlight="[data-party=PMK]" data-toggle="highlight" x="470.0" width="67.1428571429" height="20" fill="#d35400"></rect>
                              <text x="503.571428571" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">PMK</text>
                            
                              <rect class="party-legend" data-party="DMDK" data-highlight="[data-party=DMDK]" data-toggle="highlight" x="537.142857143" width="67.1428571429" height="20" fill="#f1c40f"></rect>
                              <text x="570.714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#000">DMDK</text>
                            
                              <rect class="party-legend" data-party="NCO" data-highlight="[data-party=NCO]" data-toggle="highlight" x="604.285714286" width="67.1428571429" height="20" fill="#1f77b4"></rect>
                              <text x="637.857142857" y="10.0" text-anchor="middle" dy=".35em" fill="#000">NCO</text>
                            
                              <rect class="party-legend" data-party="JNP" data-highlight="[data-party=JNP]" data-toggle="highlight" x="671.428571429" width="67.1428571429" height="20" fill="#9A9E56"></rect>
                              <text x="705.0" y="10.0" text-anchor="middle" dy=".35em" fill="#000">JNP</text>
                            
                              <rect class="party-legend" data-party="MDMK" data-highlight="[data-party=MDMK]" data-toggle="highlight" x="738.571428571" width="67.1428571429" height="20" fill="#9b59b6"></rect>
                              <text x="772.142857143" y="10.0" text-anchor="middle" dy=".35em" fill="#000">MDMK</text>
                            
                              <rect class="party-legend" data-party="IND" data-highlight="[data-party=IND]" data-toggle="highlight" x="805.714285714" width="67.1428571429" height="20" fill="#bdc3c7"></rect>
                              <text x="839.285714286" y="10.0" text-anchor="middle" dy=".35em" fill="#000">IND</text>
                            
                              <rect class="party-legend" data-party="BJP" data-highlight="[data-party=BJP]" data-toggle="highlight" x="872.857142857" width="67.1428571429" height="20" fill="#ff7f0e"></rect>
                              <text x="906.428571429" y="10.0" text-anchor="middle" dy=".35em" fill="#000">BJP</text>
                              
                              <rect class="party-legend" data-party="AINRC" data-highlight="[data-party=AINRC]" data-toggle="highlight" x="940" width="67.1428571429" height="20" fill="#B78332"></rect>
                              <text x="973.571428572" y="10.0" text-anchor="middle" dy=".35em" fill="#000">AINRC</text>    
                          </g>                                  
                        </svg>    
                          </div>
                </div>
            </div>
            </div>
            </div>
    </div>
    </div>


    <div class="container-fluid">
    <div class="container">
            <div class="row">
            <div class="col-md-12 panel panel-default">
            <div class="row">
                <div class="col-md-12 panel-heading1">
                    <h2>Assembly Elections 1964 - 2016 (Vote Comparison)</h2>
                </div>    
           </div>
           <div class="row">           
                <div class=" col-md-12 panel-body">
                     <div class="multi_sparkline"> 
                        <div class="nytg-navBar" align="right">
                            <ul align="center" class="nytg-navigation clearfix" style="list-style-type:none">
                                <li id="count_votes" class="selected" selected>votes count</li>
                                <li id="percent_votes">votes percent </li>
                            </ul>
                        </div>                        
                       <svg data-height="0.54" viewBox="0 0 1200 25" style="width: 100%;" xmlns="http://www.w3.org/2000/svg" xlink:xlink="http://www.w3.org/1999/xlink" version="1.1">
                          <g class="headers" transform="translate(80,0)">
                                                          <rect class="party-legend" data-party="DMK" data-highlight="[data-party=DMK]" data-toggle="highlight" x="0.0" width="67.1428571429" height="20" fill="#c0392b"></rect>
                              <text x="33.5714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">DMK</text>
                            
                              <rect class="party-legend" data-party="ADMK" data-highlight="[data-party=ADMK]" data-toggle="highlight" x="67.1428571429" width="67.1428571429" height="20" fill="#b2d33c"></rect>
                              <text x="100.714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#000">ADMK</text>
                            
                              <rect class="party-legend" data-party="INC" data-highlight="[data-party=INC]" data-toggle="highlight" x="134.285714286" width="67.1428571429" height="20" fill="#3498DB"></rect>
                              <text x="167.857142857" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">INC</text>
                            
                              <rect class="party-legend" data-party="CPM" data-highlight="[data-party=CPM]" data-toggle="highlight" x="201.428571429" width="67.1428571429" height="20" fill="#ff5757"></rect>
                              <text x="235.0" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">CPM</text>
                            
                              <rect class="party-legend" data-party="TMC(M)" data-highlight="[data-party=TMC(M)]" data-toggle="highlight" x="268.571428571" width="67.1428571429" height="20" fill="#4747ff"></rect>
                              <text x="302.142857143" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">TMC(M)</text>

                              <rect class="party-legend" data-party="OTH" data-highlight="[data-party=OTH]" data-toggle="highlight" x="335.714285714" width="67.1428571429" height="20" fill="#222"></rect>
                              <text x="369.285714286" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">Others</text>
                            
                              <rect class="party-legend" data-party="CPI" data-highlight="[data-party=CPI]" data-toggle="highlight" x="402.857142857" width="67.1428571429" height="20" fill="#ff5757"></rect>
                              <text x="436.428571429" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">CPI</text>
                            
                              <rect class="party-legend" data-party="PMK" data-highlight="[data-party=PMK]" data-toggle="highlight" x="470.0" width="67.1428571429" height="20" fill="#d35400"></rect>
                              <text x="503.571428571" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">PMK</text>
                            
                              <rect class="party-legend" data-party="DMDK" data-highlight="[data-party=DMDK]" data-toggle="highlight" x="537.142857143" width="67.1428571429" height="20" fill="#f1c40f"></rect>
                              <text x="570.714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#000">DMDK</text>
                            
                              <rect class="party-legend" data-party="NCO" data-highlight="[data-party=NCO]" data-toggle="highlight" x="604.285714286" width="67.1428571429" height="20" fill="#1f77b4"></rect>
                              <text x="637.857142857" y="10.0" text-anchor="middle" dy=".35em" fill="#000">NCO</text>
                            
                              <rect class="party-legend" data-party="JNP" data-highlight="[data-party=JNP]" data-toggle="highlight" x="671.428571429" width="67.1428571429" height="20" fill="#9A9E56"></rect>
                              <text x="705.0" y="10.0" text-anchor="middle" dy=".35em" fill="#000">JNP</text>
                            
                              <rect class="party-legend" data-party="MDMK" data-highlight="[data-party=MDMK]" data-toggle="highlight" x="738.571428571" width="67.1428571429" height="20" fill="#9b59b6"></rect>
                              <text x="772.142857143" y="10.0" text-anchor="middle" dy=".35em" fill="#000">MDMK</text>
                            
                              <rect class="party-legend" data-party="IND" data-highlight="[data-party=IND]" data-toggle="highlight" x="805.714285714" width="67.1428571429" height="20" fill="#bdc3c7"></rect>
                              <text x="839.285714286" y="10.0" text-anchor="middle" dy=".35em" fill="#000">IND</text>
                            
                              <rect class="party-legend" data-party="BJP" data-highlight="[data-party=BJP]" data-toggle="highlight" x="872.857142857" width="67.1428571429" height="20" fill="#ff7f0e"></rect>
                              <text x="906.428571429" y="10.0" text-anchor="middle" dy=".35em" fill="#000">BJP</text>
                              
                              <rect class="party-legend" data-party="AINRC" data-highlight="[data-party=AINRC]" data-toggle="highlight" x="940" width="67.1428571429" height="20" fill="#B78332"></rect>
                              <text x="973.571428572" y="10.0" text-anchor="middle" dy=".35em" fill="#000">AINRC</text>    
                              
                            </svg>
                          </g>    
                          </div>
                </div>
            </div>
            </div>
            </div>
    </div>
    </div>    
        
    <div id="individual">
    <div class="container-fluid">
    <div class="container">
            <div class="row">
            <div class="col-md-12 panel panel-default">
            <div class="row">
                <div class="col-md-12 panel-heading1">
                    <h2>Assembly Elections View By Individual Elections for <i class="year_tag"></i></h2>
                </div>
           </div>
           
           <div class="row">
                <div class=" col-md-12 panel-body">
            
                      <div class="dropdown header_year">
                        <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Select Year</button>
                            <ul class="dropdown-menu" role="menu">
                                
                                    <li data-year="2016" id="2016"><a href="?year=2016#individual">2016 results</a></li>
                                    <li data-year="2011" id="2011"><a href="?year=2011#individual">2011 results</a></li>
                                    <li data-year="2006" id="2006"><a href="?year=2006#individual">2006 results</a></li>
                                    <li data-year="2001" id="2001"><a href="?year=2001#individual">2001 results</a></li>
                                    <li data-year="1996" id="1996"><a href="?year=1996#individual">1996 results</a></li>                            
                                    <li data-year="1991" id="1991"><a href="?year=1991#individual">1991 results</a></li>
                                    <li data-year="1990" id="1990"><a href="?year=1990#individual">1990 results</a></li>
                                    <li data-year="1985" id="1985"><a href="?year=1985#individual">1985 results</a></li>
                                    <li data-year="1980" id="1980"><a href="?year=1980#individual">1980 results</a></li>
                                    <li data-year="1977" id="1977"><a href="?year=1977#individual">1977 results</a></li>
                                    <li data-year="1974" id="1974"><a href="?year=1974#individual">1974 results</a></li>
                                    <li data-year="1969" id="1969"><a href="?year=1969#individual">1969 results</a></li>
                                    <li data-year="1964" id="1964"><a href="?year=1964#individual">1964 results</a></li>        
                                    
                                    
                              </ul>
                      </div>
                          <p class="form-inline header_form" >
                        <label align="left" >Search:</label>
                        <input type="text" class="search" placeholder="eg: karaikal">
                       </p>
                        
                       
                     <div class="chart">  
                     
                       <svg data-height="0.54" viewBox="0 0 1200 25" style="width: 100%;" xmlns="http://www.w3.org/2000/svg" xlink:xlink="http://www.w3.org/1999/xlink" version="1.1">
                          <g class="headers" transform="translate(80,0)">
                              <rect class="party-legend" data-party="DMK" data-highlight="[data-party=DMK]" data-toggle="highlight" x="0.0" width="67.1428571429" height="20" fill="#c0392b"></rect>
                              <text x="33.5714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">DMK</text>
                            
                              <rect class="party-legend" data-party="ADMK" data-highlight="[data-party=ADMK]" data-toggle="highlight" x="67.1428571429" width="67.1428571429" height="20" fill="#b2d33c"></rect>
                              <text x="100.714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#000">ADMK</text>
                            
                              <rect class="party-legend" data-party="INC" data-highlight="[data-party=INC]" data-toggle="highlight" x="134.285714286" width="67.1428571429" height="20" fill="#3498DB"></rect>
                              <text x="167.857142857" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">INC</text>
                            
                              <rect class="party-legend" data-party="CPM" data-highlight="[data-party=CPM]" data-toggle="highlight" x="201.428571429" width="67.1428571429" height="20" fill="#ff5757"></rect>
                              <text x="235.0" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">CPM</text>
                            
                              <rect class="party-legend" data-party="TMC(M)" data-highlight="[data-party=TMC(M)]" data-toggle="highlight" x="268.571428571" width="67.1428571429" height="20" fill="#4747ff"></rect>
                              <text x="302.142857143" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">TMC(M)</text>

                              <rect class="party-legend" data-party="OTH" data-highlight="[data-party=OTH]" data-toggle="highlight" x="335.714285714" width="67.1428571429" height="20" fill="#222"></rect>
                              <text x="369.285714286" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">Others</text>
                            
                              <rect class="party-legend" data-party="CPI" data-highlight="[data-party=CPI]" data-toggle="highlight" x="402.857142857" width="67.1428571429" height="20" fill="#ff5757"></rect>
                              <text x="436.428571429" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">CPI</text>
                            
                              <rect class="party-legend" data-party="PMK" data-highlight="[data-party=PMK]" data-toggle="highlight" x="470.0" width="67.1428571429" height="20" fill="#d35400"></rect>
                              <text x="503.571428571" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">PMK</text>
                            
                              <rect class="party-legend" data-party="DMDK" data-highlight="[data-party=DMDK]" data-toggle="highlight" x="537.142857143" width="67.1428571429" height="20" fill="#f1c40f"></rect>
                              <text x="570.714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#000">DMDK</text>
                            
                              <rect class="party-legend" data-party="NCO" data-highlight="[data-party=NCO]" data-toggle="highlight" x="604.285714286" width="67.1428571429" height="20" fill="#1f77b4"></rect>
                              <text x="637.857142857" y="10.0" text-anchor="middle" dy=".35em" fill="#000">NCO</text>
                            
                              <rect class="party-legend" data-party="JNP" data-highlight="[data-party=JNP]" data-toggle="highlight" x="671.428571429" width="67.1428571429" height="20" fill="#9A9E56"></rect>
                              <text x="705.0" y="10.0" text-anchor="middle" dy=".35em" fill="#000">JNP</text>
                            
                              <rect class="party-legend" data-party="MDMK" data-highlight="[data-party=MDMK]" data-toggle="highlight" x="738.571428571" width="67.1428571429" height="20" fill="#9b59b6"></rect>
                              <text x="772.142857143" y="10.0" text-anchor="middle" dy=".35em" fill="#000">MDMK</text>
                            
                              <rect class="party-legend" data-party="IND" data-highlight="[data-party=IND]" data-toggle="highlight" x="805.714285714" width="67.1428571429" height="20" fill="#bdc3c7"></rect>
                              <text x="839.285714286" y="10.0" text-anchor="middle" dy=".35em" fill="#000">IND</text>
                            
                              <rect class="party-legend" data-party="BJP" data-highlight="[data-party=BJP]" data-toggle="highlight" x="872.857142857" width="67.1428571429" height="20" fill="#ff7f0e"></rect>
                              <text x="906.428571429" y="10.0" text-anchor="middle" dy=".35em" fill="#000">BJP</text>
                              
                              <rect class="party-legend" data-party="AINRC" data-highlight="[data-party=AINRC]" data-toggle="highlight" x="940" width="67.1428571429" height="20" fill="#B78332"></rect>
                              <text x="973.571428572" y="10.0" text-anchor="middle" dy=".35em" fill="#000">AINRC</text>    
                          </g>                                  
                        </svg>
                        <div class="tree_map"></div>
                        </div>
                     </div>
                </div>
            </div>
            </div>
            </div>
    </div>
    </div>
    
    <div id="perConstituency">
    
    <div class="container-fluid detail_display">
    <div class="container">
            <div class="row">
            <div class="col-md-12 panel panel-default">
            <div class="row">
                <div class="col-md-12 panel-heading1">
                    <h2 class="headers_constituency">Assembly Elections year <i class="year_tag"></i> for Constituency<i class="constituency_tag"></i></h2>
                </div>    
           </div>
           <div class="row">           
                <div class=" col-md-12 panel-body">
                     <div class="chart">  
                       <svg data-height="0.54" viewBox="0 0 1200 25" style="width: 100%;" xmlns="http://www.w3.org/2000/svg" xlink:xlink="http://www.w3.org/1999/xlink" version="1.1">
                          <g class="headers" transform="translate(80,0)">
                              <rect class="party-legend" data-party="DMK" data-highlight="[data-party=DMK]" data-toggle="highlight" x="0.0" width="67.1428571429" height="20" fill="#c0392b"></rect>
                              <text x="33.5714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">DMK</text>
                            
                              <rect class="party-legend" data-party="ADMK" data-highlight="[data-party=ADMK]" data-toggle="highlight" x="67.1428571429" width="67.1428571429" height="20" fill="#b2d33c"></rect>
                              <text x="100.714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#000">ADMK</text>
                            
                              <rect class="party-legend" data-party="INC" data-highlight="[data-party=INC]" data-toggle="highlight" x="134.285714286" width="67.1428571429" height="20" fill="#3498DB"></rect>
                              <text x="167.857142857" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">INC</text>
                            
                              <rect class="party-legend" data-party="CPM" data-highlight="[data-party=CPM]" data-toggle="highlight" x="201.428571429" width="67.1428571429" height="20" fill="#ff5757"></rect>
                              <text x="235.0" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">CPM</text>
                            
                              <rect class="party-legend" data-party="TMC(M)" data-highlight="[data-party=TMC(M)]" data-toggle="highlight" x="268.571428571" width="67.1428571429" height="20" fill="#4747ff"></rect>
                              <text x="302.142857143" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">TMC(M)</text>

                              <rect class="party-legend" data-party="OTH" data-highlight="[data-party=OTH]" data-toggle="highlight" x="335.714285714" width="67.1428571429" height="20" fill="#222"></rect>
                              <text x="369.285714286" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">Others</text>
                            
                              <rect class="party-legend" data-party="CPI" data-highlight="[data-party=CPI]" data-toggle="highlight" x="402.857142857" width="67.1428571429" height="20" fill="#ff5757"></rect>
                              <text x="436.428571429" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">CPI</text>
                            
                              <rect class="party-legend" data-party="PMK" data-highlight="[data-party=PMK]" data-toggle="highlight" x="470.0" width="67.1428571429" height="20" fill="#d35400"></rect>
                              <text x="503.571428571" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">PMK</text>
                            
                              <rect class="party-legend" data-party="DMDK" data-highlight="[data-party=DMDK]" data-toggle="highlight" x="537.142857143" width="67.1428571429" height="20" fill="#f1c40f"></rect>
                              <text x="570.714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#000">DMDK</text>
                            
                              <rect class="party-legend" data-party="NCO" data-highlight="[data-party=NCO]" data-toggle="highlight" x="604.285714286" width="67.1428571429" height="20" fill="#1f77b4"></rect>
                              <text x="637.857142857" y="10.0" text-anchor="middle" dy=".35em" fill="#000">NCO</text>
                            
                              <rect class="party-legend" data-party="JNP" data-highlight="[data-party=JNP]" data-toggle="highlight" x="671.428571429" width="67.1428571429" height="20" fill="#9A9E56"></rect>
                              <text x="705.0" y="10.0" text-anchor="middle" dy=".35em" fill="#000">JNP</text>
                            
                              <rect class="party-legend" data-party="MDMK" data-highlight="[data-party=MDMK]" data-toggle="highlight" x="738.571428571" width="67.1428571429" height="20" fill="#9b59b6"></rect>
                              <text x="772.142857143" y="10.0" text-anchor="middle" dy=".35em" fill="#000">MDMK</text>
                            
                              <rect class="party-legend" data-party="IND" data-highlight="[data-party=IND]" data-toggle="highlight" x="805.714285714" width="67.1428571429" height="20" fill="#bdc3c7"></rect>
                              <text x="839.285714286" y="10.0" text-anchor="middle" dy=".35em" fill="#000">IND</text>
                            
                              <rect class="party-legend" data-party="BJP" data-highlight="[data-party=BJP]" data-toggle="highlight" x="872.857142857" width="67.1428571429" height="20" fill="#ff7f0e"></rect>
                              <text x="906.428571429" y="10.0" text-anchor="middle" dy=".35em" fill="#000">BJP</text>
                              
                              <rect class="party-legend" data-party="AINRC" data-highlight="[data-party=AINRC]" data-toggle="highlight" x="940" width="67.1428571429" height="20" fill="#B78332"></rect>
                              <text x="973.571428572" y="10.0" text-anchor="middle" dy=".35em" fill="#000">AINRC</text>    
                          </g>                                  
                        </svg>
                        <div class="col-md-4 panel-body">
                        <div class="progress_bar"></div>
                        </div>
                          <div class="col-md-8 panel-body">
                        <div class="horizontal_bar"></div>
                        </div>
                        </div>
                     </div>
                </div>
            </div>
            </div>
            </div>
    </div>
    </div>
    
    <div id="sankeyFlow">
    <div class="container-fluid">
    <div class="container">
          
            <div class="row">
            <div class="col-md-12 panel panel-default">   
            <div class="row">
                <div class="col-md-12 panel-heading1">
                    <h2>Party Transitions Trend to the successive elections<i class="successive_year_tag"></i></h2>
                </div>    
           </div>
           <div class="row">           
                <div class=" col-md-12 panel-body">
                    <div class="dropdown header_year">
                        <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Select Year</button>
                        <ul class="dropdown-menu" role="menu">
                        
                        <li data-year="2011_2016" id="2011_2016"><a href="?flowyear=2011_2016#sankeyFlow">2016 results</a></li>                        
                        <li data-year="2001_2006" id="2001_2006"><a href="?flowyear=2001_2006#sankeyFlow">2006 results</a></li>
                        <li data-year="1996_2001" id="1996_2001"><a href="?flowyear=1996_2001#sankeyFlow">2001 results</a></li>
                        <li data-year="1991_1996" id="1991_1996"><a href="?flowyear=1991_1996#sankeyFlow">1996 results</a></li>                            
                        <li data-year="1990_1991" id="1990_1991"><a href="?flowyear=1990_1991#sankeyFlow">1991 results</a></li>
                        <li data-year="1985_1990" id="1985_1990"><a href="?flowyear=1985_1990#sankeyFlow">1990 results</a></li>
                        <li data-year="1980_1985" id="1980_1985"><a href="?flowyear=1980_1985#sankeyFlow">1985 results</a></li>
                        <li data-year="1977_1980" id="1977_1980"><a href="?flowyear=1977_1980#sankeyFlow">1980 results</a></li>
                        <li data-year="1964_1969" id="1964_1969"><a href="?flowyear=1964_1969#sankeyFlow">1969 results</a></li>
                            
                        </ul>
                    </div>
                    <div  class="sankey_chart">
                       <svg data-height="0.54" viewBox="0 0 1200 40" style="width: 100%;" xmlns="http://www.w3.org/2000/svg" xlink:xlink="http://www.w3.org/1999/xlink" version="1.1">
                          <g class="headers" transform="translate(80,15)">
                              <rect class="party-legend" data-party="DMK" data-highlight="[data-party=DMK]" data-toggle="highlight" x="0.0" width="67.1428571429" height="20" fill="#c0392b"></rect>
                              <text x="33.5714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">DMK</text>
                            
                              <rect class="party-legend" data-party="ADMK" data-highlight="[data-party=ADMK]" data-toggle="highlight" x="67.1428571429" width="67.1428571429" height="20" fill="#b2d33c"></rect>
                              <text x="100.714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#000">ADMK</text>
                            
                              <rect class="party-legend" data-party="INC" data-highlight="[data-party=INC]" data-toggle="highlight" x="134.285714286" width="67.1428571429" height="20" fill="#3498DB"></rect>
                              <text x="167.857142857" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">INC</text>
                            
                              <rect class="party-legend" data-party="CPM" data-highlight="[data-party=CPM]" data-toggle="highlight" x="201.428571429" width="67.1428571429" height="20" fill="#ff5757"></rect>
                              <text x="235.0" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">CPM</text>
                            
                              <rect class="party-legend" data-party="TMC(M)" data-highlight="[data-party=TMC(M)]" data-toggle="highlight" x="268.571428571" width="67.1428571429" height="20" fill="#4747ff"></rect>
                              <text x="302.142857143" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">TMC(M)</text>

                              <rect class="party-legend" data-party="OTH" data-highlight="[data-party=OTH]" data-toggle="highlight" x="335.714285714" width="67.1428571429" height="20" fill="#222"></rect>
                              <text x="369.285714286" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">Others</text>
                            
                              <rect class="party-legend" data-party="CPI" data-highlight="[data-party=CPI]" data-toggle="highlight" x="402.857142857" width="67.1428571429" height="20" fill="#ff5757"></rect>
                              <text x="436.428571429" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">CPI</text>
                            
                              <rect class="party-legend" data-party="PMK" data-highlight="[data-party=PMK]" data-toggle="highlight" x="470.0" width="67.1428571429" height="20" fill="#d35400"></rect>
                              <text x="503.571428571" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">PMK</text>
                            
                              <rect class="party-legend" data-party="DMDK" data-highlight="[data-party=DMDK]" data-toggle="highlight" x="537.142857143" width="67.1428571429" height="20" fill="#f1c40f"></rect>
                              <text x="570.714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#000">DMDK</text>
                            
                              <rect class="party-legend" data-party="NCO" data-highlight="[data-party=NCO]" data-toggle="highlight" x="604.285714286" width="67.1428571429" height="20" fill="#1f77b4"></rect>
                              <text x="637.857142857" y="10.0" text-anchor="middle" dy=".35em" fill="#000">NCO</text>
                            
                              <rect class="party-legend" data-party="JNP" data-highlight="[data-party=JNP]" data-toggle="highlight" x="671.428571429" width="67.1428571429" height="20" fill="#9A9E56"></rect>
                              <text x="705.0" y="10.0" text-anchor="middle" dy=".35em" fill="#000">JNP</text>
                            
                              <rect class="party-legend" data-party="MDMK" data-highlight="[data-party=MDMK]" data-toggle="highlight" x="738.571428571" width="67.1428571429" height="20" fill="#9b59b6"></rect>
                              <text x="772.142857143" y="10.0" text-anchor="middle" dy=".35em" fill="#000">MDMK</text>
                            
                              <rect class="party-legend" data-party="IND" data-highlight="[data-party=IND]" data-toggle="highlight" x="805.714285714" width="67.1428571429" height="20" fill="#bdc3c7"></rect>
                              <text x="839.285714286" y="10.0" text-anchor="middle" dy=".35em" fill="#000">IND</text>
                            
                              <rect class="party-legend" data-party="BJP" data-highlight="[data-party=BJP]" data-toggle="highlight" x="872.857142857" width="67.1428571429" height="20" fill="#ff7f0e"></rect>
                              <text x="906.428571429" y="10.0" text-anchor="middle" dy=".35em" fill="#000">BJP</text>
                              
                              <rect class="party-legend" data-party="AINRC" data-highlight="[data-party=AINRC]" data-toggle="highlight" x="940" width="67.1428571429" height="20" fill="#B78332"></rect>
                              <text x="973.571428572" y="10.0" text-anchor="middle" dy=".35em" fill="#000">AINRC</text>    
                          </g>                                  
                        </svg>
                    </div>
                </div>
          </div>
            
            </div>
            </div>
            
    
    </div>
    </div>
    </div>    
    
    
    <div id="party_Trend">
        <div class="container-fluid">
        <div class="container">
          
            <div class="row">
            <div class="col-md-12 panel panel-default">   
            <div class="row">
                <div class="col-md-12 panel-heading1">
                    <h2>party wise performance trend <i class="year_tag"></i></h2>
                </div>    
           </div>
           <div class="row">           
                <div class=" col-md-12 panel-body">

                          <div class="dropdown header_year">
                        <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Select Year</button>
                            <ul class="dropdown-menu" role="menu">


                                    <li data-year="2016" id="2016_flow"><a href="?year=2016#party_Trend">2016 results</a></li>
                                    <li data-year="2011" id="2011_flow"><a href="?year=2011#party_Trend">2011 results</a></li>
                                    <li data-year="2006" id="2006_flow"><a href="?year=2006#party_Trend">2006 results</a></li>
                                    <li data-year="2001" id="2001_flow"><a href="?year=2001#party_Trend">2001 results</a></li>
                                    <li data-year="1996" id="1996_flow"><a href="?year=1996#party_Trend">1996 results</a></li>                            
                                    <li data-year="1991" id="1991_flow"><a href="?year=1991#party_Trend">1991 results</a></li>
                                    <li data-year="1990" id="1990_flow"><a href="?year=1990#party_Trend">1990 results</a></li>
                                    <li data-year="1985" id="1985_flow"><a href="?year=1985#party_Trend">1985 results</a></li>
                                    <li data-year="1980" id="1980_flow"><a href="?year=1980#party_Trend">1980 results</a></li>
                                    <li data-year="1977" id="1977_flow"><a href="?year=1977#party_Trend">1977 results</a></li>
                                    <li data-year="1974" id="1974_flow"><a href="?year=1974#party_Trend">1974 results</a></li>
                                    <li data-year="1969" id="1969_flow"><a href="?year=1969#party_Trend">1969 results</a></li>
                                    <li data-year="1964" id="1964_flow"><a href="?year=1964#party_Trend">1964 results</a></li>        
                                    
                              </ul>
                      </div>
                      
                         <svg data-height="0.54" viewBox="0 0 1200 40" style="width: 100%;" xmlns="http://www.w3.org/2000/svg" xlink:xlink="http://www.w3.org/1999/xlink" version="1.1">
                          <g class="headers" transform="translate(80,15)">
                              <rect class="party-legend" data-party="DMK" data-highlight="[data-party=DMK]" data-toggle="highlight" x="0.0" width="67.1428571429" height="20" fill="#c0392b"></rect>
                              <text x="33.5714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">DMK</text>
                            
                              <rect class="party-legend" data-party="ADMK" data-highlight="[data-party=ADMK]" data-toggle="highlight" x="67.1428571429" width="67.1428571429" height="20" fill="#b2d33c"></rect>
                              <text x="100.714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#000">ADMK</text>
                            
                              <rect class="party-legend" data-party="INC" data-highlight="[data-party=INC]" data-toggle="highlight" x="134.285714286" width="67.1428571429" height="20" fill="#3498DB"></rect>
                              <text x="167.857142857" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">INC</text>
                            
                              <rect class="party-legend" data-party="CPM" data-highlight="[data-party=CPM]" data-toggle="highlight" x="201.428571429" width="67.1428571429" height="20" fill="#ff5757"></rect>
                              <text x="235.0" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">CPM</text>
                            
                              <rect class="party-legend" data-party="TMC(M)" data-highlight="[data-party=TMC(M)]" data-toggle="highlight" x="268.571428571" width="67.1428571429" height="20" fill="#4747ff"></rect>
                              <text x="302.142857143" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">TMC(M)</text>

                              <rect class="party-legend" data-party="OTH" data-highlight="[data-party=OTH]" data-toggle="highlight" x="335.714285714" width="67.1428571429" height="20" fill="#222"></rect>
                              <text x="369.285714286" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">Others</text>
                            
                              <rect class="party-legend" data-party="CPI" data-highlight="[data-party=CPI]" data-toggle="highlight" x="402.857142857" width="67.1428571429" height="20" fill="#ff5757"></rect>
                              <text x="436.428571429" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">CPI</text>
                            
                              <rect class="party-legend" data-party="PMK" data-highlight="[data-party=PMK]" data-toggle="highlight" x="470.0" width="67.1428571429" height="20" fill="#d35400"></rect>
                              <text x="503.571428571" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">PMK</text>
                            
                              <rect class="party-legend" data-party="DMDK" data-highlight="[data-party=DMDK]" data-toggle="highlight" x="537.142857143" width="67.1428571429" height="20" fill="#f1c40f"></rect>
                              <text x="570.714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#000">DMDK</text>
                            
                              <rect class="party-legend" data-party="NCO" data-highlight="[data-party=NCO]" data-toggle="highlight" x="604.285714286" width="67.1428571429" height="20" fill="#1f77b4"></rect>
                              <text x="637.857142857" y="10.0" text-anchor="middle" dy=".35em" fill="#000">NCO</text>
                            
                              <rect class="party-legend" data-party="JNP" data-highlight="[data-party=JNP]" data-toggle="highlight" x="671.428571429" width="67.1428571429" height="20" fill="#9A9E56"></rect>
                              <text x="705.0" y="10.0" text-anchor="middle" dy=".35em" fill="#000">JNP</text>
                            
                              <rect class="party-legend" data-party="MDMK" data-highlight="[data-party=MDMK]" data-toggle="highlight" x="738.571428571" width="67.1428571429" height="20" fill="#9b59b6"></rect>
                              <text x="772.142857143" y="10.0" text-anchor="middle" dy=".35em" fill="#000">MDMK</text>
                            
                              <rect class="party-legend" data-party="IND" data-highlight="[data-party=IND]" data-toggle="highlight" x="805.714285714" width="67.1428571429" height="20" fill="#bdc3c7"></rect>
                              <text x="839.285714286" y="10.0" text-anchor="middle" dy=".35em" fill="#000">IND</text>
                            
                              <rect class="party-legend" data-party="BJP" data-highlight="[data-party=BJP]" data-toggle="highlight" x="872.857142857" width="67.1428571429" height="20" fill="#ff7f0e"></rect>
                              <text x="906.428571429" y="10.0" text-anchor="middle" dy=".35em" fill="#000">BJP</text>
                              
                              <rect class="party-legend" data-party="AINRC" data-highlight="[data-party=AINRC]" data-toggle="highlight" x="940" width="67.1428571429" height="20" fill="#B78332"></rect>
                              <text x="973.571428572" y="10.0" text-anchor="middle" dy=".35em" fill="#000">AINRC</text>
                            </svg>
                          </g>

                          <div class="party_performance_trend_svg">
                         </div>

                </div>
          </div>
            
            </div>
            </div>
            
    
    </div>
    </div>
    </div>
    
    <div class="container-fluid">
    <div class="container">
          
            <div class="row">
            <div class="col-md-12 panel panel-default">   
            <div class="row">
                <div class="col-md-12 panel-heading1">
                    <h2>Constituency wise party trend 1964 - 2016 (Pondicherry)</h2>
                </div>    
           </div>
           <div class="row">           
                <div class=" col-md-12 panel-body">

                       <svg data-height="0.54" viewBox="0 0 1200 40" style="width: 100%;" xmlns="http://www.w3.org/2000/svg" xlink:xlink="http://www.w3.org/1999/xlink" version="1.1">
                          <g class="headers" transform="translate(80,5)">
                              <rect class="party-legend" data-party="DMK" data-highlight="[data-party=DMK]" data-toggle="highlight" x="0.0" width="67.1428571429" height="20" fill="#c0392b"></rect>
                              <text x="33.5714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">DMK</text>
                            
                              <rect class="party-legend" data-party="ADMK" data-highlight="[data-party=ADMK]" data-toggle="highlight" x="67.1428571429" width="67.1428571429" height="20" fill="#b2d33c"></rect>
                              <text x="100.714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#000">ADMK</text>
                            
                              <rect class="party-legend" data-party="INC" data-highlight="[data-party=INC]" data-toggle="highlight" x="134.285714286" width="67.1428571429" height="20" fill="#3498DB"></rect>
                              <text x="167.857142857" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">INC</text>
                            
                              <rect class="party-legend" data-party="CPM" data-highlight="[data-party=CPM]" data-toggle="highlight" x="201.428571429" width="67.1428571429" height="20" fill="#ff5757"></rect>
                              <text x="235.0" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">CPM</text>
                            
                              <rect class="party-legend" data-party="TMC(M)" data-highlight="[data-party=TMC(M)]" data-toggle="highlight" x="268.571428571" width="67.1428571429" height="20" fill="#4747ff"></rect>
                              <text x="302.142857143" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">TMC(M)</text>

                              <rect class="party-legend" data-party="OTH" data-highlight="[data-party=OTH]" data-toggle="highlight" x="335.714285714" width="67.1428571429" height="20" fill="#222"></rect>
                              <text x="369.285714286" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">Others</text>
                            
                              <rect class="party-legend" data-party="CPI" data-highlight="[data-party=CPI]" data-toggle="highlight" x="402.857142857" width="67.1428571429" height="20" fill="#ff5757"></rect>
                              <text x="436.428571429" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">CPI</text>
                            
                              <rect class="party-legend" data-party="PMK" data-highlight="[data-party=PMK]" data-toggle="highlight" x="470.0" width="67.1428571429" height="20" fill="#d35400"></rect>
                              <text x="503.571428571" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">PMK</text>
                            
                              <rect class="party-legend" data-party="DMDK" data-highlight="[data-party=DMDK]" data-toggle="highlight" x="537.142857143" width="67.1428571429" height="20" fill="#f1c40f"></rect>
                              <text x="570.714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#000">DMDK</text>
                            
                              <rect class="party-legend" data-party="NCO" data-highlight="[data-party=NCO]" data-toggle="highlight" x="604.285714286" width="67.1428571429" height="20" fill="#1f77b4"></rect>
                              <text x="637.857142857" y="10.0" text-anchor="middle" dy=".35em" fill="#000">NCO</text>
                            
                              <rect class="party-legend" data-party="JNP" data-highlight="[data-party=JNP]" data-toggle="highlight" x="671.428571429" width="67.1428571429" height="20" fill="#9A9E56"></rect>
                              <text x="705.0" y="10.0" text-anchor="middle" dy=".35em" fill="#000">JNP</text>
                            
                              <rect class="party-legend" data-party="MDMK" data-highlight="[data-party=MDMK]" data-toggle="highlight" x="738.571428571" width="67.1428571429" height="20" fill="#9b59b6"></rect>
                              <text x="772.142857143" y="10.0" text-anchor="middle" dy=".35em" fill="#000">MDMK</text>
                            
                              <rect class="party-legend" data-party="IND" data-highlight="[data-party=IND]" data-toggle="highlight" x="805.714285714" width="67.1428571429" height="20" fill="#bdc3c7"></rect>
                              <text x="839.285714286" y="10.0" text-anchor="middle" dy=".35em" fill="#000">IND</text>
                            
                              <rect class="party-legend" data-party="BJP" data-highlight="[data-party=BJP]" data-toggle="highlight" x="872.857142857" width="67.1428571429" height="20" fill="#ff7f0e"></rect>
                              <text x="906.428571429" y="10.0" text-anchor="middle" dy=".35em" fill="#000">BJP</text>
                              
                              <rect class="party-legend" data-party="AINRC" data-highlight="[data-party=AINRC]" data-toggle="highlight" x="940" width="67.1428571429" height="20" fill="#B78332"></rect>
                              <text x="973.571428572" y="10.0" text-anchor="middle" dy=".35em" fill="#000">AINRC</text>    
                          </g>                                  
                        </svg>

                          <div class="party_trend">
                         </div>

                </div>
          </div>
            
            </div>
            </div>
            
    
    </div>
    </div>
    
    <div id="detailConstituency">
    
    <div class="container-fluid detail_percent_display">
    <div class="container">
            <div class="row">
            <div class="col-md-12 panel panel-default">
            <div class="row">
                <div class="col-md-12 panel-heading1">
                    <h2 class="details_constituency">Assembly Elections 1964- 2016 for Constituency<i class="constituency_tag_percent"></i></h2>
                </div>    
           </div>
           <div class="row">           
                <div class=" col-md-12 panel-body">
                     <div class="chart">  
                     
                       <svg data-height="0.54" viewBox="0 0 1200 40" style="width: 100%;" xmlns="http://www.w3.org/2000/svg" xlink:xlink="http://www.w3.org/1999/xlink" version="1.1">
                          <g class="headers" transform="translate(80,5)">
                              <rect class="party-legend" data-party="DMK" data-highlight="[data-party=DMK]" data-toggle="highlight" x="0.0" width="67.1428571429" height="20" fill="#c0392b"></rect>
                              <text x="33.5714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">DMK</text>
                            
                              <rect class="party-legend" data-party="ADMK" data-highlight="[data-party=ADMK]" data-toggle="highlight" x="67.1428571429" width="67.1428571429" height="20" fill="#b2d33c"></rect>
                              <text x="100.714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#000">ADMK</text>
                            
                              <rect class="party-legend" data-party="INC" data-highlight="[data-party=INC]" data-toggle="highlight" x="134.285714286" width="67.1428571429" height="20" fill="#3498DB"></rect>
                              <text x="167.857142857" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">INC</text>
                            
                              <rect class="party-legend" data-party="CPM" data-highlight="[data-party=CPM]" data-toggle="highlight" x="201.428571429" width="67.1428571429" height="20" fill="#ff5757"></rect>
                              <text x="235.0" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">CPM</text>
                            
                              <rect class="party-legend" data-party="TMC(M)" data-highlight="[data-party=TMC(M)]" data-toggle="highlight" x="268.571428571" width="67.1428571429" height="20" fill="#4747ff"></rect>
                              <text x="302.142857143" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">TMC(M)</text>

                              <rect class="party-legend" data-party="OTH" data-highlight="[data-party=OTH]" data-toggle="highlight" x="335.714285714" width="67.1428571429" height="20" fill="#222"></rect>
                              <text x="369.285714286" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">Others</text>
                            
                              <rect class="party-legend" data-party="CPI" data-highlight="[data-party=CPI]" data-toggle="highlight" x="402.857142857" width="67.1428571429" height="20" fill="#ff5757"></rect>
                              <text x="436.428571429" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">CPI</text>
                            
                              <rect class="party-legend" data-party="PMK" data-highlight="[data-party=PMK]" data-toggle="highlight" x="470.0" width="67.1428571429" height="20" fill="#d35400"></rect>
                              <text x="503.571428571" y="10.0" text-anchor="middle" dy=".35em" fill="#fff">PMK</text>
                            
                              <rect class="party-legend" data-party="DMDK" data-highlight="[data-party=DMDK]" data-toggle="highlight" x="537.142857143" width="67.1428571429" height="20" fill="#f1c40f"></rect>
                              <text x="570.714285714" y="10.0" text-anchor="middle" dy=".35em" fill="#000">DMDK</text>
                            
                              <rect class="party-legend" data-party="NCO" data-highlight="[data-party=NCO]" data-toggle="highlight" x="604.285714286" width="67.1428571429" height="20" fill="#1f77b4"></rect>
                              <text x="637.857142857" y="10.0" text-anchor="middle" dy=".35em" fill="#000">NCO</text>
                            
                              <rect class="party-legend" data-party="JNP" data-highlight="[data-party=JNP]" data-toggle="highlight" x="671.428571429" width="67.1428571429" height="20" fill="#9A9E56"></rect>
                              <text x="705.0" y="10.0" text-anchor="middle" dy=".35em" fill="#000">JNP</text>
                            
                              <rect class="party-legend" data-party="MDMK" data-highlight="[data-party=MDMK]" data-toggle="highlight" x="738.571428571" width="67.1428571429" height="20" fill="#9b59b6"></rect>
                              <text x="772.142857143" y="10.0" text-anchor="middle" dy=".35em" fill="#000">MDMK</text>
                            
                              <rect class="party-legend" data-party="IND" data-highlight="[data-party=IND]" data-toggle="highlight" x="805.714285714" width="67.1428571429" height="20" fill="#bdc3c7"></rect>
                              <text x="839.285714286" y="10.0" text-anchor="middle" dy=".35em" fill="#000">IND</text>
                            
                              <rect class="party-legend" data-party="BJP" data-highlight="[data-party=BJP]" data-toggle="highlight" x="872.857142857" width="67.1428571429" height="20" fill="#ff7f0e"></rect>
                              <text x="906.428571429" y="10.0" text-anchor="middle" dy=".35em" fill="#000">BJP</text>
                              
                              <rect class="party-legend" data-party="AINRC" data-highlight="[data-party=AINRC]" data-toggle="highlight" x="940" width="67.1428571429" height="20" fill="#B78332"></rect>
                              <text x="973.571428572" y="10.0" text-anchor="middle" dy=".35em" fill="#000">AINRC</text>    
                          </g>                                  
                        </svg>

                        <div class="col-md-12 panel-body">
                            <div class="percent_stackedbar"></div>
                        </div>
                        </div>
                     </div>
                </div>
            </div>
            </div>
            </div>
    </div>
    </div>
    
      <a href="javascript:" id="return-to-top"><i class="icon-chevron-up"></i></a>
<script type="text/javascript">

    $(window).scroll(function() {
        if ($(this).scrollTop() >= 50) {        
            $('#return-to-top').fadeIn(200);    
        } else {
            $('#return-to-top').fadeOut(200);   
        }
    });
    $('#return-to-top').click(function() {     
        $('body,html').animate({
            scrollTop : 0             
        }, 500);
    });
    
function getParameterByName(name, url) {
    if (!url) url = window.location.href;
    name = name.replace(/[\[\]]/g, "\\$&");
    var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
        results = regex.exec(url);
    if (!results) return null;
    if (!results[2]) return '';
    return decodeURIComponent(results[2].replace(/\+/g, " "));
}


color_map = {"ADK(JL)":"#363636","ADK(JR)":"#363636","ADMK":"#b2d33c","AIFB":"#FFAD01","AINRC":"#B78332","AITC":"#4A9F88","AKD":"#363636","BAC":"#A99888","BBC":"#363636","BJP":"#ff7f0e","BJS":"#363636","BLD":"#363636","C(S)":"#363636","CMPKSC":"#363636","CON":"#ff7f0e","CON(S)":"#363636","CPI":"#F27A67","CPI(M)":"#363636","CPM":"#ff5757","CPM(K)":"#363636","DIC":"#363636","DMDK":"#f1c40f","DMK":"#c0392b","DSP(P)":"#363636","DSP(PC)":"#363636","FB":"#363636","FB(S)":"#363636","FBL":"#014BC6","FBL(MG)":"#363636","FBL(RG)":"#363636","FBM":"#363636","GKC":"#363636","GL":"#363636","GNLF":"#363636","GOJAM":"#363636","HMS":"#363636","IC(S)":"#363636","ICS":"#363636","ICS(SCS)":"#363636","IGL":"#363636","IML":"#363636","INC":"#3498DB","INC(U)":"#4A9F88","IND":"#bdc3c7","INL":"#363636","ISP":"#363636","IUML":"#014BC6","JD":"#363636","JD(S)":"#363636","JKP":"#363636","JKP(N)":"#363636","JNP":"#9A9E56","JP":"#363636","JPSS":"#363636","KC":"#363636","KCJ":"#363636","KCM":"#363636","KCP":"#363636","KCS":"#363636","KEC":"#FFAD01","KEC(B)":"#363636","KEC(J)":"#363636","KEC(M)":"#FFAD01","KMPP":"#363636","KRSP":"#363636","KSP":"#363636","LKD":"#363636","LSS":"#363636","MDMK":"#981D97","MFB":"#363636","ML":"#363636","MLO":"#363636","MNMK":"#363636","MUL":"#014BC6","NA":"#363636","NCO":"#1F77B4","NCP":"#363636","NDF":"#363636","NDP":"#363636","NSC":"#363637","Others":"#363636","PF":"#363636","PMC":"#363636","PMK":"#d35400","PML":"#363636","PSP":"#FFD380","PT":"#363636","RCI":"#363636","RCPI(RB)":"#363636","RJD":"#363636","RSP":"#F8F907","RSPK(B)":"#363636","SBP":"#363636","SJD":"#363636","SOP":"#363636","SP":"#363636","SSP":"#1F77B4","SUC":"#363636","SUCI":"#363636","SWA":"#363636","TMC":"#4747ff","TMC(M)":"#4747ff","TMK":"#363636","VCK":"#363636","WBSP":"#363636","WPI":"#363636"};

var countButton = d3.select(document.getElementById('count_votes'));
var percentButton = d3.select(document.getElementById('percent_votes'));

   
function toggleButton(button) {
    button['attr']('class', 'selected');
    if (button == countButton) {
        percentButton['attr']('class', 'unselected');
    } else {
        countButton['attr']('class', 'unselected');
    };
};

flowyear_detail = getParameterByName('flowyear');
year_detail = getParameterByName('year');

acct_no = getParameterByName('acct_no');
cons_id = getParameterByName('cons_id');

if (acct_no == undefined){ $(".detail_display").hide(); }
else{ $(".detail_display").show();}

if (cons_id == undefined){ $(".detail_percent_display").hide(); }
else{ $(".detail_percent_display").show();}
  
if (year_detail == undefined){ year_detail= 2016; }
if (flowyear_detail == undefined){ flowyear_detail= '2011_2016'; }
  
$('#'+year_detail+'').addClass('active');
$(".year_tag").append("("+year_detail+")");

$('#'+year_detail+'_flow').addClass('active');
$('#'+flowyear_detail+'').addClass('active');

$(".successive_year_tag").append("("+flowyear_detail.replace('_', ' to ')+")");

d3.json("overall_py.json", function(data) { 
        
var margin = {top: 20, right: 20, bottom: 35, left: 20},
    width = 1200 - margin.left - margin.right,
    height = 400 - margin.top - margin.bottom;

var x = d3.scale.ordinal()
    .rangeRoundBands([0, width], .2);

var y = d3.scale.linear()
    .range([height, 0]);

var xAxis = d3.svg.axis()
    .scale(x)
    .orient("bottom");

var yAxis = d3.svg.axis()
    .scale(y)
    .orient("left");

var svg = d3.select(".stacked_bar").append("svg")
            .style("width", "100%")
            .attr("data-height","0.54")
            .attr("viewBox","0 0 "+(width + margin.left + margin.right)+" "+(height + margin.top + margin.bottom))
            .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

var party_names = ['INC','DMK','ADMK','AINRC','JNP','CPI','TMC(M)','NCO','PMK','CPM','MDMK','BJP','IND','Others'];

  
 data.forEach(function(d) {
        var y0 = 0;
        d.party = party_names.map(function(name) { return {name: name, y0: y0, y1: y0 += +d[name],value: +d[name],YEAR:d['YEAR']}; });
        d.party.forEach(function(d) { d.y0 /= y0; d.y1 /= y0; d.y0= d.y0*100,d.y1=d.y1*100 });
        d.total = d.party[d.party.length - 1].y1;
  });
    
  x.domain(data.map(function(d) { return d['YEAR']; }));
  y.domain([0, d3.max(data, function(d) { return d.total; })]);

  svg.append("g")
        .attr("class", "x axis")
        .attr("transform", "translate(0," + height + ")")
        .call(xAxis);

  var party = svg.selectAll(".party")
      .data(data)
      .enter().append("g")
      .attr("class", "party")
      .attr("transform", function(d) { return "translate(" + x(d['YEAR']) + ",0)"; });

  party.selectAll("rect")
      .data(function(d) { return d.party; })
      .enter().append("rect")
      .attr("width", x.rangeBand())
      .attr("y", function(d) { return y(d.y1); })
      .attr("height", function(d) { return y(d.y0) - y(d.y1); })
      .style("fill", function(d) { return color_map[d.name] })
      .style("stroke", function(d) { return d3.rgb(color_map[d.name]).darker(); })
      .attr("data-title", function(d) { return d['YEAR']+', '+d.name+' : '+d.value+' seats'; })
      .on("mouseover", function() { d3.select(this).attr("stroke-width", 5);})
      .on("mouseout", function() { d3.select(this).attr("stroke-width", 1);});
      
  party.selectAll(".value")
    .data(function(d) { return d.party; })
    .enter().append("text")
    .attr("class", "value")
    .attr("y", function(d) { return ((y(d.y1)+y(d.y0))/2)-1; })
    .attr("x", x.rangeBand()/2)
    .attr("text-anchor", "middle")
    .style("font-size", "15px")
    .attr("data-title", function(d) { return d['YEAR']+', '+d.name+' : '+d.value+' seats'; })
    .style("fill", function(d) { return (parseInt(color_map[d.name].replace('#', ''), 16) > 0xffffff / 2) ? '#000' : '#fff';})
    .text(function(d) { return (y(d.y0) - y(d.y1))>29 ?d.value:' '; });

  party.selectAll(".name")
    .data(function(d) { return d.party; })
    .enter().append("text")
    .attr("class", "name")
    .attr("y", function(d) { return ((y(d.y1)+y(d.y0))/2)+12; })
    .attr("x", x.rangeBand()/2)
    .attr("text-anchor", "middle")
    .style("font-size", "12px")
    .attr("data-title", function(d) { return d['YEAR']+', '+d.name+' : '+d.value+' seats'; })
    .style("fill", function(d) { return (parseInt(color_map[d.name].replace('#', ''), 16) > 0xffffff / 2) ? '#000' : '#fff';})
    .text(function(d) { return (y(d.y0) - y(d.y1))>29 ?d.name:' '; });

      $("rect").tooltip({container: '.stacked_bar', html: true, placement:'top'});
      $("text").tooltip({container: '.stacked_bar', html: true, placement:'top'});
     
      year_data_set = data.filter(function(d){return (d.YEAR==year_detail) })

      year_data_sets = year_data_set[0].party.filter(function(d){return (d.value>0) })
      
      year_data_sets.sort(function(a, b) { return b.value - a.value; })
      
      heading_colors = []
      year_data_sets.forEach(function(o) {
        heading_colors.push(color_map[o.name])
      })

      max_seats = d3.max(year_data_sets, function(d) { return d.value; }); 
      
      lowresult_data  = d3.select('.overall_view_report')
                                         .selectAll('div')
                                        .data([year_data_sets])
                                        .enter()
                                        .append("div")
                                        .append("table")
                                        .attr("class","table table-condensed party-summary")

                        lowresult_data.append('tbody')
                                .selectAll("tr")
                                .data(function(o) { return o }).enter()
                                .append("tr")
                                .selectAll("td")
                                    .data(function(d,l) { return [d.name,d.value,l+':'+(d.value*100/max_seats).toFixed(2)] }).enter()
                                    .append('td')
                                    .attr('class',function(d) { return d+'s'})
                                    .style("max-width",'10px')
                                    .style("font-size",'15px')
                                    .text(function(o,i) { return i<2? o:'' })
                                    .append('div')
                                    .attr('class',function(d,i) { return i<2? '':'progress'; })
                                    .append('div')
                                    .attr('class','progress-bar progress-bar-striped')
                                    .attr('role','progressbar')
                                    .attr('aria-valuenow','70')
                                    .attr('aria-valuemin','0')
                                    .attr('aria-valuemax','100')
                                    .style('background-color',function(d,i) { return i<2? '':heading_colors[parseInt(d.split(':')[0])]; })
                                    .style('width',function(d,i) { return i<2? '0%':d.split(':')[1]+'%'; });
     
     d3.selectAll('.removed_data').remove();

  });
        
function addThousandsSeparator(t){var a=t;if(parseFloat(t)){t=new String(t);var e=t.split(".");e[0]=e[0].split("").reverse().join("").replace(/(\d{3})(?!$)/g,"$1,").split("").reverse().join(""),a=e.join(".")}return a}
    
d3.csv("assembly_pondi_detail.csv", function(data_csv) {
 
function data_scatter(type_votes){
    
  var data_value_total = d3.nest()
  .key(function(d) { return parseInt(d.YEAR); })
  .rollup(function(d) { 
   return d3.sum(d, function(g) {return g.polled_votes; });
  }).entries(data_csv.filter(function(d){return (d.rank==1) }));

  
   mapper_party = ['INC','DMK','ADMK','AINRC','JNP','CPI','TMC(M)','NCO','PMK','CPM','MDMK','BJP','IND'];
 
   data_mapper_data = data_csv.filter(function(d) { return mapper_party.indexOf(d.PARTY) > -1 })
  
  var data_value = d3.nest()
  .key(function(d) { return parseInt(d.YEAR); })
  .key(function(d) { return d.PARTY;})
  .rollup(function(d) { 
   return d3.sum(d, function(g) {return g.VOTES; });
  }).entries(data_mapper_data);

    percent_mapper = {}
    data_value_total.forEach(function(d) {    
        percent_mapper[d.key]=d.values;
    });
    
    
    dataset    = [];
    mapper_party.forEach(function(k) {
        year_sub_mapper=[]
        data_value.forEach(function(o) {
            o.values.forEach(function(l) {
                if(k==l.key){
                    data_dict ={x:parseInt(o.key),party:k,votes_count:l.values,votes_percent:l.values*100/(percent_mapper[parseInt(o.key)]) }                    
                    data_dict['y'] = data_dict[type_votes]
                    year_sub_mapper.push(data_dict)
                } 
                });
        });
    dataset.push(year_sub_mapper)    
    });
    
    //Width and height
    var width_data = 1050;
    var height_data = 400;
    var padding = 50;
      
    // Define axis ranges & scales               
    var yExtents = d3.extent(d3.merge(dataset), function (d) { return d.y; });
    var xExtents = d3.extent(d3.merge(dataset), function (d) { return d.x; });
         
    var xScale = d3.scale.linear()
           .domain([xExtents[0], xExtents[1]])
           .range([padding, width_data - padding * .5]);

    var yScale = d3.scale.linear()
           .domain([0, yExtents[1]])
           .range([height_data - padding, padding]);


    // Create SVG element
    var multi_svg = d3.select(".multi_sparkline")
        .append("svg")
        .attr("class", "multi_sparkline_svg")
        .attr("width", "100%")
            .attr("data-height","0.54")
            .attr("viewBox","0 0 "+(width_data)+" "+(height_data))
            .attr("xmlns", 'http://www.w3.org/2000/svg')
            .attr("xlink", 'http://www.w3.org/1999/xlink')
            .attr("version", '1.1');

            
            // Define lines
    var line = d3.svg.line()
           .x(function(d) { return x(d.x); })
           .y(function(d) { return y(d.y1, d.y2, d.y3); });

    var pathContainers = multi_svg.selectAll('g.line')
    .data(dataset);

    pathContainers.enter().append('g')
    .attr('class', 'line');
    
    pathContainers.selectAll('path')
    .data(function (d) { return [d]; }) // continues the data from the pathContainer
    .enter().append('path')
      .attr('stroke',function (d) { return color_map[d[0]['party']]; })
      .attr('d', d3.svg.line()
        .x(function (d) { return xScale(d.x); })
        .y(function (d) { return yScale(d.y); })
      );

         // what to do when we mouse over a bubble
    var mouseOn = function() { 
        var circle = d3.select(this);

    // transition to increase size/opacity of bubble
        circle.transition()
        .duration(800).style("opacity", 1)
        .attr("r", 12).ease("elastic");

        // append lines to bubbles that will be used to show the precise data points.
        // translate their location based on margins
        multi_svg.append("g")
            .attr("class", "guide")
        .append("line")
            .attr('stroke-width','1')
            .attr("x1", circle.attr("cx"))
            .attr("x2", circle.attr("cx"))
            .attr("y1", circle.attr("cy"))
            .attr("y2", height_data - padding)
            .style("stroke", circle.style("fill"))
            .transition().delay(200).duration(400).styleTween("opacity", 
                        function() { return d3.interpolate(0, 1); })

        multi_svg.append("g")
            .attr("class", "guide")
        .append("line")
            .attr('stroke-width','1')
            .attr("x1", circle.attr("cx"))
            .attr("x2", padding)
            .attr("y1", circle.attr("cy"))
            .attr("y2", circle.attr("cy"))
            .style("stroke", circle.style("fill"))
            .transition().delay(200).duration(400).styleTween("opacity", 
                        function() { return d3.interpolate(0, 1); });

    // function to move mouseover item to front of SVG stage, in case
    // another bubble overlaps it
        d3.selection.prototype.moveToFront = function() { 
          return this.each(function() { 
            this.parentNode.appendChild(this); 
          }); 
        };

    // skip this functionality for IE9, which doesn't like it
        if (!$.browser.msie) {
            circle.moveToFront();    
            }
    };
    // what happens when we leave a bubble?
    var mouseOff = function() {
        var circle = d3.select(this);

        // go back to original size and opacity
        circle.transition()
        .duration(800).style("opacity", 1)
        .attr("r", 4).ease("elastic");

        // fade out guide lines, then remove them
        d3.selectAll(".guide").transition().duration(100).styleTween("opacity", 
                        function() { return d3.interpolate(1, 0); })
            .remove()
    }; 
    // add circles
    pathContainers.selectAll('circle')
    .data(function (d) { return d; })
    .enter().append('circle')
    .attr('stroke',function (d) { return d3.rgb(color_map[d.party]).darker(); })
    .attr('stroke-width','.5')
    .attr('fill',function (d) { return color_map[d.party]; })
    .attr('data-title',function (d) { return 'Party: '+d.party+'<br/> Year: '+d.x+'<br/> Votes: '+addThousandsSeparator(d.votes_count)+'<br/> Vote percent: '+d.votes_percent.toFixed(2)+'%' })
    .attr('cx', function (d) { return xScale(d.x); })
    .attr('cy', function (d) { return yScale(d.y); })
    .attr('r', 4) 
    .on("mouseover", mouseOn)
    .on("mouseout", mouseOff);
    
       //Define X axis
    var xAxis = d3.svg.axis()
            .scale(xScale)
            .orient("bottom")
            .tickFormat(d3.format("d"))
            .ticks(5);

    //Define Y axis
    var yAxis = d3.svg.axis()
            .scale(yScale)
            .orient("left")
            .tickPadding(12)
            .tickFormat( d3.format(".2s"))
            .ticks(6);

    //Add X axis
    multi_svg.append("g")
    .attr("class", "axis")
    .attr("vector-effect","non-scaling-stroke")
    .attr("transform", "translate(0," + (height_data - padding) + ")")
    .call(xAxis);

    //Add Y axis
    multi_svg.append("g")
    .attr("class", "axis")
    .attr("vector-effect","non-scaling-stroke")    
    .attr("transform", "translate(" + padding + ",0)")
    .call(yAxis);
    
    
    multi_svg.append("text")
        .attr("class", "x labels")
        .attr("text-anchor", "end")
        .attr("x", width_data - padding/2)
        .attr("y", height_data - padding/1.5)
        .style("font-size", "15px")
        .text("year*");

    multi_svg.append("text")
        .attr("class", "y labels")
        .attr("text-anchor", "end")
        .attr("x", -55)
        .attr("y", 58)
        .style("font-size", "15px")
        .attr("dy", ".75em")
        .attr("transform", "rotate(-90)")
        .text(type_votes.replace("_", " ")+'*');
        
      $("circle").tooltip({container: '.multi_sparkline', html: true, placement:'top'});

}

data_scatter('votes_count')

    $('#count_votes').click( function(n) {
        d3.select('.multi_sparkline').select('.multi_sparkline_svg').remove();
        data_scatter('votes_count')
        countButton['attr']('class', 'selected');
        percentButton['attr']('class', null);
    });
    
    $('#percent_votes').click( function(n) {
        d3.select('.multi_sparkline').select('.multi_sparkline_svg').remove();
        data_scatter('votes_percent')
        percentButton['attr']('class', 'selected');
        countButton['attr']('class', null);
    });
    
var margin = {top: 20, right: 20, bottom: 35, left: 20},
    width = 1200 - margin.left - margin.right,
    height = 200 - margin.top - margin.bottom;
    
    var svg = d3.select(".tree_map").append("svg")
            .attr("width", "100%")
            .attr("data-height","0.54")
            .attr("viewBox","0 0 "+(width + margin.left + margin.right)+" "+(height + margin.top + margin.bottom))
            .attr("xmlns", 'http://www.w3.org/2000/svg')
            .attr("xlink", 'http://www.w3.org/1999/xlink')
            .attr("version", '1.1')
            .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
        
    var treemap = d3.layout.treemap()
        .padding(0.5)
        .size([width, height])
        .sticky(true)
        .value(function(d) {return d.polled_votes;})
        .children(function(d) {return d.values;});
        
        data_root = {"key":"treemap"};
        
         data_csv.forEach(function(o) {
          o.votes = parseInt(o.VOTES);
          o.rank = parseInt(o.rank);
          o.year = parseInt(o.YEAR);
          o.polled_votes = parseInt(o.polled_votes);
          });
         
        filter_data_csv = data_csv.filter(function(d){return (d.year==year_detail) & (d.rank==1) });
         
        constituency_list = []
        filter_data_csv.forEach(function (d) {
            d.constituency = d.AC_NAME
            constituency_list.push(d.constituency);
        });
   
        var nest = d3.nest()
        .key(function(d) { return  d.PARTY; })
        .entries(filter_data_csv);
        
    data_root["values"] = nest
    
  var cell = svg.data([data_root]).selectAll("g")
      .data(treemap.nodes)
    .enter().append("a")
      .attr("xlink:href",function(d) { return '?year='+d.year+'&acct_no='+d.AC_NO+"#perConstituency" })
      .append("rect")
      .attr("x", function(d) { return d.x; })
      .attr("y", function(d) { return d.y; })
      .attr("width", function(d) { return d.dx; })
      .attr("height", function(d) { return d.dy; })
      .attr("data-title",function(d) { return 'Constituency : '+d.constituency+' <br/> Candidate : '+d.NAME+' <br/> party : '+d.PARTY+' <br/> percentage : '+(parseFloat((d.votes/d.polled_votes))*100).toFixed(2)+'%  <br/> votes : '+addThousandsSeparator(d.votes)+'<br/> polled votes : '+addThousandsSeparator(d.polled_votes)+'' ;})
      .attr("sub_link",function(d) { return d.constituency+' '+d.PARTY+' '+d.NAME ;})
      .style("fill", function(d) { return color_map[d.PARTY];})
      .style("stroke", '#fff' )
      .style("stroke-width", 0.5);        

      $("rect").tooltip({container: '.tree_map', html: true, placement:'top'});
            
    var lastsearch = '';
    var $box = {};
    
    function add_search_tree(search, chart) {
      var $chart = $(chart);
      $(search).on('keypress, change, keyup', function() {
        var search = $(this).val();
        if (lastsearch != search) {
          lastsearch = search;
          var re = new RegExp( "^" + search, "i" );
          $('rect', $chart).each(function(){
              $(this).css('opacity', re.test($(this).attr("sub_link")) ? '1.0': '0.1');
          });
        }
      });
    }

    add_search_tree('.search', '.tree_map');
    

 var Industry = constituency_list;
    
    $( ".search" ).autocomplete({
    source: function(req, responseFn) {
        var re = $.ui.autocomplete.escapeRegex(req.term);
        var matcher = new RegExp( "^" + re, "i" );
        var a = $.grep( Industry, function(item,index){
            return matcher.test(item);
        });
        responseFn( a );
    }
    
    });


    if (acct_no != undefined){
        data_set = data_csv.filter(function(d){return (d.year==year_detail)& (d.AC_NO==acct_no)& (d.rank<8) })
        deposit_data_set = data_set.filter(function(d){return (d.VOTES>=d.polled_votes/6) })
    
    var margin = {top: 10, right: 30, bottom: 15, left: 100},
                width = 960 - margin.left - margin.right,
                height = 320 - margin.top - margin.bottom;
    
    var horizontal_bar_svg = d3.select(".horizontal_bar").append("svg")
                .attr("width", "100%")
                .attr("data-height","0.54")
                .attr("viewBox","0 0 "+(width)+" "+(height))
                .attr("xmlns", 'http://www.w3.org/2000/svg')
                .attr("xlink", 'http://www.w3.org/1999/xlink')
                .attr("version", '1.1')
                .append("g")
                .attr("transform", "translate(" + margin.left + "," + margin.top/4 + ")");
    
    var constituency_name = '';
    
    data_set.forEach(function(o) {
        constituency_name = o.AC_NAME;
      });
          
    var layers = d3.layout.stack()(['VOTES'].map(function(period) {
        return data_set.map(function(d) {
          return {x: d['rank']+': '+d.PARTY, y: parseFloat(d[period]), votes: parseFloat(d[period]), color : color_map[d.PARTY], party:d.PARTY,constituency:d.AC_NAME,name:d.NAME,polled_votes:d.polled_votes,rank:d.rank };
        });
    }));

   layers[0] = layers[0].sort(function(a, b){ return d3.ascending(a.rank, b.rank); })
   
   var yGroupMax = d3.max(layers, function(layer) { return d3.max(layer, function(d) { return d.y; }); });

    var yScale = d3.scale.ordinal()
        .domain(layers[0].map(function(d) { return d.x; }))
        .rangeRoundBands([0, height- margin.top - margin.bottom], .2);

    var x = d3.scale.linear()
        .domain([0, yGroupMax])
        .range([0, width-(margin.left*5/2)]);

    var color = d3.scale.ordinal()
        .range(["#7aa1c2","#72d8f2","#f3daa4","#66ca9b","#f7f7f7","#f7f7f7"]);
    
    var xAxis = d3.svg.axis()
        .scale(x)
        .orient("bottom")        
        .tickPadding(12)
        .ticks(4);
        
    var yAxis = d3.svg.axis()
        .scale(yScale)
        .tickSize(0)
        .tickPadding(9)
        .orient("left");

    var layer = horizontal_bar_svg.selectAll(".layer")
        .data(layers)
        .enter().append("g")
        .attr("class", "layer");
        
        d3.selectAll(".tick > text")
            .style("font-size", "13px")    
  
  
    var rect = layer.selectAll("rect")
        .data(function(d) { return  d; })
        .enter().append("rect")
        .attr("y", function(d) { return yScale(d.x); })
        .attr("height", yScale.rangeBand())
        .attr("x", function(d) { return  x(d.y0); })
        .attr("width", function(d) { return x(d.y); })
        .style("fill", function(d,i) { return d.color; })
        .style("stroke", function(d,i) { return d3.rgb(d.color).darker(); })
        .attr("data-title",function(d) { return 'Constituency : '+d.constituency+' <br/> Candidate : '+d.name+' <br/> party : '+d.party+' <br/> percentage : '+(parseFloat((d.votes/d.polled_votes))*100).toFixed(2)+'%  <br/> votes : '+addThousandsSeparator(d.votes)+'<br/> polled votes : '+addThousandsSeparator(d.polled_votes)+'' ;})
      
    var rect = layer.selectAll("text")
        .data(function(d) { return  d; })
        .enter().append("text")
        .attr("y", function(d) { return yScale(d.x)+(yScale.rangeBand()*4/5); })
        .attr("x", function(d) { return  x(d.y)+3; })
        .style("text-anchor", "start")
        .attr("fill", "#444")
        .style("font-size","13px")
        .text(function(d) { return addThousandsSeparator(d.votes)+' votes'; })
        
        $(".constituency_tag").append("("+constituency_name+")");

    layer.append("g")
            .attr("class", "guide_deposit")
        .append("line")
            .attr('stroke-width',1)
            .style("stroke", "rgb(99, 99, 99)")
            .attr("x1", x(0))
            .attr("x2", x(yGroupMax))
            .attr("y1", yScale(layers[0][parseInt(deposit_data_set.length)]['x']) - yScale.rangeBand()*.1)
            .attr("y2", yScale(layers[0][parseInt(deposit_data_set.length)]['x']) - yScale.rangeBand()*.1);
            
    horizontal_bar_svg.append("text")
        .attr("x",width-margin.left-margin.left-margin.right)
        .attr("y", yScale(layers[0][parseInt(deposit_data_set.length)]['x']) +13)
        .style("fill", "rgb(99, 99, 99)")
        .style("font-size","13px")
        .style("text-anchor", "end")
        .text("Deposit Threshold");
        
    horizontal_bar_svg.append("g")
        .attr("class", "x axis")
        .attr("transform", "translate(0," + (height -margin.bottom - margin.top) + ")")
        .call(xAxis)
        .selectAll("text").style("text-anchor", "middle")
            .attr("dx", "-.18em")
            .attr("dy", ".15em")
            .style("fill", "rgb(99, 99, 99)")
            .style("font-size","13px")

    horizontal_bar_svg.append("text")
        .attr("x", width-(margin.left*2.5))
        .attr("y", height-(margin.top/2)-35)
        .style("fill", "rgb(99, 99, 99)")
        .style("font-size","13px")
        .style("text-anchor", "end")
        .text("Votes");
              
    horizontal_bar_svg.append("g")
        .attr("class", "y axis")
        .attr("transform", "translate(0,0)")
        .call(yAxis)
        .selectAll("text")
            .style("fill", "rgb(99, 99, 99)")
            .style("font-size","13px");
        
        
      $("rect").tooltip({container: '.horizontal_bar', html: true, placement:'top'});
    
        var twoPi = 2 * Math.PI;
        
        var sub_width = parseInt(d3.select('.progress_bar').style('width'), 10);
    
        var margin = {top: 20, right: 20, bottom: 20, left: 20},
                width = sub_width - margin.left - margin.right,
                height = 250 - margin.top - margin.bottom;
    
        var progress_bar_svg = d3.select(".progress_bar").append("svg")
                .attr("width", "100%")
                .attr("data-height","0.54")
                .attr("viewBox","0 0 "+(width)+" "+(height))
                .attr("xmlns", 'http://www.w3.org/2000/svg')
                .attr("xlink", 'http://www.w3.org/1999/xlink')
                .attr("version", '1.1')
                .append("g")
                .attr("transform", "translate(" + width/2 + "," + height*7/12+ ")");
    
        value_data = data_set.filter(function(d){return (d.rank==1) })
        
        value = value_data[0]['VOTES']/parseFloat(value_data[0]['polled_votes']);
        
        fontSize = 16;
        
        var arcs = d3.svg.arc()
                    .innerRadius(d3.min([width,height])*.27)
                    .outerRadius(d3.min([width,height])*.4)
                    .startAngle(0);

        var background = progress_bar_svg
                        .append("path")
                        .datum({ endAngle : twoPi})
                        .style("fill", "#ddd")
                        .attr("d", arcs);

        var foreground = progress_bar_svg
                            .append("path")
                            .datum({ endAngle : 0})
                            .style("fill", color_map[value_data[0]['PARTY']])
                            .attr("class", "foreground")
                            .attr("d", arcs);

            foreground
                .transition()
                .duration(1000)
                .ease("linear")
                .attrTween("d", function(d) {
                var interpolate = d3.interpolate(d.endAngle, twoPi * value)
                return function(t) {
                d.endAngle = interpolate(t);
                return arcs(d);
            }
            });

        var text = progress_bar_svg.append("text")
                    .attr("text-anchor", "middle")
                    .attr("dy", ".35em")
                    .style("fill", "rgb(99, 99, 99)")
                    .attr("font-size", fontSize)
                    .text((value*100).toFixed(2) + "%");
                    
        var text = progress_bar_svg.append("text")
                    .attr("text-anchor", "middle")
                    .attr("y", -100)
                    .attr("dy", ".35em")
                    .style("fill", "rgb(99, 99, 99)")
                    .attr("font-size", fontSize)
                    .text('Winning Party ('+value_data[0]['PARTY']+')');

        }

        if (cons_id != undefined){
        
            cons_set = data_csv.filter(function(d){ return (d.AC_NAME==cons_id) })
            
            year_list = [];
            cons_set.forEach(function (d) {
                year_list.push(parseInt(d['YEAR']))
            });
            
            year_list = _.uniq(year_list);
                
            var cons_layers =[]    
            year_list.forEach(function (period) {
                cons_layers.push(cons_set.filter(function(d){ return (parseInt(d.YEAR)==period) }))
            });
            
        var party_names = ['INC','DMK','ADMK','AINRC','JNP','CPI','TMC(M)','NCO','PMK','CPM','MDMK','BJP','IND','Others'];
    
            year_stack=[];
            cons_layers.forEach(function (year) {    
                party_view = {'year': parseInt(year[0]['YEAR'])};            
                
                sub_party ={}
                ind_party = []
                year.forEach(function (d) {
                    sub_party[d.PARTY] = parseInt(d.VOTES)
                    if (d.PARTY=='IND'){
                        ind_party.push(parseInt(d.VOTES)
                        );
                    }
                    else{
                        sub_party[d.PARTY] = parseInt(d.VOTES)
                    }
                });
                
                if (ind_party.length>0){
                    sub_party['IND'] = _.reduce(_.values(ind_party), function(a, b){ return a + b; }, 0)    
                }
                
                party_names.forEach(function (o) {
                   if (sub_party[o]!=undefined){
                        party_view[o] = sub_party[o];
                        sub_party = _.omit(sub_party,o)
                    }
                   else{ party_view[o] = 0 }    
                });
                
                var other_party = _.reduce(_.values(sub_party), function(a, b){ return a + b; }, 0)
                party_view['Others'] = other_party                
                year_stack.push(party_view)
            });
            
            var cons_margin = {top: 20, right: 20, bottom: 35, left: 20},
                cons_width = 1200 - cons_margin.left - cons_margin.right,
                cons_height = 400 - cons_margin.top - cons_margin.bottom;

            var cons_x = d3.scale.ordinal()
                .rangeRoundBands([0, cons_width], .2);

            var cons_y = d3.scale.linear()
                .range([cons_height, 0]);

            var cons_xAxis = d3.svg.axis()
                .scale(cons_x)
                .orient("bottom");

            var cons_yAxis = d3.svg.axis()
                .scale(cons_y)
                .orient("left");

            var percent_svg = d3.select(".percent_stackedbar").append("svg")
                        .style("width", "100%")
                        .attr("data-height","0.54")
                        .attr("viewBox","0 0 "+(cons_width + cons_margin.left + cons_margin.right)+" "+(cons_height + cons_margin.top + cons_margin.bottom))
                        .append("g")
                        .attr("transform", "translate(" + cons_margin.left + "," + cons_margin.top + ")");

            year_stack.forEach(function(d) {
                    var y0 = 0;
                    d.party = party_names.map(function(name) { return {name: name, y0: y0, y1: y0 += +d[name],value: +d[name],YEAR:d['year']}; });
                    d.count_total = d.party[d.party.length - 1].y1;
                    d.party.forEach(function(o) { o.y0 /= y0; o.y1 /= y0; o.y0= o.y0*100,o.y1=o.y1*100 });
                    d.total = d.party[d.party.length - 1].y1;
              });
              
            year_stack.forEach(function(sub_stack) {
                sub_stack.party.forEach(function(l) {
                        l.percent = parseFloat((l.value*100/sub_stack.count_total).toFixed(2));    
                        l.polled_votes = sub_stack.count_total;    
                    });                    
            });
                
              cons_x.domain([1964,1969,1974,1977,1980,1985,1990,1991,1996,2001,2006,2011,2016]);
              cons_y.domain([0, d3.max(year_stack, function(d) { return d.total; })]);

              percent_svg.append("g")
                    .attr("class", "x axis")
                    .attr("transform", "translate(0," + cons_height + ")")
                    .call(cons_xAxis);

              var percent_party = percent_svg.selectAll(".party")
                  .data(year_stack)
                  .enter().append("g")
                  .attr("class", "party")
                  .attr("transform", function(d) { return "translate(" + cons_x(d['year']) + ",0)"; });

              percent_party.selectAll("rect")
                  .data(function(d) { return d.party; })
                  .enter().append("rect")
                  .attr('class',function (d) { return 'party_filters '+d.name+'s' })
                  .attr("width", cons_x.rangeBand())
                  .attr("y", function(d) { return cons_y(d.y1); })
                  .attr("height", function(d) { return cons_y(d.y0) - cons_y(d.y1); })
                  .style("fill", function(d) { return color_map[d.name] })
                  .style("stroke", function(d) { return d3.rgb(color_map[d.name]).darker(); })
                  .attr("data-title",function(d) { return 'Year : '+d.YEAR+'<br/> Constituency : '+cons_id+' <br/> party : '+d.name+' <br/> percentage : '+d.percent.toFixed(2)+'%  <br/> votes : '+addThousandsSeparator(d.value)+'<br/> polled votes : '+addThousandsSeparator(d.polled_votes)+'' ;})        
                  .on("mouseover", function() { d3.select(this).attr("stroke-width", 5);})
                  .on("mouseout", function() { d3.select(this).attr("stroke-width", 1);});
                  
              percent_party.selectAll(".value")
                .data(function(d) { return d.party; })
                .enter().append("text")
                .attr('class',function (d) { return 'value party_filters '+d.name+'s' })
                .attr("y", function(d) { return ((cons_y(d.y1)+cons_y(d.y0))/2)-1; })
                .attr("x", cons_x.rangeBand()/2)
                .attr("text-anchor", "middle")
                .style("font-size", "15px")
                  .attr("data-title",function(d) { return 'Year : '+d.YEAR+'<br/> Constituency : '+cons_id+' <br/> party : '+d.name+' <br/> percentage : '+d.percent.toFixed(2)+'%  <br/> votes : '+addThousandsSeparator(d.value)+'<br/> polled votes : '+addThousandsSeparator(d.polled_votes)+'' ;})        
                .style("fill", function(d) { return (parseInt(color_map[d.name].replace('#', ''), 16) > 0xffffff / 2) ? '#000' : '#fff';})
                .text(function(d) { return (cons_y(d.y0) - cons_y(d.y1))>29 ?d.percent.toFixed(0)+'%':' '; });

              percent_party.selectAll(".name")
                .data(function(d) { return d.party; })
                .enter().append("text")
                .attr('class',function (d) { return 'name party_filters '+d.name+'s' })
                .attr("y", function(d) { return ((cons_y(d.y1)+cons_y(d.y0))/2)+12; })
                .attr("x", cons_x.rangeBand()/2)
                .attr("text-anchor", "middle")
                .style("font-size", "12px")
                  .attr("data-title",function(d) { return 'Year : '+d.YEAR+'<br/> Constituency : '+cons_id+' <br/> party : '+d.name+' <br/> percentage : '+d.percent.toFixed(2)+'%  <br/> votes : '+addThousandsSeparator(d.value)+'<br/> polled votes : '+addThousandsSeparator(d.polled_votes)+'' ;})        
                .style("fill", function(d) { return (parseInt(color_map[d.name].replace('#', ''), 16) > 0xffffff / 2) ? '#000' : '#fff';})
                .text(function(d) { return (cons_y(d.y0) - cons_y(d.y1))>29 ?d.name:' '; });

            $("rect").tooltip({container: '.percent_stackedbar', html: true, placement:'top'});
            $("text").tooltip({container: '.percent_stackedbar', html: true, placement:'top'});
            
            $(".constituency_tag_percent").append("("+cons_id+")");
    
        }
        
    var sub_width = parseInt(d3.select('.party_performance_trend_svg').style('width'), 10)
        
    var margin = {top: 20, right: 20, bottom: 20, left: 20},
        width = sub_width - margin.left - margin.right,
        height = 460 - margin.top - margin.bottom;
    
    var party_performance_trend_svg = d3.select(".party_performance_trend_svg").append("svg")
            .attr("width", "100%")
            .attr("data-height","0.54")
            .attr("viewBox","0 0 "+(width + margin.left + margin.right)+" "+(height + margin.top + margin.bottom))
            .attr("xmlns", 'http://www.w3.org/2000/svg')
            .attr("xlink", 'http://www.w3.org/1999/xlink')
            .attr("version", '1.1')
            .append("g")
            .attr("transform", "translate(" + (margin.left+(width/2))+ "," + (margin.top+(height/2)) + ")");
        
    contest_data_csv = data_csv.filter(function(d){return (d.year==year_detail)});
        
        var contest_data_count = d3.nest()
              .key(function(d) { return d.PARTY; })
              .rollup(function(v) { return v.length; })
              .entries(contest_data_csv);
              
    winning_data_csv = contest_data_csv.filter(function(d){return (d.rank==1)});  
    
        var winning_data_count = d3.nest()
              .key(function(d) { return d.PARTY; })
              .rollup(function(v) { return v.length; })
              .entries(winning_data_csv);
              
         
        winning_data_count.forEach(function(o) {
            o.weight = o.values
            o.width  = +o.weight;
            contest_data_count.forEach(function(d) {
                if(d.key==o.key){
                    o.contest = d.values
                }
            });
            o.score  = (o.values*100/o.contest).toFixed(2);            
        });

        
        radius = Math.min(width, height) / 2,
        innerRadius = 0.3 * radius;

    var pie = d3.layout.pie()
        .sort(null)
        .value(function(d) { return d.width; });


        var arc = d3.svg.arc()
          .innerRadius(innerRadius)
          .outerRadius(function (d) { 
            return (radius - innerRadius) * (d.data.score / 100.0) + innerRadius; 
          });

        var outlineArc = d3.svg.arc()
                .innerRadius(innerRadius)
                .outerRadius(radius);


  var path = party_performance_trend_svg.selectAll(".solidArc")
      .data(pie(winning_data_count))
    .enter().append("path")
      .attr("fill", function(d) { return color_map[d.data.key]; })
      .attr("class", "solidArc")
      .attr("stroke", function(d) { return d3.rgb(color_map[d.data.key]).darker(); })
      .attr("d", arc)
      .attr("data-title",function(d) { return  'party : '+d.data.key+' <br/> contested seats : '+d.data.contest+' <br/> seats won : '+d.data.values+' <br/> convertion percentage : '+d.data.score ;});

  var outerPath = party_performance_trend_svg.selectAll(".outlineArc")
      .data(pie(winning_data_count))
    .enter().append("path")
      .attr("fill", "none")
      .attr("stroke", "gray")
      .attr("class", "outlineArc")
      .attr("d", outlineArc);  
    
  var max_value = d3.max(winning_data_count, function(d) { return d.values; });
  winning_party = winning_data_count.filter(function(d){return (d.values==max_value)});  
  
  party_performance_trend_svg.append("text")
    .attr("class", "aster-score")
    .attr("dy", ".35em")
    .attr("text-anchor", "middle")
    .style("fill", "rgb(99, 99, 99)")
    .attr("font-size", 22)    // text-align: right
    .text(winning_party[0]['key']);
    
      $("path").tooltip({container: '.party_performance_trend_svg', html: true, placement:'top'});
      
        });
        
var margin = {top: 50, right: 20, bottom: 20, left: 20},
    width = 1200 - margin.left - margin.right,
    height = 600 - margin.top - margin.bottom;

var formatNumber = d3.format(",.0f"), 
    format = function(d) { return formatNumber(d); },
    color = d3.scale.category20b();
    
// append the svg canvas to the page
var svg = d3.select(".sankey_chart").append("svg")
    .attr("width", '100%')
    .attr("data-height", '0.5678')
    .attr("viewBox",'0 0 1200 600')
  .append("g")
    .attr("transform", 
          "translate(" + margin.left + "," + margin.top + ")");

// Set the sankey diagram properties
var sankey = d3.sankey()
    .nodeWidth(100)
    .nodePadding(3)
    .size([width, height]);

var path = sankey.link();

// load the data (using the timelyportfolio csv method)
d3.csv("pondi_data.csv", function(error, data) {

data.forEach(function (d) {
        d.source_year =d[flowyear_detail.substring(0, 4)]
        d.target_year =d[flowyear_detail.substring(5, 9)] 
        d.combined_year =d[flowyear_detail.substring(0, 4)]+'_'+d[flowyear_detail.substring(5, 9)] 
        });

        data = data.filter(function(d){return (d.source_year!='') & (d.target_year!='') })
        
        var data_Count = d3.nest()
              .key(function(d) { return d.combined_year; })
              .rollup(function(v) { return v.length; })
              .entries(data);
      
  graph = {"nodes" : [], "links" : []};
    
    name_list = []
    data_Count.forEach(function (d) {

      graph.nodes.push({ "name": d.key.split("_")[0], "color": color_map[d.key.split("_")[0]] });
      graph.nodes.push({ "name": '_'+d.key.split("_")[1], "color": color_map[d.key.split("_")[1]] });

      graph.links.push({ "source": d.key.split("_")[0],
                         "target": '_'+d.key.split("_")[1],
                         "source_color": color_map[d.key.split("_")[0]],
                         "target_color": color_map[d.key.split("_")[1]],
                         "value": d.values });
     });
     
     // return only the distinct / unique nodes
     graph.nodes = d3.keys(d3.nest()
       .key(function (d) { return d.name; })
       .map(graph.nodes));
     
     // loop through each link replacing the text with its index from node
     graph.links.forEach(function (d, i) {
       graph.links[i].source = graph.nodes.indexOf(graph.links[i].source);
       graph.links[i].target = graph.nodes.indexOf(graph.links[i].target);
     });

     //now loop through each nodes to make nodes an array of objects
     // rather than an array of strings
     graph.nodes.forEach(function (d, i) {       
       graph.nodes[i] = { "name": d };
     });

  sankey
    .nodes(graph.nodes)
    .links(graph.links)
    .layout(32);

 svg.selectAll(".head")
      .data([flowyear_detail.substring(0, 4),flowyear_detail.substring(5, 9)])
    .enter().append("text")
      .attr("y", -4)
      .attr("font-size",21)
      .attr("x", function(d,p) { return p < 1 ?  50 : 1110 ; })
      .attr("fill", function(d,p) { return p > 0 ? "rgb(99, 99, 99)" : "rgb(99, 99, 99)"; })
      .attr("text-anchor", function(d,p) { return p <  1 ? 'middle' : 'middle'; })
      .text(function(d) { return 'year('+d+')'; });

      
// add in the links
  var link = svg.append("g").selectAll(".link")
      .data(graph.links)
    .enter().append("path")
      .attr("class", "link")
      .attr("d", path)
      .style("stroke-width", function(d) { return Math.max(1, d.dy); })
      .style("fill", function(d) { return d.target_color; })
      .style("stroke", function(d) { return d.target_color; })      
      .sort(function(a, b) { return b.dy - a.dy; })
      .attr("data-title",function(d) { return d.source.name == d.target.name.replace('_','') ?  d.source.name+' has retained '+format(d.value)+' seats'  : d.target.name.replace('_','') + " has got "+ format(d.value)+" seats from "+ d.source.name; });

// add in the nodes
  var node = svg.append("g").selectAll(".node")
      .data(graph.nodes)
    .enter().append("g")
      .attr("class", "node")
      .attr("transform", function(d) { 
          return "translate(" + d.x + "," + d.y + ")"; })
    .call(d3.behavior.drag()
      .origin(function(d) { return d; })
      .on("dragstart", function() { 
          this.parentNode.appendChild(this); })
      .on("drag", dragmove));
      
// add the rectangles for the nodes
  node.append("rect")
      .attr("height", function(d) { return d.dy; })
      .attr("width", sankey.nodeWidth())
     .style("fill", function(d) { return color_map[d.name.replace('_','')]; })
      .style("stroke", function(d) { return d3.rgb(color_map[d.name.replace('_','')]).darker(2); })
       .attr('data-title',function(d) { return d.name.replace('_','') + "\n" + format(d.value)+' Seats'; });
    
  node
    .append("text")
    .attr("y", function(d) { return (d.dy/2)-1; })
    .attr("x", sankey.nodeWidth()/2)
    .attr("text-anchor", "middle")
    .style("font-size", "15px")
    .attr("data-title", function(d) { return d.name.replace('_','')+' : '+format(d.value)+' seats'; })
    .style("fill", function(d) { return (parseInt(color_map[d.name.replace('_','')].replace('#', ''), 16) > 0xffffff / 2) ? '#000' : '#fff';})
    .text(function(d) { return d.dy>29 ?d.value:' '; });

  node
    .append("text")
    .attr("y", function(d) { return (d.dy/2)+12; })
    .attr("x", sankey.nodeWidth()/2)
    .attr("text-anchor", "middle")
    .style("font-size", "12px")
    .attr("data-title", function(d) { return d.name.replace('_','')+' : '+format(d.value)+' seats'; })
    .style("fill", function(d) { return (parseInt(color_map[d.name.replace('_','')].replace('#', ''), 16) > 0xffffff / 2) ? '#000' : '#fff';})
    .text(function(d) { return d.dy>29 ?d.name.replace('_',''):' '; });

  $("text").tooltip({container: '.sankey_chart', html: true, placement:'top'});      
  $("rect").tooltip({container: '.sankey_chart', html: true, placement:'top'});  
  $("path").tooltip({container: '.sankey_chart', html: true, placement:'top'});      

// add in the title for the nodes
  node.append("text")
      .attr("x", -6)
      .attr("y", function(d) { return d.dy / 2; })
      .attr("dy", ".35em")
      .attr("text-anchor", "end")
      .attr("transform", null)
      .text(function(d) { return d.name.replace('_',''); })
    .filter(function(d) { return d.x < width / 2; })
      .attr("x", 6 + sankey.nodeWidth())
      .attr("text-anchor", "start");

// the function for moving the nodes
  function dragmove(d) {
    d3.select(this).attr("transform", 
        "translate(" + d.x + "," + (
                d.y = Math.max(0, Math.min(height - d.dy, d3.event.y))
            ) + ")");
    sankey.relayout();
    link.attr("d", path);
  }
  
});    

// load the data (using the timelyportfolio csv method)
d3.text("pondi_data.csv", function(error, data) {

   var parsedCSV = d3.csv.parseRows(data);
   
   var container = d3.select(".party_trend")
                      .append("table")
                       .attr("id","myTable")
                       .attr("class","table table-bordered");
                       
            container.selectAll("thead")
                .data([parsedCSV[0]]).enter()
                .append("thead")
                .attr("class","data_head")
                .append("tr")
            .selectAll("th")
                .data(function(d) { return d; }).enter()
                .append("th")
                 .attr("class","dynatable-head")
                 .append("font")
                    .attr("color","#636363")
                    .text(function(d) { return d; })

            if (0 > -1) { parsedCSV.splice(0, 1);}
                    
                container
                    .append("tbody")
                     .selectAll("tr")
                        .data(parsedCSV).enter()
                        .append("tr")
                    .selectAll("td")
                        .data(function(d) { return d; }).enter()
                        .append("td")
                        .attr("bgcolor",function(d) { return color_map[d] })
                        .append("font")
                        .append('a')
                        .style("color",function(d) { return color_map[d] == undefined ? "#636363" : ((parseInt(color_map[d].replace('#', ''), 16) > 0xffffff / 2) ? '#000' : '#fff') })
                        .attr("href",function(d,i) { return  i==0? '?cons_id='+d+'#detailConstituency' : '#Constituency_partyTrend' })
                        .attr("color",function(d) { return color_map[d] == undefined ? "#636363" : ((parseInt(color_map[d].replace('#', ''), 16) > 0xffffff / 2) ? '#000' : '#fff') })
                        .text(function(d) { return d; })        

    $('#myTable').DataTable({ "sScrollX": "100%", "sScrollXInner": "150%" });
    
});

</script>
<script>var sharebutton_is_horizontal = false; document.write('<script src="//cdn.front.to/libs/share7.js"></scr' + 'ipt>'); document.write("<div style='display: none'>");</script><a href="http://sharebutton.org/">share this button</a><script>document.write("</div>");</script>
<div class="container footer_details">
The data was compiled by <a href="https://in.linkedin.com/in/sushanthece"> Sushanth </a> using data from <a href="http://eci.nic.in/eci_main1/ElectionStatistics.aspx"> eci.nic.in </a> and  <a href="http://eciresults.nic.in/"> eciresults</a>. The visualisation was designed and built by <a href="https://in.linkedin.com/in/sushanthece"> Sushanth</a>.
</body>
</html>